function animate(e,t){var n=document.querySelector(e);t==="none"?(n.style.opacity=0,n.style.display="none"):(n.style.display=t,setTimeout(function(){n.style.opacity=1},1))}var DollarRecognizer=function(e){function t(e,t){this.x=e,this.y=t}function n(e,t,n,r){this.x=e,this.y=t,this.Width=n,this.Height=r}function r(e,t){this.Name=e,this.Points=s(t,v);var n=o(this.Points);this.Points=u(this.Points,-n),this.Points=a(this.Points,m),this.Points=f(this.Points,g),this.Vector=l(this.Points)}function i(e,t){this.Name=e,this.Score=t}function s(e,n){for(var r=p(e)/(n-1),i=0,s=Array(e[0]),o=1;o<e.length;o++){var u=d(e[o-1],e[o]);i+u>=r?(i=new t(e[o-1].x+(r-i)/u*(e[o].x-e[o-1].x),e[o-1].y+(r-i)/u*(e[o].y-e[o-1].y)),s[s.length]=i,e.splice(o,0,i),i=0):i+=u}return s.length==n-1&&(s[s.length]=new t(e[e.length-1].x,e[e.length-1].y)),s}function o(e){var t=h(e);return Math.atan2(t.y-e[0].y,t.x-e[0].x)}function u(e,n){for(var r=h(e),i=Math.cos(n),s=Math.sin(n),o=[],u=0;u<e.length;u++)o[o.length]=new t((e[u].x-r.x)*i-(e[u].y-r.y)*s+r.x,(e[u].x-r.x)*s+(e[u].y-r.y)*i+r.y);return o}function a(e,r){var i;i=Infinity;for(var s=-Infinity,o=Infinity,u=-Infinity,a=0;a<e.length;a++)e[a].x<i&&(i=e[a].x),e[a].x>s&&(s=e[a].x),e[a].y<o&&(o=e[a].y),e[a].y>u&&(u=e[a].y);i=new n(i,o,s-i,u-o),s=[];for(o=0;o<e.length;o++)s[s.length]=new t(e[o].x*(r/i.Width),e[o].y*(r/i.Height));return s}function f(e,n){for(var r=h(e),i=[],s=0;s<e.length;s++)i[i.length]=new t(e[s].x+n.x-r.x,e[s].y+n.y-r.y);return i}function l(e){for(var t=0,n=[],r=0;r<e.length;r++)n[n.length]=e[r].x,n[n.length]=e[r].y,t+=e[r].x*e[r].x+e[r].y*e[r].y;e=Math.sqrt(t);for(r=0;r<n.length;r++)n[r]/=e;return n}function c(e,t,n){for(var e=u(e,n),t=t.Points,r=n=0;r<e.length;r++)n+=d(e[r],t[r]);return n/e.length}function h(e){for(var n=0,r=0,i=0;i<e.length;i++)n+=e[i].x,r+=e[i].y;return n/=e.length,r/=e.length,new t(n,r)}function p(e){for(var t=0,n=1;n<e.length;n++)t+=d(e[n-1],e[n]);return t}function d(e,t){var n=t.x-e.x,r=t.y-e.y;return Math.sqrt(n*n+r*r)}var v=64,m=250,g=new t(0,0),y=.5*Math.sqrt(m*m+m*m),b=45*Math.PI/180,w=2*Math.PI/180,E=.5*(-1+Math.sqrt(5));return function(){this.Templates=[],this.Templates.push(new r("circle",[{x:553,y:450},{x:546,y:450},{x:536,y:450},{x:524,y:450},{x:514,y:450},{x:504,y:445},{x:493,y:438},{x:488,y:430},{x:484,y:420},{x:481,y:414},{x:480,y:403},{x:480,y:378},{x:494,y:348},{x:514,y:323},{x:541,y:300},{x:570,y:288},{x:596,y:285},{x:618,y:286},{x:636,y:300},{x:645,y:324},{x:647,y:353},{x:644,y:382},{x:627,y:407},{x:609,y:428},{x:597,y:439},{x:587,y:447},{x:577,y:452},{x:570,y:454}])),this.Templates.push(new r("circle",[{x:511,y:459},{x:523,y:459},{x:576,y:436},{x:654,y:380},{x:695,y:332},{x:715,y:295},{x:726,y:255},{x:729,y:222},{x:729,y:207},{x:724,y:197},{x:714,y:191},{x:693,y:188},{x:665,y:188},{x:632,y:199},{x:594,y:218},{x:561,y:239},{x:542,y:257},{x:522,y:284},{x:511,y:309},{x:505,y:348},{x:505,y:407},{x:520,y:441},{x:537,y:467},{x:551,y:480},{x:562,y:489}])),this.Templates.push(new r("circle",[{x:592,y:307},{x:591,y:307},{x:582,y:307},{x:571,y:307},{x:547,y:307},{x:517,y:299},{x:499,y:293},{x:474,y:281},{x:455,y:271},{x:444,y:259},{x:435,y:240},{x:435,y:216},{x:438,y:173},{x:463,y:132},{x:485,y:113},{x:520,y:91},{x:555,y:77},{x:599,y:74},{x:637,y:74},{x:671,y:87},{x:691,y:101},{x:710,y:119},{x:716,y:126},{x:718,y:131},{x:719,y:137},{x:704,y:146},{x:683,y:159},{x:671,y:166},{x:643,y:186},{x:627,y:201},{x:606,y:226},{x:599,y:242},{x:591,y:263},{x:588,y:283},{x:587,y:305},{x:587,y:333},{x:590,y:354},{x:600,y:369},{x:611,y:384},{x:619,y:391}])),this.Templates.push(new r("circle",[{x:787,y:422},{x:779,y:431},{x:765,y:434},{x:752,y:435},{x:743,y:435},{x:733,y:435},{x:723,y:434},{x:714,y:433},{x:705,y:432},{x:696,y:430},{x:687,y:427},{x:674,y:423},{x:662,y:416},{x:651,y:408},{x:642,y:399},{x:634,y:388},{x:631,y:380},{x:626,y:368},{x:624,y:356},{x:623,y:344},{x:625,y:332},{x:628,y:322},{x:633,y:313},{x:640,y:306},{x:649,y:299},{x:659,y:295},{x:670,y:291},{x:682,y:288},{x:696,y:287},{x:714,y:286},{x:724,y:287},{x:743,y:290},{x:756,y:294},{x:768,y:301},{x:778,y:310},{x:785,y:321},{x:791,y:334},{x:793,y:344},{x:796,y:362},{x:794,y:375},{x:790,y:388},{x:783,y:399},{x:774,y:408},{x:762,y:415},{x:749,y:421},{x:739,y:423},{x:724,y:426},{x:704,y:428},{x:688,y:427},{x:673,y:424},{x:659,y:421},{x:645,y:416},{x:637,y:412},{x:625,y:406},{x:615,y:399},{x:606,y:392},{x:602,y:387},{x:594,y:376},{x:592,y:368},{x:592,y:356},{x:597,y:347},{x:604,y:338},{x:614,y:330},{x:627,y:321},{x:642,y:314},{x:658,y:307},{x:669,y:304},{x:685,y:300},{x:701,y:297},{x:716,y:296},{x:725,y:296},{x:737,y:296},{x:747,y:296},{x:752,y:296},{x:759,y:296},{x:764,y:296},{x:769,y:297},{x:775,y:297},{x:779,y:296}])),this.Templates.push(new r("check",[new t(91,185),new t(93,185),new t(95,185),new t(97,185),new t(100,188),new t(102,189),new t(104,190),new t(106,193),new t(108,195),new t(110,198),new t(112,201),new t(114,204),new t(115,207),new t(117,210),new t(118,212),new t(120,214),new t(121,217),new t(122,219),new t(123,222),new t(124,224),new t(126,226),new t(127,229),new t(129,231),new t(130,233),new t(129,231),new t(129,228),new t(129,226),new t(129,224),new t(129,221),new t(129,218),new t(129,212),new t(129,208),new t(130,198),new t(132,189),new t(134,182),new t(137,173),new t(143,164),new t(147,157),new t(151,151),new t(155,144),new t(161,137),new t(165,131),new t(171,122),new t(174,118),new t(176,114),new t(177,112),new t(177,114),new t(175,116),new t(173,118)])),this.Templates.push(new r("check",[{x:611,y:315},{x:615,y:320},{x:615,y:318},{x:618,y:321},{x:621,y:325},{x:623,y:328},{x:624,y:332},{x:626,y:337},{x:628,y:342},{x:630,y:347},{x:632,y:352},{x:635,y:361},{x:637,y:366},{x:641,y:372},{x:643,y:376},{x:646,y:380},{x:648,y:384},{x:652,y:388},{x:662,y:386},{x:666,y:381},{x:674,y:369},{x:683,y:356},{x:695,y:334},{x:707,y:313},{x:720,y:291},{x:734,y:267},{x:748,y:243},{x:763,y:219},{x:779,y:196},{x:789,y:182},{x:806,y:162},{x:822,y:145},{x:832,y:137},{x:841,y:130},{x:849,y:126},{x:856,y:123}])),this.Templates.push(new r("check",[{x:686,y:314},{x:685,y:319},{x:683,y:323},{x:684,y:327},{x:684,y:332},{x:686,y:338},{x:687,y:343},{x:688,y:350},{x:690,y:356},{x:691,y:363},{x:693,y:368},{x:695,y:377},{x:697,y:382},{x:699,y:389},{x:701,y:395},{x:702,y:398},{x:703,y:402},{x:705,y:406},{x:706,y:408},{x:708,y:411},{x:715,y:406},{x:720,y:400},{x:729,y:389},{x:738,y:377},{x:754,y:357},{x:769,y:337},{x:786,y:316},{x:802,y:294},{x:819,y:271},{x:836,y:249},{x:846,y:235},{x:860,y:215},{x:867,y:203}])),this.Templates.push(new r("s",[{x:830,y:71},{x:824,y:71},{x:814,y:73},{x:805,y:76},{x:795,y:79},{x:785,y:82},{x:774,y:86},{x:764,y:90},{x:754,y:94},{x:744,y:98},{x:735,y:102},{x:721,y:108},{x:709,y:114},{x:698,y:119},{x:693,y:122},{x:685,y:126},{x:682,y:129},{x:677,y:132},{x:673,y:134},{x:671,y:137},{x:670,y:139},{x:676,y:142},{x:683,y:143},{x:691,y:145},{x:702,y:146},{x:715,y:147},{x:729,y:148},{x:749,y:151},{x:765,y:153},{x:775,y:156},{x:789,y:159},{x:801,y:163},{x:813,y:168},{x:828,y:176},{x:837,y:183},{x:845,y:191},{x:849,y:197},{x:856,y:205},{x:858,y:210},{x:863,y:220},{x:862,y:227},{x:859,y:234},{x:854,y:239},{x:845,y:244},{x:833,y:248},{x:816,y:252},{x:799,y:252},{x:782,y:252},{x:764,y:250},{x:746,y:247},{x:727,y:244},{x:708,y:239},{x:690,y:235},{x:672,y:231},{x:661,y:228},{x:652,y:226},{x:639,y:224},{x:632,y:223},{x:622,y:222},{x:611,y:221},{x:605,y:220}])),this.Templates.push(new r("s",[{x:879,y:116},{x:867,y:116},{x:853,y:117},{x:843,y:117},{x:835,y:119},{x:825,y:121},{x:815,y:123},{x:803,y:128},{x:792,y:133},{x:781,y:139},{x:772,y:144},{x:758,y:151},{x:752,y:154},{x:747,y:157},{x:739,y:162},{x:732,y:167},{x:729,y:172},{x:733,y:175},{x:741,y:180},{x:752,y:184},{x:765,y:189},{x:786,y:196},{x:798,y:200},{x:816,y:206},{x:827,y:209},{x:843,y:214},{x:850,y:216},{x:860,y:220},{x:868,y:224},{x:867,y:228},{x:859,y:232},{x:846,y:235},{x:830,y:239},{x:812,y:243},{x:793,y:247},{x:774,y:251},{x:755,y:255},{x:744,y:257},{x:726,y:259}])),this.Templates.push(new r("s",[{x:443,y:141},{x:434,y:144},{x:425,y:149},{x:421,y:152},{x:417,y:155},{x:414,y:158},{x:410,y:163},{x:408,y:169},{x:404,y:174},{x:402,y:181},{x:398,y:191},{x:394,y:203},{x:392,y:217},{x:389,y:237},{x:390,y:254},{x:391,y:266},{x:394,y:290},{x:397,y:300},{x:400,y:309},{x:406,y:321},{x:412,y:330},{x:420,y:337},{x:429,y:342},{x:440,y:344},{x:454,y:344},{x:466,y:341},{x:484,y:334},{x:498,y:325},{x:512,y:315},{x:527,y:303},{x:542,y:290},{x:558,y:276},{x:575,y:262},{x:592,y:249},{x:610,y:237},{x:622,y:230},{x:639,y:221},{x:650,y:217},{x:666,y:211},{x:681,y:208},{x:700,y:207},{x:714,y:209},{x:725,y:215},{x:736,y:223},{x:745,y:233},{x:755,y:250},{x:761,y:265},{x:764,y:283},{x:766,y:301},{x:764,y:313},{x:762,y:331},{x:757,y:353},{x:751,y:362},{x:738,y:380},{x:729,y:387},{x:716,y:397},{x:701,y:405},{x:691,y:408},{x:676,y:414},{x:661,y:418},{x:652,y:418}])),this.Templates.push(new r("s",[{x:584,y:207},{x:582,y:208},{x:581,y:210},{x:578,y:214},{x:574,y:222},{x:570,y:232},{x:568,y:239},{x:567,y:245},{x:567,y:250},{x:567,y:254},{x:567,y:258},{x:567,y:259},{x:572,y:261},{x:587,y:261},{x:608,y:258},{x:636,y:250},{x:658,y:243},{x:684,y:239},{x:717,y:239},{x:739,y:239},{x:756,y:249},{x:769,y:269},{x:775,y:285},{x:781,y:312},{x:781,y:334},{x:777,y:354},{x:756,y:379},{x:709,y:409},{x:669,y:428},{x:596,y:461},{x:576,y:471},{x:560,y:479},{x:545,y:486},{x:540,y:488},{x:538,y:489},{x:537,y:489}])),this.Templates.push(new r("s",[{x:567,y:103},{x:564,y:105},{x:554,y:111},{x:543,y:117},{x:528,y:129},{x:525,y:133},{x:518,y:141},{x:515,y:148},{x:515,y:153},{x:515,y:158},{x:524,y:166},{x:539,y:177},{x:562,y:192},{x:578,y:205},{x:590,y:224},{x:593,y:244},{x:592,y:254},{x:581,y:266},{x:566,y:274},{x:547,y:277},{x:524,y:278},{x:501,y:278},{x:481,y:274}])),this.Templates.push(new r("s",[{x:607,y:46},{x:601,y:46},{x:590,y:46},{x:582,y:49},{x:574,y:55},{x:572,y:57},{x:569,y:59},{x:569,y:65},{x:567,y:73},{x:575,y:83},{x:591,y:98},{x:615,y:117},{x:651,y:150},{x:667,y:176},{x:675,y:199},{x:679,y:230},{x:679,y:258},{x:672,y:273},{x:657,y:283},{x:636,y:290},{x:613,y:294},{x:594,y:295},{x:578,y:295},{x:566,y:295},{x:560,y:293}])),this.Templates.push(new r("*circle0",[{x:558,y:367},{x:559,y:367},{x:562,y:356},{x:562,y:323},{x:562,y:306},{x:562,y:295},{x:561,y:295},{x:558,y:295},{x:550,y:295},{x:542,y:300},{x:530,y:301},{x:517,y:302},{x:503,y:303},{x:489,y:303},{x:469,y:300},{x:460,y:284},{x:449,y:238},{x:449,y:173},{x:459,y:100},{x:487,y:37},{x:524,y:-15},{x:570,y:-61},{x:604,y:-79},{x:665,y:-92},{x:714,y:-92},{x:761,y:-68},{x:787,y:-39},{x:806,y:0},{x:814,y:67},{x:809,y:111},{x:786,y:163},{x:762,y:200},{x:741,y:228},{x:727,y:245},{x:714,y:263},{x:706,y:272},{x:698,y:282},{x:694,y:288},{x:693,y:293},{x:693,y:297},{x:693,y:300},{x:699,y:306},{x:711,y:314},{x:731,y:325},{x:759,y:338},{x:795,y:353},{x:834,y:363},{x:873,y:366},{x:901,y:366}])),this.Templates.push(new r("*pepe0",[{x:537,y:358},{x:537,y:351},{x:540,y:318},{x:553,y:280},{x:565,y:252},{x:583,y:217},{x:602,y:186},{x:619,y:167},{x:640,y:152},{x:666,y:142},{x:692,y:136},{x:710,y:134},{x:728,y:134},{x:744,y:140},{x:751,y:167},{x:751,y:207},{x:751,y:256},{x:742,y:322},{x:717,y:367},{x:675,y:402},{x:636,y:425},{x:556,y:462},{x:518,y:472},{x:488,y:480},{x:462,y:486}])),this.Templates.push(new r("*pepe1",[{x:523,y:332},{x:543,y:315},{x:568,y:281},{x:607,y:227},{x:636,y:195},{x:670,y:162},{x:687,y:151},{x:714,y:144},{x:722,y:144},{x:731,y:156},{x:731,y:191},{x:723,y:237},{x:701,y:290},{x:669,y:347},{x:625,y:399},{x:592,y:430},{x:556,y:461},{x:524,y:492},{x:509,y:507}])),this.Templates.push(new r("*pepe2",[{x:350,y:319},{x:364,y:307},{x:404,y:264},{x:475,y:183},{x:562,y:87},{x:593,y:59},{x:627,y:35},{x:647,y:29},{x:655,y:29},{x:665,y:29},{x:670,y:30},{x:671,y:32},{x:673,y:42},{x:661,y:72},{x:617,y:124},{x:545,y:199},{x:450,y:303},{x:356,y:413},{x:308,y:483},{x:276,y:545},{x:252,y:605},{x:244,y:635},{x:241,y:663},{x:240,y:677},{x:240,y:687}])),this.Templates.push(new r("*pepe3",[{x:444,y:346},{x:456,y:346},{x:475,y:337},{x:512,y:315},{x:550,y:282},{x:590,y:239},{x:604,y:222},{x:619,y:203},{x:628,y:190},{x:630,y:186},{x:629,y:192},{x:619,y:227},{x:611,y:272},{x:604,y:340},{x:604,y:410},{x:604,y:450},{x:605,y:482},{x:611,y:492},{x:621,y:503},{x:632,y:504},{x:647,y:497},{x:666,y:478},{x:692,y:448},{x:719,y:417},{x:735,y:398},{x:745,y:381},{x:753,y:369},{x:757,y:363},{x:760,y:360},{x:761,y:358}])),this.Templates.push(new r("*pepeb",[{x:581,y:508},{x:574,y:500},{x:541,y:451},{x:520,y:399},{x:503,y:348},{x:493,y:312},{x:485,y:280},{x:482,y:269},{x:480,y:261},{x:479,y:258},{x:478,y:258},{x:479,y:257},{x:480,y:258},{x:486,y:258},{x:502,y:258},{x:539,y:245},{x:592,y:229},{x:633,y:223},{x:663,y:223},{x:680,y:225},{x:691,y:235},{x:692,y:259},{x:673,y:288},{x:634,y:332},{x:605,y:362},{x:580,y:384},{x:565,y:396},{x:557,y:402},{x:554,y:404},{x:556,y:405},{x:565,y:404},{x:586,y:398},{x:616,y:391},{x:654,y:390},{x:690,y:390},{x:710,y:401},{x:734,y:427},{x:739,y:457},{x:739,y:487},{x:723,y:509},{x:697,y:518},{x:647,y:519},{x:612,y:519},{x:577,y:513},{x:555,y:511},{x:538,y:510},{x:532,y:510}])),this.Templates.push(new r("*s0",[{x:693,y:150},{x:685,y:150},{x:672,y:151},{x:658,y:163},{x:642,y:184},{x:628,y:210},{x:622,y:226},{x:619,y:250},{x:618,y:284},{x:619,y:306},{x:632,y:323},{x:660,y:340},{x:691,y:350},{x:729,y:353},{x:747,y:353},{x:775,y:338}])),this.Templates.push(new r("*s1",[{x:424,y:279},{x:424,y:261},{x:430,y:237},{x:441,y:213},{x:453,y:192},{x:466,y:176},{x:478,y:169},{x:489,y:165},{x:501,y:163},{x:512,y:163},{x:527,y:168},{x:537,y:184},{x:551,y:210},{x:564,y:241},{x:577,y:273},{x:582,y:295},{x:585,y:308},{x:588,y:314},{x:589,y:317}])),this.Templates.push(new r("*s2",[{x:627,y:143},{x:609,y:155},{x:597,y:172},{x:586,y:196},{x:581,y:213},{x:576,y:232},{x:576,y:249},{x:576,y:261},{x:580,y:273},{x:600,y:290},{x:627,y:307},{x:642,y:313},{x:663,y:323},{x:672,y:332},{x:673,y:342},{x:673,y:348},{x:665,y:356},{x:649,y:362},{x:632,y:363},{x:617,y:365},{x:593,y:365},{x:578,y:365},{x:570,y:365},{x:562,y:365}])),this.Templates.push(new r("*s3",[{x:501,y:241},{x:501,y:243},{x:500,y:258},{x:502,y:275},{x:520,y:330},{x:533,y:354},{x:555,y:374},{x:582,y:384},{x:620,y:384},{x:659,y:356},{x:707,y:296},{x:732,y:245},{x:753,y:185},{x:760,y:147},{x:762,y:122},{x:762,y:100}])),this.Templates.push(new r("*check0",[{x:466,y:292},{x:470,y:290},{x:486,y:267},{x:542,y:202},{x:591,y:160},{x:638,y:124},{x:690,y:95},{x:717,y:84},{x:742,y:74},{x:749,y:71},{x:756,y:70},{x:757,y:68}])),this.Templates.push(new r("*1",[{x:553,y:405},{x:555,y:401},{x:557,y:394},{x:560,y:389},{x:563,y:383},{x:567,y:378},{x:571,y:371},{x:575,y:363},{x:580,y:355},{x:584,y:347},{x:591,y:335},{x:597,y:324},{x:604,y:312},{x:609,y:305},{x:615,y:294},{x:621,y:284},{x:624,y:279},{x:631,y:268},{x:633,y:264},{x:637,y:258},{x:639,y:254},{x:642,y:250},{x:644,y:247},{x:645,y:245},{x:647,y:242},{x:645,y:245},{x:642,y:250},{x:641,y:254},{x:639,y:261},{x:638,y:271},{x:636,y:282},{x:635,y:295},{x:633,y:316},{x:632,y:336},{x:633,y:349},{x:633,y:376},{x:634,y:390},{x:636,y:401},{x:639,y:423},{x:642,y:432},{x:645,y:445},{x:649,y:457},{x:653,y:467},{x:657,y:476},{x:660,y:480}])),this.Templates.push(new r("*2",[{x:541,y:525},{x:539,y:522},{x:542,y:518},{x:545,y:513},{x:549,y:505},{x:555,y:493},{x:565,y:475},{x:577,y:453},{x:596,y:418},{x:612,y:387},{x:629,y:355},{x:647,y:321},{x:658,y:301},{x:675,y:270},{x:686,y:252},{x:696,y:238},{x:710,y:218}])),this.Templates.push(new r("*3",[{x:778,y:134},{x:764,y:145},{x:751,y:156},{x:738,y:174},{x:730,y:185},{x:720,y:196},{x:710,y:209},{x:701,y:223},{x:692,y:236},{x:682,y:248},{x:669,y:267},{x:656,y:285},{x:644,y:302},{x:632,y:319},{x:625,y:330},{x:616,y:345},{x:606,y:359},{x:598,y:372},{x:593,y:379}])),this.Templates.push(new r("*check0",[{x:871,y:38},{x:854,y:42},{x:836,y:46},{x:822,y:50},{x:806,y:55},{x:788,y:61},{x:770,y:68},{x:741,y:78},{x:721,y:86},{x:691,y:97},{x:663,y:108},{x:646,y:115},{x:622,y:124},{x:608,y:128},{x:597,y:132},{x:580,y:138},{x:572,y:141},{x:566,y:142},{x:556,y:145},{x:541,y:147}])),this.Templates.push(new r("*check1",[{x:445,y:85},{x:448,y:87},{x:455,y:92},{x:461,y:96},{x:467,y:100},{x:474,y:106},{x:482,y:111},{x:492,y:117},{x:507,y:126},{x:525,y:136},{x:545,y:146},{x:566,y:157},{x:588,y:168},{x:611,y:179},{x:633,y:191},{x:647,y:197}])),this.Templates.push(new r("moon",[{x:721,y:500},{x:715,y:500},{x:698,y:500},{x:664,y:500},{x:626,y:494},{x:580,y:470},{x:528,y:422},{x:499,y:388},{x:481,y:361},{x:464,y:334},{x:455,y:317},{x:451,y:301},{x:449,y:274},{x:458,y:239},{x:494,y:187},{x:534,y:151},{x:581,y:120},{x:613,y:103},{x:641,y:90},{x:672,y:80},{x:700,y:74},{x:721,y:73},{x:741,y:73},{x:756,y:76},{x:764,y:80},{x:772,y:85},{x:775,y:87},{x:777,y:88},{x:777,y:89},{x:772,y:89},{x:758,y:95},{x:735,y:107},{x:710,y:122},{x:685,y:144},{x:666,y:166},{x:649,y:190},{x:636,y:212},{x:626,y:238},{x:620,y:269},{x:619,y:305},{x:619,y:341},{x:629,y:377},{x:643,y:408},{x:653,y:427},{x:669,y:458},{x:682,y:476},{x:700,y:494},{x:715,y:504},{x:732,y:517},{x:740,y:523},{x:748,y:527},{x:752,y:531}])),this.Templates.push(new r("triangle0",[{x:379,y:330},{x:430,y:330},{x:488,y:330},{x:550,y:330},{x:594,y:330},{x:626,y:330},{x:647,y:330},{x:663,y:330},{x:668,y:330},{x:671,y:329},{x:671,y:323},{x:667,y:305},{x:661,y:277},{x:655,y:234},{x:652,y:183},{x:648,y:154},{x:640,y:129},{x:633,y:114},{x:624,y:107},{x:612,y:106},{x:596,y:106},{x:581,y:106},{x:563,y:111},{x:542,y:123},{x:514,y:145},{x:483,y:188},{x:441,y:252},{x:414,y:300},{x:385,y:349},{x:370,y:375},{x:362,y:392},{x:355,y:407},{x:351,y:413}])),this.Templates.push(new r("triangle1",[{x:407,y:478},{x:412,y:466},{x:426,y:435},{x:449,y:378},{x:490,y:293},{x:516,y:238},{x:534,y:201},{x:542,y:184},{x:546,y:174},{x:548,y:172},{x:549,y:176},{x:552,y:182},{x:564,y:199},{x:591,y:237},{x:628,y:288},{x:672,y:335},{x:706,y:371},{x:717,y:386},{x:738,y:414},{x:740,y:423},{x:740,y:428},{x:735,y:429},{x:724,y:429},{x:709,y:429},{x:684,y:429},{x:627,y:432},{x:559,y:445},{x:509,y:457},{x:454,y:474},{x:424,y:484},{x:404,y:492},{x:391,y:496},{x:385,y:498}])),this.Recognize=function(e){var t=this.Recognizer(e),e=this.Recognizer(e.reverse()),t=t.Score>e.Score?t:e;return{Name:t.Name,Score:t.Score}},this.Recognizer=function(e,t){for(var e=s(e,v),n=o(e),e=u(e,-n),e=a(e,m),e=f(e,g),n=l(e),r=Infinity,h=0,p=0;p<this.Templates.length;p++){var d;if(t){for(var S=this.Templates[p].Vector,T=d=0,N=0;N<S.length;N+=2)d+=S[N]*n[N]+S[N+1]*n[N+1],T+=S[N]*n[N+1]-S[N+1]*n[N];S=Math.atan(T/d),d=Math.acos(d*Math.cos(S)+T*Math.sin(S))}else{d=e;for(var T=this.Templates[p],S=-b,N=+b,C=w,L=E*S+(1-E)*N,A=c(d,T,L),O=(1-E)*S+E*N,M=c(d,T,O);Math.abs(N-S)>C;)A<M?(N=O,O=L,M=A,L=E*S+(1-E)*N,A=c(d,T,L)):(S=L,L=O,A=M,O=(1-E)*S+E*N,M=c(d,T,O));d=Math.min(A,M)}d<r&&(r=d,h=p)}return new i(this.Templates[h].Name,t?1/r:1-r/y)},this.AddTemplate=function(e,t){this.Templates[this.Templates.length]=new r(e,t);for(var n=0,i=0;i<this.Templates.length;i++)this.Templates[i].Name==e&&n++;return n},this.DeleteUserTemplates=function(){return this.Templates.length=16},this.PathLength=p}}({});window.requestAnimationFrame=function(){return window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.oRequestAnimationFrame||window.msRequestAnimationFrame||function(e){window.setTimeout(e,1e3/60)}}(),String.prototype.replaceAll=function(e,t){if(typeof e=="object"){for(var n=this,r=0;r<e.length;r++)n=n.split(e[r]).join(t[r]);return n}return this.split(e).join(t)},String.prototype.trim=function(){return this.replace(/^\s+|\s+$/g,"")},String.prototype.ucfirst=function(){return this[0].toUpperCase()+this.substr(1)},String.prototype.ucwords=function(){return this.replace(/^(.)|\s(.)/g,function(e){return e.toUpperCase()})},String.prototype.addslashes=function(){return this.replace(/([\\"'])/g,"\\$1").replace(/\0/g,"\\0")},String.prototype.stripslashes=function(){return this.replace(/\0/g,"0").replace(/\\([\\'"])/g,"$1")},String.prototype.basename=function(){return this.replace(/\\/g,"/").replace(/.*\//,"")},String.prototype.lpad=function(e,t){for(var n=this;n.length<t;)n=e+n;return n},String.prototype.rpad=function(e,t){for(var n=this;n.length<t;)n+=e;return n},window.STRING=String,STRING.prototype.replaceAll=STRING.prototype.replaceAll,STRING.prototype.trim=STRING.prototype.trim,STRING.prototype.ucfirst=STRING.prototype.ucfirst,STRING.prototype.ucwords=STRING.prototype.ucwords,STRING.prototype.addslashes=STRING.prototype.addslashes,STRING.prototype.stripslashes=STRING.prototype.stripslashes,STRING.prototype.basename=STRING.prototype.basename,STRING.prototype.lpad=STRING.prototype.lpad,STRING.prototype.rpad=STRING.prototype.rpad,typeof Color=="undefined"&&(Color={}),typeof Color.Blend=="undefined"&&(Color.Blend={}),function(e){return e.modes={COMPOSITE:["SourceIn","SourceOver","DestinationOut"],OPACITY:["Normal","Dissolve","Average"],DARKEN:"Darker,Darken,Multiply,Color Burn,Color Burn Inverse,Soft Burn,Linear Burn,Darker Color".split(","),LIGHTEN:"Lighter,Lighten,Screen,Color Dodge,Color Dodge Inverse,Soft Dodge,Linear Dodge,Lighter Color".split(","),LIGHTING:"Overlay,Soft Light,Fuzzy Light,Hard Light,Vivid Light,Linear Light,Pin Light,Hard Mix,Grain Extract,Grain Merge".split(","),INVERT:["Difference","Exclusion","Negation","Invert"],COLOR:"Hue,Saturation,Color,Luminosity,Red,Green,Blue,Tint".split(","),THERMAL:["Reflect","Glow","Heat","Freeze"],MATH:"Additive,Subtractive,Subtract,Stamp,Interpolation,Divide".split(","),LOGIC:["XOR","AND","OR"]},e.isAlphaRequired=function(e){for(var t=0,n={};t<e.length;t++)n[e[t].replace(" ","")]=!0;return n}("Darker,Lighter,SourceIn,SourceOver,DestinationOut,Luminosity,Tint,DarkerColor,LighterColor,Hue,Saturation,Color,Red,Green,Blue,Cyan,Magenta,Yellow,Dissolve".split(",")),e.apply=function(t,n,r){var i=e[r],t=t.data,s=n.data,o=t.length;return e.isAlphaRequired[r]?e.apply32bit(i,t,s,o):e.apply24bit(i,t,s,o),n},e.apply24bit=function(e,t,n,r){for(var i=0;i<r;i+=4)t[i+3]>0?(n[i]=e(t[i],n[i]),n[i+1]=e(t[i+1],n[i+1]),n[i+2]=e(t[i+2],n[i+2])):(n[i]=n[i],n[i+1]=n[i+1],n[i+2]=n[i+2]),n[i+3]=n[i+3]},e.apply32bit=function(e,t,n,r){for(var i=0;i<r;i+=4)if(t[i+3]>0){var s=e({R:t[i+0],G:t[i+1],B:t[i+2],A:t[i+3]},{R:n[i+0],G:n[i+1],B:n[i+2],A:n[i+3]});n[i]=s>>>16&255,n[i+1]=s>>>8&255,n[i+2]=s&255,preserveAlpha||(n[i+3]=s>>>24)}else n[i]=n[i],n[i+1]=n[i+1],n[i+2]=n[i+2],n[i+3]=n[i+3]},e.SourceIn=function(e,t){return _a=e.A*t.A,_r=e.R*t.A,_g=e.G*t.A,_b=e.B*t.A,(_a<<24|_r<<16|_g<<8|_b)>>>0},e.DestinationOut=function(e,t){return(t.A*(1-e.A)<<24|t.R*(1-e.A)<<16|t.G*(1-e.A)<<8|t.B*(1-e.A))>>>0},e.SourceOver=function(e,t){return(e.A+t.A*(1-e.A/255)<<24|e.R+t.R*(1-e.A/255)<<16|e.G+t.G*(1-e.A/255)<<8|e.B+t.B*(1-e.A/255))>>>0},e.Dissolve=function(e,t){return RAND.toDouble()*255>t.A?(t.A<<24|e.R<<16|e.G<<8|e.B)>>>0:(t.A<<24|t.R<<16|t.G<<8|t.B)>>>0},e.Average=function(e,t){return e+t>>1},e.Darken=function(e,t){return e<t?e:t},e.Multiply=function(e,t){return e*t/255},e.ColorBurn=function(e,t){if(t==0)return 0;var n=255-(255-e<<8)/t;return n<0?0:n},e.ColorBurnInverse=function(e,t){if(e==0)return 0;var n=255-(255-t<<8)/e;return n<0?0:n},e.SoftBurn=function(e,t){if(e+t<256){if(e==255)return 255;var n=(t<<7)/(e^255);return n>255?255:n}return n=((e^255)<<7)/t^255,n<0?0:n},e.LinearBurn=function(e,t){var n=e+t-255;return n<0?0:n},e.DarkerColor=function(e,t){var n=(e.R<<16|e.G<<8|e.B)>(t.R<<16|t.G<<8|t.B)?b:a;return(Math.min(e.A+t.A,255)<<24|n.R<<16|n.G<<8|n.B)>>>0},e.Lighter=function(e,t){var n=e.A/255,r=e.G,i=e.B,s=t.A/255,o=t.R,u=t.G,a=t.B,f=s*255,o=Math.max(o,e.R*n+o*s),r=Math.max(u,r*n+u*s),n=Math.max(a,i*n+a*s);return o>255&&(o=255),r>255&&(r=255),n>255&&(n=255),(f<<24|o<<16|r<<8|n)>>>0},e.Darker=function(e,t){var n=e.A/255,r=e.R/255,i=e.G/255,s=e.B/255,o=t.A/255,u=t.R/255,a=t.G/255,f=t.B/255,l=n+o-n*o,r=Math.min(255,(r*(1-o)+u*(1-n)+Math.min(r,u))*255),i=Math.min(255,(i*(1-o)+a*(1-n)+Math.min(i,a))*255),n=Math.min(255,(s*(1-o)+f*(1-n)+Math.min(s,f))*255);return(l<<24|r<<16|i<<8|n)>>>0},e.Lighten=function(e,t){return e>t?e:t},e.Screen=function(e,t){return 255-((255-e)*(255-t)>>8)},e.ColorDodge=function(e,t){if(t==255)return 255;var n=(e<<8)/(255-t);return n>255?255:n},e.ColorDodgeInverse=function(e,t){if(e==255)return 255;var n=(t<<8)/(255-e);return n>255?255:n>>0},e.SoftDodge=function(e,t){if(e+t<256){if(t==255)return 255;var n=(e<<7)/(t^255);return n>255?255:n}return n=((t^255)<<7)/e^255,n<0?0:n},e.LinearDodge=function(e,t){var n=e+t;return n>255?255:n},e.LighterColor=function(e,t){var n=(e.R<<16|e.G<<8|e.B)<(t.R<<16|t.G<<8|t.B)?b:a;return(Math.min(e.A+t.A,255)<<24|n.R<<16|n.G<<8|n.B)>>>0},e.Overlay=function(e,t){return e<128?e*t>>7:255-((255-e)*(255-t)>>7)},e.SoftLight=function(e,t){return Math.pow(e/255,1/(t/170+.5))*255},e.FuzzyLight=function(e,t){var n=e*t/255;return n+e*(255-(e^255)*(t^255)/255-n)/255},e.HardLight=function(e,t){return t<128?t*e>>7:255-((255-t)*(255-e)>>7)},e.VividLight=function(e,t){return t<128?255-Math.min(255,(255-e)*255/(2*t)):Math.min(255,e*255/(2*(255-t)))},e.LinearLight=function(e,t){return Math.min(255,Math.max(0,e+2*t-255))},e.PinLight=function(e,t){return t>128?Math.max(e,2*(t-128)):Math.min(e,2*t)},e.HardMix=function(e,t){return e<255-t?0:255},e.GrainExtract=function(e,t){return Math.min(255,Math.max(0,e-t+128))},e.GrainMerge=function(e,t){return Math.min(255,Math.max(0,e+t-128))},e.Difference=function(e,t){var n=e-t;return n<0?-n:n},e.Exclusion=function(e,t){return e+t-(e*t>>7)},e.Negation=function(e,t){var n=255-e-t;return(n<0?-n:n)^255},e.Invert=function(e){return e^255},e.Tint=function(e,t){var n=t.R*.3+t.G*.59+t.B*.11;return(Math.min(e.A+t.A,255)<<24|Math.min(255,(e.R+n)*.5+t.R*.5)<<16|Math.min(255,(e.G+n)*.5+t.G*.5)<<8|Math.min(255,(e.B+n)*.5+t.B*.5))>>>0},e.Red=function(e,t){return(Math.min(e.A+t.A,255)<<24|t.R<<16|e.G<<8|e.B)>>>0},e.Green=function(e,t){return(Math.min(e.A+t.A,255)<<24|e.R<<16|t.G<<8|e.B)>>>0},e.Blue=function(e,t){return(Math.min(e.A+t.A,255)<<24|e.R<<16|e.G<<8|t.B)>>>0},function(){var t={0:"R",1:"G",2:"B"},n=function(e,n,r,i){var s=0,o=1,u=2;return e>n&&(e^=n,n^=e,e^=n,s^=o,o^=s,s^=o),e>r&&(e^=r,r^=e,e^=r,s^=u,u^=s,s^=u),n>r&&(n^=r,r^=n,n^=r,o^=u,u^=o,o^=u),r>e?(n=(n-e)*i/(r-e),r=i):n=r=0,e={},e[t[s]]=0,e[t[o]]=n,e[t[u]]=r,e},r=function(e,t,n){return.3*e+.59*t+.11*n},i=function(e,t,n,i){typeof e=="object"&&(i=t,n=e.B,t=e.G,e=e.R),i-=r(e,t,n),e+=i,t+=i,n+=i;var i=r(e,t,n),s=Math.min(e,t,n),o=Math.max(e,t,n);return s<0&&(e=i+(e-i)*i/(i-s),t=i+(t-i)*i/(i-s),n=i+(n-i)*i/(i-s)),o>255&&(e=i+(e-i)*(255-i)/(o-i),t=i+(t-i)*(255-i)/(o-i),n=i+(n-i)*(255-i)/(o-i)),e<<16|t<<8|n};e.Hue=function(e,t){var s=Math.max(e.R,e.G,e.B)-Math.min(e.R,e.G,e.B),o=Math.min(e.A+t.A,255),s=i(n(t.R,t.G,t.B,s),r(e.R,e.G,e.B));return(o<<24|s)>>>0},e.Saturation=function(e,t){var s=Math.max(t.R,t.G,t.B)-Math.min(t.R,t.G,t.B),o=Math.min(e.A+t.A,255),s=i(n(e.R,e.G,e.B,s),r(e.R,e.G,e.B));return(o<<24|s)>>>0},e.Color=function(e,t){var n=Math.min(e.A+t.A,255),s=i(t.R,t.G,t.B,r(e.R,e.G,e.B));return(n<<24|s)>>>0},e.Luminosity=function(e,t){var n=Math.min(e.A+t.A,255),s=i(e.R,e.G,e.B,r(t.R,t.G,t.B));return(n<<24|s)>>>0}}(),e.Reflect=function(e,t){if(t==255)return 255;var n=e*e/(255-t);return n>255?255:n},e.Glow=function(e,t){if(e==255)return 255;var n=t*t/(255-e);return n>255?255:n},e.Freeze=function(e,t){if(t==0)return 0;var n=255-Math.pow(e^255,2)/t;return n<0?0:n},e.Heat=function(e,t){if(e==0)return 0;var n=255-Math.pow(t^255,2)/e;return n<0?0:n},e.Additive=function(e,t){var n=e+t;return n>255?255:n},e.Subtractive=function(e,t){var n=e+t-256;return n<0?0:n},e.Subtract=function(e,t){var n=e-t;return n<0?0:n},e.Stamp=function(e,t){var n=e+2*t-256;return n<0?0:n>255?255:n},function(){for(var t=[],n=Math.PI/255,r=0;r<256;r++)t[r]=Math.round(64-Math.cos(r*n)*64);e.Interpolation=function(e,n){var r=t[n]+t[e];return r>255?255:r}}(),e.Divide=function(e,t){return Math.min(255,e*256/(t+1))},e.XOR=function(e,t){return e^t},e.AND=function(e,t){return e&t},e.OR=function(e,t){return e|t},e.createKernals=function(){var t={},n;for(n in e.modes)for(var r in e.modes[n])t[e.modes[n][r]]=!0;r=[];for(n in t){var i=String(e[n.replaceAll(" ","")]),s=i.indexOf("function (A, B)")==-1,i=i.substr(i.indexOf("{")+1),i=i.substr(0,i.lastIndexOf("}")),i=i.replace("//+","");if(s)i=i.replaceAll("src.A","sA"),i=i.replaceAll("src.R","sR"),i=i.replaceAll("src.G","sG"),i=i.replaceAll("src.B","sB"),i=i.replaceAll("dst.A","dA"),i=i.replaceAll("dst.R","dR"),i=i.replaceAll("dst.G","dG"),i=i.replaceAll("dst.B","dB"),i=i.replaceAll("return ","var hex = "),r.push("Color.Blend['_"+n.replaceAll(" ","")+"'] = function(src, dst, preserveAlpha) {	var data1 = src.data, data2 = dst.data;	var length = data1.length;	for (var n = 0; n < length; n += 4) {		var sR = data1[n], sG = data1[n+1], sB = data1[n+2], sA = data1[n+3];		var dR = data2[n], dG = data2[n+1], dB = data2[n+2], dA = data2[n+3];"+i+"		if (sA > 0) {			data2[n] = hex >>> 16 & 0xFF;			data2[n + 1] = hex >>> 8 & 0xFF;			data2[n + 2] = hex & 0xFF;			if (!preserveAlpha) data2[n + 3] = hex >>> 24;		} else {			data2[n] = dR;			data2[n + 1] = dG;			data2[n + 2] = dB;			data2[n + 3] = dA;		}	}return dst;};");else{var s=i.replaceAll("B","dR"),s=s.replaceAll("A","sR"),s=s.replaceAll("return ","data2[n] = "),o=i.replaceAll("B","dG"),o=o.replaceAll("A","sG"),o=o.replaceAll("return ","data2[n + 1] = "),i=i.replaceAll("B","dB"),i=i.replaceAll("A","sB"),i=i.replaceAll("return ","data2[n + 2] = ");r.push("Color.Blend['_"+n.replaceAll(" ","")+"'] = function(src, dst) {	var data1 = src.data, data2 = dst.data;	var length = data1.length;	for (var n = 0; n < length; n += 4) {		var sR = data1[n], sG = data1[n+1], sB = data1[n+2], sA = data1[n+3];		var dR = data2[n], dG = data2[n+1], dB = data2[n+2], dA = data2[n+3];		if (sA > 0) {"+s+o+i+"			data2[n + 3] = sA;		} else {			data2[n] = dR;			data2[n + 1] = dG;			data2[n + 2] = dB;			data2[n + 3] = dA;		}	}return dst;};")}}console.log(r.join("\r"))},e}(Color.Blend);var Gradient=function(e){return e.getNoise=function(e){for(var t=new Random,n=e.dna,r=e.resolution,i=e.length,s=Color.Blend.isAlphaRequired[e.blend],o=Color.Blend[e.blend],u=e.H,a=e.S,e=e.L,f=[],l=0;l<n.length;l+=2)f.push({hex:n[l+1],stop:n[l]});for(var n=0,l=Color.Space.HEX32_RGBA(f[n].hex),c=f[n].stop,h=Color.Space.HEX32_RGBA(f[n+1].hex),p=f[n+1].stop,d=[],v=0;v<=i;v+=r){var m=v/i;m>p&&(n++,f[n]&&(l=h,c=p,f[n+1]))&&(h=Color.Space.HEX32_RGBA(f[n+1].hex),p=f[n+1].stop),m=(m-c)/(p-c),m===Infinity&&(m=0);if(o==="Normal"&&H===0&&S===0&&L===0)m=Color.Space.RGB_W3({R:l.R*(1-m)+h.R*m,G:l.G*(1-m)+h.G*m,B:l.B*(1-m)+h.B*m});else{var g=Color.Space.RGB_HSL({R:l.R*(1-m)+h.R*m,G:l.G*(1-m)+h.G*m,B:l.B*(1-m)+h.B*m}),m=Color.Space.HSLA_RGBA({H:(g.H+t.toDouble()*u+360)%360,S:Math.min(100,Math.max(0,g.S-t.toDouble()*a)),L:Math.min(100,Math.max(0,g.L-t.toDouble()*e)),A:255}),g=Color.Space.HSLA_RGBA({H:(g.H+t.toDouble()*u+360)%360,S:Math.min(100,Math.max(0,g.S+t.toDouble()*a)),L:Math.min(100,Math.max(0,g.L+t.toDouble()*e)),A:255});s?(m=o(m,g),m=Color.Space(m,"HEX32>RGBA>W3")):m=Color.Space.RGBA_W3({R:o(m.R,g.R),G:o(m.G,g.G),B:o(m.B,g.B),A:o(m.A,g.A)})}d.push(v/i),d.push(m)}return d},e}({});if(typeof Color=="undefined")var Color={};(function(){Color.Picker=function(r){var i=this;typeof r=="undefined"&&(r={}),this.callback=r.callback,r.color[0]==="#"?(this.color=Color.Space(r.color.substr(1),"STRING>HEX>RGB>HSV"),this.color.A=255):r.color.substr(0,4)==="rgba"&&(this.color=Color.Space(r.color,"W3>RGBA>HSVA")),this.eyedropLayer=r.eyedropLayer,this.eyedropMouseLayer=r.eyedropMouseLayer||r.eyedropLayer,this.container=r.container||document.body,this.size=r.size||200,this.margin=r.margin||10,this.offset=this.margin/2,this.hueWidth=r.hueWidth||38,this.doAlpha=r.doAlpha||!1;var s=document.createElement("div");s.id="ColorPicker";var o=this.size+this.hueWidth*(this.doAlpha?2:1)+this.margin-6;s.style.height=this.size+this.margin*2+"px",s.style.width=o+"px",s.style.display=r.display?"block":"none",this.container.appendChild(s),this.element=s,o=document.createElement("div"),o.style.backgroundImage="url("+n.data+")",o.className="hexBox",o.title="Eyedropper",i.eyedropMouseLayer&&(Event.add(o,"mousedown",Event.cancel),Event.add(o,"click",function(){document.body.style.cursor="crosshair";var e=function(t){document.body.style.cursor="pointer",t=Event.coords(t),t=i.eyedropLayer.getContext("2d").getImageData(t.x,t.y,1,1),t=Color.Space(t.data,"RGBA>HSVA"),i.update(t,"HSVA"),Event.remove(i.eyedropMouseLayer,"mousedown",e)};Event.add(i.eyedropMouseLayer,"mousedown",e)}));var u=document.createElement("div");o.appendChild(u),s.appendChild(o);var a=/[^a-f0-9]/gi,f=document.createElement("input");f.title="HEX Code",f.className="hexInput",f.size=6,f.type="text",Event.add(f,"mousedown",Event.stopPropagation),Event.add(f,"keydown change",
function(e){var t=e.keyCode,n=f.value.replace(a,"").substr(0,6),n=parseInt("0x"+n);if(e.type=="keydown")if(t==40)n=Math.max(0,n-(e.shiftKey?10:1)),f.value=Color.Space(n,"HEX>STRING");else{if(t!=38)return;n=Math.min(16777215,n+(e.shiftKey?10:1)),f.value=Color.Space(n,"HEX>STRING")}String(n)!=="NaN"&&(n>16777215&&(n=16777215),n<0&&(n=0),i.update(Color.Space(n,"HEX>RGB"),"RGB"),e.keyCode==27&&this.blur())}),s.appendChild(f),o=document.createElement("div"),o.title="Close",o.className="hexClose",o.innerHTML="x",Event.add(o,"mousedown",Event.cancel),Event.add(o,"click",function(){i.toggle(!1)}),s.appendChild(o),s.appendChild(document.createElement("br"));var l=document.createElement("canvas"),p=l.getContext("2d");return l.style.cssText="position: absolute; top: 32px; left: "+this.offset+"px;",l.width=this.size+this.hueWidth*2+this.margin+2,l.height=this.size+this.margin,s.appendChild(l),o=function(e){var t=e.type==="mousedown"||e.type==="touchstart";t&&(Event.stop(e),f.blur());var n=i.margin/2,r=0,o=0;if(window!==l)for(var u=l;u!==null;)r+=u.offsetLeft,o+=u.offsetTop,u=u.offsetParent;r=(e.touches?e.touches[0].pageX:e.pageX)-r-n,n=(e.touches?e.touches[0].pageY:e.pageY)-o-n,o=r<0?0:r>l.width?l.width:r,u=n<0?0:n>i.size?i.size:n;if(e.target.className!=="hexInput")return o!==r||u!==n?(s.style.cursor="move",s.title="Move",t&&Event.proxy.drag({position:"move",event:e,target:s,listener:function(e,t){s.style.left=t.x+"px",s.style.top=t.y+"px",Event.prevent(e)}})):o<=i.size?(s.style.cursor="crosshair",s.title="Saturation + Value",t&&Event.proxy.drag({position:"relative",event:e,target:l,listener:function(e,t){var n=t.y-i.offset<0?0:t.y-i.offset>i.size?i.size:t.y-i.offset;i.color.S=(t.x-i.offset<0?0:t.x-i.offset>i.size?i.size:t.x-i.offset)/i.size*100,i.color.V=100-n/i.size*100,i.drawSample(t.state,!0),Event.prevent(e)}})):o>i.size+i.margin&&o<=i.size+i.hueWidth?(s.style.cursor="crosshair",s.title="Hue",t&&Event.proxy.drag({position:"relative",event:e,target:l,listener:function(e,t){i.color.H=360-Math.min(1,(t.y-i.offset<0?0:t.y-i.offset>i.size?i.size:t.y-i.offset)/i.size)*360,i.drawSample(t.state,!0),Event.prevent(e)}})):o>i.size+i.hueWidth+i.margin&&o<=i.size+i.hueWidth*2?(s.style.cursor="crosshair",s.title="Alpha",t&&Event.proxy.drag({position:"relative",event:e,target:l,listener:function(e,t){i.color.A=(1-Math.min(1,(t.y-i.offset<0?0:t.y-i.offset>i.size?i.size:t.y-i.offset)/i.size))*255,i.drawSample(t.state,!0),Event.prevent(e)}})):s.style.cursor="default",!1;s.style.cursor="text"},Event.add(s,"mousemove",o),Event.add(s,"mousedown",o),this.update=function(e){typeof e=="string"?i.color=Color.Space(e,"STRING>HEX>RGB>HSV"):typeof e.R!="undefined"?i.color=Color.Space(e,"RGB>HSV"):typeof e.H!="undefined"&&(i.color=e),typeof e.A=="undefined"&&(i.color.A=255),i.drawSample("update",!0)},this.drawSample=function(n,r){p.clearRect(0,0,l.width,l.height),i.drawSquare(),i.drawHue(),this.doAlpha&&i.drawAlpha();var s=Color.Space(i.color,"HSVA>RGBA"),o=Color.Space(s,"RGB>HEX>STRING");f.value=o.toUpperCase(),u.style.backgroundColor=Color.Space(s,"RGBA>W3"),o=(360-i.color.H)/362*i.size-2,p.drawImage(e,i.size+i.hueWidth+i.offset+2,Math.round(o)+i.offset-1),this.doAlpha&&(o=(255-i.color.A)/255*i.size-2,p.drawImage(e,i.size+i.hueWidth*2+i.offset+2,Math.round(o)+i.offset-1));var a=i.color.S/100*i.size,o=(1-i.color.V/100)*i.size;a-=t.width/2,o-=t.height/2,p.drawImage(t,Math.round(a)+i.offset,Math.round(o)+i.offset),i.callback&&n&&r&&i.callback(s,n)},this.drawSquare=function(){var e=Color.Space({H:i.color.H,S:100,V:100},"HSV>RGB>HEX>STRING");Color.Space.HEX_RGB("0x"+e);var t=i.offset,n=i.size;p.fillStyle="#"+e,p.fillRect(t,t,n,n),e=p.createLinearGradient(t,t,n+t,0),e.addColorStop(0,"rgba(255, 255, 255, 1)"),e.addColorStop(1,"rgba(255, 255, 255, 0)"),p.fillStyle=e,p.fillRect(t,t,n,n),e=p.createLinearGradient(0,t,0,n+t),e.addColorStop(0,"rgba(0, 0, 0, 0)"),e.addColorStop(1,"rgba(0, 0, 0, 1)"),p.fillStyle=e,p.fillRect(t,t,n,n),p.strokeStyle="rgba(255,255,255,0.15)",p.strokeRect(t+.5,t+.5,n-1,n-1)},this.drawHue=function(){var e=i.size+i.margin+i.offset,t=p.createLinearGradient(0,0,0,i.size+i.offset);t.addColorStop(0,"rgba(255, 0, 0, 1)"),t.addColorStop(5/6,"rgba(255, 255, 0, 1)"),t.addColorStop(4/6,"rgba(0, 255, 0, 1)"),t.addColorStop(.5,"rgba(0, 255, 255, 1)"),t.addColorStop(2/6,"rgba(0, 0, 255, 1)"),t.addColorStop(1/6,"rgba(255, 0, 255, 1)"),t.addColorStop(1,"rgba(255, 0, 0, 1)"),p.fillStyle=t,p.fillRect(e,i.offset,i.hueWidth-10,i.size),p.strokeStyle="rgba(255,255,255,0.2)",p.strokeRect(e+.5,i.offset+.5,i.hueWidth-11,i.size-1)},this.drawAlpha=function(){var e=i.size+i.margin+i.offset+i.hueWidth;p.fillStyle=n,p.fillRect(e,i.offset,i.hueWidth-10,i.size);var t=Color.Space.HSV_RGB({H:i.color.H,S:i.color.S,V:i.color.V}),r=p.createLinearGradient(0,0,0,i.size);t.A=255,r.addColorStop(0,Color.Space.RGBA_W3(t)),t.A=0,r.addColorStop(1,Color.Space.RGBA_W3(t)),p.fillStyle=r,p.fillRect(e,i.offset,i.hueWidth-10,i.size),p.strokeStyle="rgba(255,255,255,0.2)",p.strokeRect(e+.5,i.offset+.5,i.hueWidth-11,i.size-1)},this.toggle=function(e){typeof e!="boolean"&&(e=s.style.display==="block"?!1:!0),e?(s.style.opacity=1,s.style.display="block"):(s.style.opacity=0,s.style.display="none");if(e&&r.autoclose){var t=function(){Event.remove(window,"mousedown",t),i.toggle(!1)};Event.add(window,"mousedown",t)}},this.destory=function(){document.body.removeChild(s);for(var e in i)delete i[e]},this.drawSample("create"),this};var e=function(){var e=document.createElement("canvas"),t=e.getContext("2d"),n=16/3;e.width=16,e.height=16;for(var r=0;r<20;r++)t.beginPath(),t.fillStyle="#fff",t.moveTo(0,4),t.lineTo(4,0),t.lineTo(4,8),t.fill();return t.translate(-n,-16),e}(),t=function(){var e=document.createElement("canvas");e.width=10,e.height=10;var t=e.getContext("2d");t.lineWidth=1,t.beginPath();var n=e.width/2,r=e.width/2;return t.arc(n,r,4.5,0,Math.PI*2,!0),t.strokeStyle="#000",t.stroke(),t.beginPath(),t.arc(n,r,3.5,0,Math.PI*2,!0),t.strokeStyle="#FFF",t.stroke(),e}(),n=function(e,t,n){var r=document.createElement("canvas").getContext("2d");return r.canvas.width=e*2,r.canvas.height=e*2,r.fillStyle=t,r.fillRect(0,0,e,e),r.fillStyle=n,r.fillRect(e,0,e,e),r.fillStyle=n,r.fillRect(0,e,e,e),r.fillStyle=t,r.fillRect(e,e,e,e),e=r.createPattern(r.canvas,"repeat"),e.data=r.canvas.toDataURL(),e}(8,"#FFF","#eee")})(),typeof Color=="undefined"&&(Color={}),typeof Color.Space=="undefined"&&(Color.Space={}),function(){var h=Math.PI/180,c=1/h,e={},f={"RGB>STRING":"RGB>HEX>STRING","STRING>RGB":"STRING>HEX>RGB"},g=Color.Space=function(d,c){f[c]&&(c=f[c]);var j=c.split(">");if(typeof d=="object"&&d[0]>=0){for(var i=c.split(">")[0],k={},l=0;l<i.length;l++){var h=i.substr(l,1);k[h]=d[l]}d=k}if(e[c])return e[c](d);i="color",k=1;for(l=j[0];k<j.length;k++)k>1&&(l=l.substr(l.indexOf("_")+1)),l+=(k===0?"":"_")+j[k],d=g[l](d),i="Color.Space."+l+"("+i+")";return e[c]=eval("(function(color) { return "+i+" })"),d};g.RGB_W3=function(e){return"rgb("+(e.R>>0)+","+(e.G>>0)+","+(e.B>>0)+")"},g.RGBA_W3=function(e){return"rgba("+(e.R>>0)+","+(e.G>>0)+","+(e.B>>0)+","+(typeof e.A=="number"?e.A/255:1)+")"},g.W3_RGB=function(e){return e=e.substr(4,e.length-5).split(","),{R:parseInt(e[0]),G:parseInt(e[1]),B:parseInt(e[2])}},g.W3_RGBA=function(e){return e=e.substr(5,e.length-6).split(","),{R:parseInt(e[0]),G:parseInt(e[1]),B:parseInt(e[2]),A:parseFloat(e[3])*255}},g.HSL_W3=function(e){return"hsl("+(e.H+.5>>0)+","+(e.S+.5>>0)+"%,"+(e.L+.5>>0)+"%)"},g.HSLA_W3=function(e){return"hsla("+(e.H+.5>>0)+","+(e.S+.5>>0)+"%,"+(e.L+.5>>0)+"%,"+(typeof e.A=="number"?e.A/255:1)+")"},g.W3_HSL=function(e){return e=e.substr(4,e.length-5).split(","),{H:parseInt(e[0]),S:parseInt(e[1]),L:parseInt(e[2])}},g.W3_HSL=function(e){return e=e.substr(5,e.length-6).split(","),{H:parseInt(e[0]),S:parseInt(e[1]),L:parseInt(e[2]),A:parseFloat(e[3])*255}},g.RYB_Hue=function(e){var t=Math.floor(e),n=t>0?e%t:0,t=d[t%360],e=d[Math.ceil(e)%360];return t+(e-t)*n},g.Hue_RYB=function(e){var t=Math.floor(e),n=t>0?e%t:0,t=j[t%360],e=j[Math.ceil(e)%360];return t+(e-t)*n},g.STRING_HEX=function(e){return parseInt("0x"+e)},g.STRING_HEX32=function(e){return e.length===6?parseInt("0xFF"+e):parseInt("0x"+e)},g.HEX_STRING=g.HEX32_W3=function(e,t){t||(t=6),e||(e=0);for(var n=e.toString(16),r=n.length;r<t;)n="0"+n,r++;for(r=n.length;r>t;)n=n.substr(1),r--;return n},g.HEX32_STRING=function(e){return g.HEX_W3(e,8)},g.HEX_RGB=function(e){return{R:e>>16,G:e>>8&255,B:e&255}},g.HEX32_RGBA=function(e){return{R:e>>>16&255,G:e>>>8&255,B:e&255,A:e>>>24}},g.RGBA_HEX32=function(e){return(e.A<<24|e.R<<16|e.G<<8|e.B)>>>0},g.RGB_HEX=function(e){return e.R<0&&(e.R=0),e.G<0&&(e.G=0),e.B<0&&(e.B=0),e.R>255&&(e.R=255),e.G>255&&(e.G=255),e.B>255&&(e.B=255),e.R<<16|e.G<<8|e.B},g.RGB_CMY=function(e){return{C:1-e.R/255,M:1-e.G/255,Y:1-e.B/255}},g.RGBA_HSLA=g.RGB_HSL=function(e){var t=e.R/255,n=e.G/255,r=e.B/255,i=Math.min(t,n,r),s=Math.max(t,n,r),o=s-i,u,a=(s+i)/2;if(o===0)i=u=0;else{var i=a<.5?o/(s+i):o/(2-s-i),f=((s-t)/6+o/2)/o,l=((s-n)/6+o/2)/o,o=((s-r)/6+o/2)/o;t===s?u=o-l:n===s?u=1/3+f-o:r===s&&(u=2/3+l-f),u<0&&(u+=1),u>1&&(u-=1)}return{H:u*360,S:i*100,L:a*100,A:e.A}},g.RGBA_HSVA=g.RGB_HSV=function(e){var t=e.R/255,n=e.G/255,r=e.B/255,i=Math.min(t,n,r),s=Math.max(t,n,r),o=s-i,u;if(o===0)i=u=0;else{var i=o/s,a=((s-t)/6+o/2)/o,f=((s-n)/6+o/2)/o,o=((s-r)/6+o/2)/o;t===s?u=o-f:n===s?u=1/3+a-o:r===s&&(u=2/3+f-a),u<0&&(u+=1),u>1&&(u-=1)}return{H:u*360,S:i*100,V:s*100,A:e.A}},g.RGB_XYZ=function(e){g.RGB_XYZ_Matrix||g.getProfile("sRGB");var t=g.RGB_XYZ_Matrix,n={},r=e.R/255,i=e.G/255,e=e.B/255;return g.Profile==="sRGB"?(r=r>.04045?Math.pow((r+.055)/1.055,2.4):r/12.92,i=i>.04045?Math.pow((i+.055)/1.055,2.4):i/12.92,e=e>.04045?Math.pow((e+.055)/1.055,2.4):e/12.92):(r=Math.pow(r,g.Gamma),i=Math.pow(i,g.Gamma),e=Math.pow(e,g.Gamma)),n.X=r*t[0]+i*t[3]+e*t[6],n.Y=r*t[1]+i*t[4]+e*t[7],n.Z=r*t[2]+i*t[5]+e*t[8],n},g.CMY_RGB=function(e){return{R:Math.max(0,(1-e.C)*255),G:Math.max(0,(1-e.M)*255),B:Math.max(0,(1-e.Y)*255)}},g.CMY_CMYK=function(e){var t=e.C,n=e.M,e=e.Y,r=Math.min(e,Math.min(n,Math.min(t,1))),t=Math.round((t-r)/(1-r)*100),n=Math.round((n-r)/(1-r)*100),e=Math.round((e-r)/(1-r)*100),r=Math.round(r*100);return{C:t,M:n,Y:e,K:r}},g.CMYK_CMY=function(e){return{C:e.C*(1-e.K)+e.K,M:e.M*(1-e.K)+e.K,Y:e.Y*(1-e.K)+e.K}},g.HSLA_RGBA=g.HSL_RGB=function(e){var t=e.H/360,n=e.S/100,r=e.L/100,i,s,o;return n===0?r=n=t=r:(s=r<.5?r*(1+n):r+n-n*r,i=2*r-s,o=t+1/3,o<0&&(o+=1),o>1&&(o-=1),r=6*o<1?i+(s-i)*6*o:2*o<1?s:3*o<2?i+(s-i)*(2/3-o)*6:i,o=t,o<0&&(o+=1),o>1&&(o-=1),n=6*o<1?i+(s-i)*6*o:2*o<1?s:3*o<2?i+(s-i)*(2/3-o)*6:i,o=t-1/3,o<0&&(o+=1),o>1&&(o-=1),t=6*o<1?i+(s-i)*6*o:2*o<1?s:3*o<2?i+(s-i)*(2/3-o)*6:i),{R:r*255,G:n*255,B:t*255,A:e.A}},g.HSVA_RGBA=g.HSV_RGB=function(e){var t=e.H/360,n=e.S/100,r=e.V/100,i,s,o;if(n===0)i=s=o=Math.round(r*255);else switch(t>=1&&(t=0),t*=6,D=t-Math.floor(t),A=Math.round(255*r*(1-n)),o=Math.round(255*r*(1-n*D)),C=Math.round(255*r*(1-n*(1-D))),r=Math.round(255*r),Math.floor(t)){case 0:i=r,s=C,o=A;break;case 1:i=o,s=r,o=A;break;case 2:i=A,s=r,o=C;break;case 3:i=A,s=o,o=r;break;case 4:i=C,s=A,o=r;break;case 5:i=r,s=A}return{R:i,G:s,B:o,A:e.A}},g.XYZ_RGB=function(e){g.XYZ_RGB_Matrix||g.getProfile("sRGB");var t=g.XYZ_RGB_Matrix,n,r;return n=e.X*t[0]+e.Y*t[3]+e.Z*t[6],r=e.X*t[1]+e.Y*t[4]+e.Z*t[7],e=e.X*t[2]+e.Y*t[5]+e.Z*t[8],g.Profile==="sRGB"?(n=n>.0031308?1.055*Math.pow(n,1/2.4)-.055:12.92*n,r=r>.0031308?1.055*Math.pow(r,1/2.4)-.055:12.92*r,e=e>.0031308?1.055*Math.pow(e,1/2.4)-.055:12.92*e):(n=Math.pow(n,1/g.Gamma),r=Math.pow(r,1/g.Gamma),e=Math.pow(e,1/g.Gamma)),{R:Math.round(n*255),G:Math.round(r*255),B:Math.round(e*255)}},g.XYZ_xyY=function(e){var t=e.X+e.Y+e.Z;return t===0?{x:0,y:0,Y:e.Y}:{x:e.X/t,y:e.Y/t,Y:e.Y}},g.XYZ_HLab=function(e){var t=Math.sqrt(e.Y);return{L:10*t,a:17.5*((1.02*e.X-e.Y)/t),b:7*((e.Y-.847*e.Z)/t)}},g.XYZ_Lab=function(e){var t=e.X/g.WPScreen.X,n=e.Y/g.WPScreen.Y,e=e.Z/g.WPScreen.Z,t=t>.008856?Math.pow(t,1/3):7.787*t+16/116,n=n>.008856?Math.pow(n,1/3):7.787*n+16/116,e=e>.008856?Math.pow(e,1/3):7.787*e+16/116;return{L:116*n-16,a:500*(t-n),b:200*(n-e)}},g.XYZ_Luv=function(e){var t=g.WPScreen,n=4*e.X/(e.X+15*e.Y+3*e.Z),r=9*e.Y/(e.X+15*e.Y+3*e.Z);return e.Y=e.Y>.008856?Math.pow(e.Y,1/3):7.787*e.Y+16/116,e=116*e.Y-16,{L:e,u:13*e*(n-4*t.X/(t.X+15*t.Y+3*t.Z))||0,v:13*e*(r-9*t.Y/(t.X+15*t.Y+3*t.Z))||0}},g.xyY_XYZ=function(e){return{X:e.x*e.Y/e.y,Y:e.Y,Z:(1-e.x-e.y)*e.Y/e.y}},g.HLab_XYZ=function(e){var t=e.a/17.5*(e.L/10),n=e.b/7*(e.L/10),e=Math.pow(e.L/10,2);return{X:(t+e)/1.02,Y:e,Z:-(n-e)/.847}},g.Lab_XYZ=function(e){var t=g.WPScreen,n=(e.L+16)/116,r=e.a/500+n,e=n-e.b/200,n=Math.pow(n,3)>.008856?Math.pow(n,3):(n-16/116)/7.787,r=Math.pow(r,3)>.008856?Math.pow(r,3):(r-16/116)/7.787,e=Math.pow(e,3)>.008856?Math.pow(e,3):(e-16/116)/7.787;return{X:t.X*r,Y:t.Y*n,Z:t.Z*e}},g.Lab_LCHab=function(e){var t=Math.atan2(e.b,e.a)*c;return t<0?t+=360:t>360&&(t-=360),{L:e.L,C:Math.sqrt(e.a*e.a+e.b*e.b),H:t}},g.Luv_XYZ=function(e){var t=g.WPScreen,n=(e.L+16)/116,n=Math.pow(n,3)>.008856?Math.pow(n,3):(n-16/116)/7.787,r=e.u/(13*e.L)+4*t.X/(t.X+15*t.Y+3*t.Z),e=e.v/(13*e.L)+9*t.Y/(t.X+15*t.Y+3*t.Z),r=-(9*n*r)/((r-4)*e-r*e);return{X:r,Y:n,Z:(9*n-15*e*n-e*r)/(3*e)}},g.Luv_LCHuv=function(e){var t=Math.atan2(e.v,e.u)*c;return t<0?t+=360:t>360&&(t-=360),{L:e.L,C:Math.sqrt(e.u*e.u+e.v*e.v),H:t}},g.LCHab_Lab=function(e){var t=e.H*h;return{L:e.L,a:Math.cos(t)*e.C,b:Math.sin(t)*e.C}},g.LCHuv_Luv=function(e){var t=e.H*h;return{L:e.L,u:Math.cos(t)*e.C,v:Math.sin(t)*e.C}},g.RGB_HSI=function(e){var t=e.R,n=e.G,e=e.B,r=.5*(2*t-n-e),i=Math.sqrt(3)*(n-e);return I=(t+n+e)/3,I>0?(S=1-Math.min(t,n,e)/I,H=Math.atan2(i,r)*c,H<0&&(H+=360)):H=S=0,{H:H,S:S*100,I:I}},g.HSI_RGB=function(e){var t=e.H,n=e.S/100,e=e.I,r,i,s;return t-=360*Math.floor(t/360),t<120?(s=e*(1-n),r=e*(1+n*Math.cos(t*h)/Math.cos((60-t)*h)),i=3*e-r-s):t<240?(t-=120,r=e*(1-n),i=e*(1+n*Math.cos(t*h)/Math.cos((60-t)*h)),s=3*e-r-i):(t-=240,i=e*(1-n),s=e*(1+n*Math.cos(t*h)/Math.cos((60-t)*h)),r=3*e-i-s),{R:r,G:i,B:s}},g.getAdaption=function(e,t){var n={"XYZ scaling":{A:[[1,0,0],[0,1,0],[0,0,1]],Z:[[1,0,0],[0,1,0],[0,0,1]]},"Von Kries":{A:[[.40024,-0.2263,0],[.7076,1.16532,0],[-0.08081,.0457,.91822]],Z:[[1.859936,.361191,0],[-1.129382,.638812,0],[.219897,-0.000006,1.089064]]},Bradford:{A:[[.8951,.2664,-0.161399],[-0.750199,1.7135,.0367],[.038899,-0.0685,1.0296]],Z:[[.986993,-0.14705399,.15996299],[.43230499,.51836,.0492912],[-0.00852866,.0400428,.96848699]]}},r=g.WPSource,i=g.WPScreen,s=n[t].A,n=n[t].Z,i=m(s,[[i.X],[i.Y],[i.Z]]),r=m(s,[[r.X],[r.Y],[r.Z]]),s=m(n,m([[i[0]/r[0],0,0],[0,i[1]/r[1],0],[0,0,i[2]/r[2]]],m(s,[[e.X],[e.Y],[e.Z]])));return{X:s[0][0],Y:s[1][0],Z:s[2][0]}},g.getProfile=function(e){function t(e){return g.getAdaption(g.xyY_XYZ(e),"Bradford")}var n=i[e];g.Profile=e,g.ICCProfile=n,g.Gamma=n[0],g.WPSource=g.getIlluminant("2",n[1]);var e=t({x:n[2],y:n[3],Y:n[4]}),r=t({x:n[5],y:n[6],Y:n[7]}),n=t({x:n[8],y:n[9],Y:n[10]});g.RGB_XYZ_Matrix=[e.X,e.Y,e.Z,r.X,r.Y,r.Z,n.X,n.Y,n.Z],g.XYZ_RGB_Matrix=l(g.RGB_XYZ_Matrix)},g.getIlluminant=function(e,t){var n=k[t],n=e==="2"?{x:n[0],y:n[1],Y:1}:{x:n[2],y:n[3],Y:1};return g.xyY_XYZ(n)};var d=[],j=[];(function(){for(var e=[[0,0],[15,8],[30,17],[45,26],[60,34],[75,41],[90,48],[105,54],[120,60],[135,81],[150,103],[165,123],[180,138],[195,155],[210,171],[225,187],[240,204],[255,219],[270,234],[285,251],[300,267],[315,282],[330,298],[345,329],[360,0]],t=0;t<360;t++)for(var n=!1,r=!1,i=0;i<24;i++){var s=e[i],o=e[i+1];o&&o[1]<s[1]&&(o[1]+=360),!n&&s[0]<=t&&o[0]>t&&(j[t]=(s[1]+(o[1]-s[1])*(t-s[0])/(o[0]-s[0]))%360,n=!0),!r&&s[1]<=t&&o[1]>t&&(d[t]=(s[0]+(o[0]-s[0])*(t-s[1])/(o[1]-s[1]))%360,r=!0);if(n===!0&&r===!0)break}})();var i={"Adobe (1998)":[2.2,"D65",.64,.33,.297361,.21,.71,.627355,.15,.06,.075285],"Apple RGB":[1.8,"D65",.625,.34,.244634,.28,.595,.672034,.155,.07,.083332],BestRGB:[2.2,"D50",.7347,.2653,.228457,.215,.775,.737352,.13,.035,.034191],"Beta RGB":[2.2,"D50",.6888,.3112,.303273,.1986,.7551,.663786,.1265,.0352,.032941],"Bruce RGB":[2.2,"D65",.64,.33,.240995,.28,.65,.683554,.15,.06,.075452],"CIE RGB":[2.2,"E",.735,.265,.176204,.274,.717,.812985,.167,.009,.010811],ColorMatch:[1.8,"D50",.63,.34,.274884,.295,.605,.658132,.15,.075,.066985],DonRGB4:[2.2,"D50",.696,.3,.27835,.215,.765,.68797,.13,.035,.03368],eciRGB:[1.8,"D50",.67,.33,.32025,.21,.71,.602071,.14,.08,.077679],"Ekta Space PS5":[2.2,"D50",.695,.305,.260629,.26,.7,.734946,.11,.005,.004425],"Generic RGB":[1.8,"D65",.6295,.3407,.232546,.2949,.6055,.672501,.1551,.0762,.094952],"HDTV (HD-CIF)":[1.95,"D65",.64,.33,.212673,.3,.6,.715152,.15,.06,.072175],NTSC:[2.2,"C",.67,.33,.298839,.21,.71,.586811,.14,.08,.11435],"PAL / SECAM":[2.2,"D65",.64,.33,.222021,.29,.6,.706645,.15,.06,.071334],ProPhoto:[1.8,"D50",.7347,.2653,.28804,.1596,.8404,.711874,.0366,1e-4,86e-6],SGI:[1.47,"D65",.625,.34,.244651,.28,.595,.67203,.155,.07,.083319],"SMPTE-240M":[1.92,"D65",.63,.34,.212413,.31,.595,.701044,.155,.07,.086543],"SMPTE-C":[2.2,"D65",.63,.34,.212395,.31,.595,.701049,.155,.07,.086556],sRGB:[2.2,"D65",.64,.33,.212656,.3,.6,.715158,.15,.06,.072186],"Wide Gamut":[2.2,"D50",.7347,.2653,.258187,.1152,.8264,.724938,.1566,.0177,.016875]},k={A:[.44757,.40745,.45117,.40594,2856],B:[.34842,.35161,.3498,.3527,4874],C:[.31006,.31616,.31039,.31905,6774],D50:[.34567,.3585,.34773,.35952,5003],D55:[.33242,.34743,.33411,.34877,5503],D65:[.31271,.32902,.31382,.331,6504],D75:[.29902,.31485,.29968,.3174,7504],E:[1/3,1/3,1/3,1/3,5454],F1:[.3131,.33727,.31811,.33559,6430],F2:[.37208,.37529,.37925,.36733,4230],F3:[.4091,.3943,.41761,.38324,3450],F4:[.44018,.40329,.4492,.39074,2940],F5:[.31379,.34531,.31975,.34246,6350],F6:[.3779,.38835,.3866,.37847,4150],F7:[.31292,.32933,.31569,.3296,6500],F8:[.34588,.35875,.34902,.35939,5e3],F9:[.37417,.37281,.37829,.37045,4150],F10:[.34609,.35986,.3509,.35444,5e3],F11:[.38052,.37713,.38541,.37123,4e3],F12:[.43695,.40441,.44256,.39717,3e3]};g.Profile="RGB",g.RGB_XYZ_Matrix="",g.XYZ_RGB_Matrix="",g.Gamma="",g.WPScreen=g.getIlluminant("2","D65");var m=function(e,t){var n=e.length,r=n,i,s,o=t[0].length,u,a=e[0].length,f=[],l,c,h;do{i=r-n,f[i]=[],s=o;do{u=o-s,l=0,c=a;do h=a-c,l+=e[i][h]*t[h][u];while(--c);f[i][u]=l}while(--s)}while(--n);return f},l=function(e){var t=1/(e[0]*(e[4]*e[8]-e[5]*e[7])-e[1]*(e[3]*e[8]-e[5]*e[6])+e[2]*(e[3]*e[7]-e[4]*e[6]));return[t*(e[4]*e[8]-e[5]*e[7]),t*-1*(e[1]*e[8]-e[2]*e[7]),t*(e[1]*e[5]-e[2]*e[4]),t*-1*(e[3]*e[8]-e[5]*e[6]),t*(e[0]*e[8]-e[2]*e[6]),t*-1*(e[0]*e[5]-e[2]*e[3]),t*(e[3]*e[7]-e[4]*e[6]),t*-1*(e[0]*e[7]-e[1]*e[6]),t*(e[0]*e[4]-e[1]*e[3])]}}();var Event=function(e){var e=function(e,t,n){var s=this||{};if(typeof e=="string"&&t==="ready"){var l=setInterval(function(){document.getElementsByTagName(e).length&&(clearInterval(l),n())},10);return s}t.indexOf(" ")!==-1&&(t=t.split(" ")),t.indexOf(",")!==-1&&(t=t.split(","));if(typeof t!="string"){s.events={};if(typeof t.length=="number")for(var c=0,h=t.length;c<h;c++){var p=Event(e,t[c],n);p&&(s.events[t[c]]=p)}else for(c in t)(p=Event(e,c,t[c]))&&(s.events[c]=p);return s.remove=function(){var e=s.events,t;for(t in e)e[t].remove();return s},s.add=function(){var e=s.events,t;for(t in e)e[t].add();return s},s}if(typeof n=="function"){var t=r(t),d=t+o(e)+"."+o(n);return i[d]||(i[d]=function(t){return n.call(e,s.event=t,s)}),e[u](t,i[d],!1),s.listener=n,s.add=function(){return e[u](t,i[d],!1),s},s.remove=function(){return e[a](t,i[d],!1),s},s.stop=function(){var e=s.event;return e.stopPropagation&&e.stopPropagation(),e.cancelBubble=!0,s},s.prevent=function(){var e=s.event;return e.preventDefault&&e.preventDefault(),e.returnValue=!1,s},s.cancel=function(){return s.stop().prevent(),s},s}},t=function(s,l,p,d,v){typeof s=="string"&&(s=document.querySelector(s)),l.indexOf&&(l.indexOf(" ")!==-1?l=l.split(" "):l.indexOf(",")!==-1&&(l=l.split(",")));if(typeof l!="string")if(typeof l.length=="number")for(var v=0,m=l.length;v<m;v++)t(s,l[v],p,d);else for(m in l)t(s,m,l[m],d);else if(typeof p=="function"){m=r(l)+o(s)+"."+o(p);if(n[l]){if(d==="remove"){if(!i[m])return;i[m].remove(),delete i[m]}else if(d==="add"){if(i[m])return i[m];v=v||{},v.type=l,v.target=s,v.listener=p,i[m]=e.proxy[l](v)}}else if(d==="remove"){if(!i[m])return;s[a](r(l),i[m].listener,!1),delete i[m]}else if(d==="add"){if(i[m])return i[m];s[u](r(l),p,!1),i[m]={type:l,target:s,listener:p,remove:function(){e.remove(s,l,p)}}}return i[m]}};e.add=function(e,n,r,i){return t(e,n,r,"add",i)},e.remove=function(e,n,r,i){return t(e,n,r,"remove",i)},e.stop=e.stopPropagation=function(e){e.stopPropagation&&e.stopPropagation(),e.cancelBubble=!0},e.prevent=e.preventDefault=function(e){e.preventDefault&&e.preventDefault(),e.returnValue=!1},e.cancel=function(t){e.stop(t),e.prevent(t)},e.supports=function(e,t){typeof e=="string"&&(t=e,e=window),t="on"+t;if(t in e)return!0;e.setAttribute||(e=document.createElement("div"));if(e.setAttribute&&e.removeAttribute){e.setAttribute(t,"");var n=typeof e[t]=="function";return typeof e[t]!="undefined"&&(e[t]=void 0),e.removeAttribute(t),n}};var n=function(){var e={},t=[];t.push("click"),t.push("dblclick"),t.push("dbltap"),t.push("drag"),t.push("gesture"),t.push("shake"),t.push("swipe"),t.push("tap"),t.push("taphold"),t.push("devicemotion"),t.push("mousewheel");for(var n=0,r=t.length;n<r;n++)e[t[n]]=!0;return e}(),r=function(t){if(e.supports("touchstart"))switch(t){case"mousedown":return"touchstart";case"mouseup":return"touchend";case"mousemove":return"touchmove"}return document.addEventListener?t:"on"+t},i={},s=0,o=function(e){return e===window?"#window":e===document?"#document":e?(e.uniqueID||(e.uniqueID="id"+s++),e.uniqueID):console.log("Missing target on listener!")},u=document.addEventListener?"addEventListener":"attachEvent",a=document.removeEventListener?"removeEventListener":"detachEvent";return e}({});typeof Event=="undefined"&&(Event={}),Event.proxy=function(e){var t=Math.PI/180;e.drag=function(e){e.doc=e.target.ownerDocument||e.target,e.minFingers=e.minFingers||1,e.maxFingers=e.maxFingers||Infinity,e.position=e.position||"relative";var t={type:"drag",target:e.target,listener:e.listener,remove:function(){Event.remove(e.target,"mousedown",s)}},s=function(t){n(t,e)&&(Event.add(e.doc,"mousemove",o),Event.add(e.doc,"mouseup",u)),o(t,"down")},o=function(n,r){for(var s=e.bbox,o=n.changedTouches||i(n),u=o.length,a=0;a<u;a++){var f=o[a],l=f.identifier||0,h=e.tracker[l];h&&(h.pageX=f.pageX,h.pageY=f.pageY,t.state=r||"move",t.id=l,t.x=(f.pageX+s.scrollLeft-h.offsetX)*s.scaleX,t.y=(f.pageY+s.scrollTop-h.offsetY)*s.scaleY,t.start=h.start,e.listener(n,t))}},u=function(t){r(t,e,o)&&(Event.remove(e.doc,"mousemove",o),Event.remove(e.doc,"mouseup",u))};return e.event?s(e.event):Event.add(e.target,"mousedown",s),t},e.gesture=function(e){e.doc=e.target.ownerDocument||e.target,e.minFingers=e.minFingers||2,e.maxFingers=e.maxFingers||2;var s={type:"gesture",target:e.target,listener:e.listener,remove:function(){Event.remove(e.target,"mousedown",o)}},o=function(t){var r=e.fingers;n(t,e)&&(Event.add(e.doc,"mousemove",u),Event.add(e.doc,"mouseup",a));if(e.fingers===e.minFingers&&r!==e.fingers){s.fingers=e.minFingers,s.scale=1,s.rotation=0,s.state="start";var r="",i;for(i in e.tracker)r+=i;s.id=parseInt(r),e.listener(t,s)}},u=function(n){for(var r=e.bbox,o=e.tracker,u=n.changedTouches||i(n),a=u.length,f=0;f<a;f++){var l=u[f],h=l.identifier||0,p=o[h];p&&(p.move.x=(l.pageX+r.scrollLeft-r.x1)*r.scaleX,p.move.y=(l.pageY+r.scrollTop-r.y1)*r.scaleY)}if(!(e.fingers<e.minFingers)){var u=[],v=p=f=r=0,a=0;for(h in o)l=o[h],l.up||(p+=l.move.x,v+=l.move.y,a++);p/=a,v/=a;for(h in o)if(l=o[h],!l.up){a=l.start;if(!a.distance){var m=a.x-p,y=a.y-v;a.distance=Math.sqrt(m*m+y*y),a.angle=Math.atan2(m,y)/t}var m=l.move.x-p,y=l.move.y-v,b=Math.sqrt(m*m+y*y);r+=b/a.distance,m=Math.atan2(m,y)/t,a=(a.angle-m+360)%360-180,l.DEG2=l.DEG1,l.DEG1=a>0?a:-a,typeof l.DEG2!="undefined"&&(a>0?l.rotation+=l.DEG1-l.DEG2:l.rotation-=l.DEG1-l.DEG2,f+=l.rotation),u.push(l.move)}s.touches=u,s.fingers=e.fingers,s.scale=r/e.fingers,s.rotation=f/e.fingers,s.state="change",e.listener(n,s)}},a=function(t){var n=e.fingers;r(t,e)&&(Event.remove(e.doc,"mousemove",u),Event.remove(e.doc,"mouseup",a)),n===e.minFingers&&e.fingers<e.minFingers&&(s.fingers=e.fingers,s.state="end",e.listener(t,s))};return Event.add(e.target,"mousedown",o),s},e.swipe=function(e){e.doc=e.target.ownerDocument||e.target,e.snap=e.snap||90,e.threshold=e.threshold||1,e.minFingers=e.minFingers||1,e.maxFingers=e.maxFingers||5;var s={type:"swipe",target:e.target,listener:e.listener,remove:function(){Event.remove(e.target,"mousedown",o)}},o=function(t){n(t,e)&&(Event.add(e.doc,"mousemove",u).listener(t),Event.add(e.doc,"mouseup",a))},u=function(t){for(var t=t.changedTouches||i(t),n=t.length,r=0;r<n;r++){var s=t[r],o=e.tracker[s.identifier||0];o&&(o.move.x=s.pageX,o.move.y=s.pageY,o.moveTime=(new Date).getTime())}},a=function(n){if(r(n,e)){Event.remove(e.doc,"mousemove",u),Event.remove(e.doc,"mouseup",a);var i,o,l,p,v;for(v in e.tracker){var m=e.tracker[v];p=m.move.x-m.start.x;var g=m.move.y-m.start.y;o=Math.sqrt(p*p+g*g),m=m.moveTime-m.startTime,p=Math.atan2(p,g)/t+180,o=m?o/m:0;if(typeof l=="undefined")l=p,i=o;else{if(!(Math.abs(p-l)<=20))return;l=(l+p)/2,i=(i+o)/2}}i>e.threshold&&(s.angle=-(((l/e.snap+.5>>0)*e.snap||360)-360),s.velocity=i,s.fingers=e.gestureFingers,e.listener(n,s))}};return Event.add(e.target,"mousedown",o),s},e.tap=e.taphold=function(e){e.doc=e.target.ownerDocument||e.target,e.minFingers=e.minFingers||1,e.maxFingers=e.maxFingers||Infinity,e.type==="taphold"||e.minhold?(e.type="taphold",e.delay=e.minhold||500):(e.type="tap",e.delay=e.maxhold||250);var t={type:e.type,target:e.target,listener:e.listener,remove:function(){Event.remove(e.target,"mousedown",u)}},s,o,u=function(r){n(r,e)&&(s=(new Date).getTime(),Event.add(e.doc,"mousemove",a).listener(r),Event.add(e.doc,"mouseup",l),e.type==="taphold"&&(o=setTimeout(function(){if(!r.cancelBubble){var n=0,i;for(i in e.tracker){if(e.tracker[i].end===!0)return;if(e.cancel)return;n++}t.state="taphold",t.fingers=n,e.listener(r,t)}},e.delay)))},a=function(t){for(var n=e.bbox,t=t.changedTouches||i(t),r=t.length,s=0;s<r;s++){var o=t[s],u=e.tracker[o.identifier||0];if(u){var f=(o.pageX+n.scrollLeft-n.x1)*n.scaleX,o=(o.pageY+n.scrollTop-n.y1)*n.scaleY;if(!(f>0&&f<n.width&&o>0&&o<n.height&&Math.abs(f-u.start.x)<=25&&Math.abs(o-u.start.y)<=25)){Event.remove(e.doc,"mousemove",a),e.cancel=!0;break}}}},l=function(n){r(n,e)&&(clearTimeout(o),Event.remove(e.doc,"mousemove",a),Event.remove(e.doc,"mouseup",l),!n.cancelBubble)&&(e.type==="taphold"?t.state==="taphold"&&(t.state="release",e.listener(n,t)):!e.cancel&&!((new Date).getTime()-s>e.delay)&&(t.state="tap",t.fingers=e.gestureFingers,e.listener(n,t)))};return Event.add(e.target,"mousedown",u),t},e.dbltap=e.dblclick=function(e){e.doc=e.target.ownerDocument||e.target,e.minFingers=e.minFingers||1,e.maxFingers=e.maxFingers||1;var t={type:e.type,target:e.target,listener:e.listener,remove:function(){Event.remove(e.target,"mousedown",c)}},s,o,u,a,l,c=function(t){var r=t.changedTouches||i(t);s&&!o?(l=r[0],o=(new Date).getTime()-s):(a=r[0],s=(new Date).getTime(),o=0,clearTimeout(u),u=setTimeout(function(){s=0},700)),n(t,e)&&(Event.add(e.doc,"mousemove",h).listener(t),Event.add(e.doc,"mouseup",p))},h=function(t){s&&!o&&(l=(t.changedTouches||i(t))[0]);var t=e.bbox,n=(l.pageX+t.scrollLeft-t.x1)*t.scaleX,r=(l.pageY+t.scrollTop-t.y1)*t.scaleY;n>0&&n<t.width&&r>0&&r<t.height&&Math.abs(l.pageX-a.pageX)<=25&&Math.abs(l.pageY-a.pageY)<=25||(Event.remove(e.doc,"mousemove",h),clearTimeout(u),s=o=0)},p=function(n){r(n,e)&&(Event.remove(e.doc,"mousemove",h),Event.remove(e.doc,"mouseup",p)),s&&o&&(o<=700&&!n.cancelBubble&&(t.state=e.type,e.listener(n,t)),clearTimeout(u),s=o=0)};return Event.add(e.target,"mousedown",c),t},e.click=function(t){t.doc=t.target.ownerDocument||t.target,t.minFingers=t.minFingers||1,t.maxFingers=t.maxFingers||1;var s={type:"click",target:t.target,listener:t.listener,add:function(){Event.add(t.target,"mousedown",u)},remove:function(){Event.remove(t.target,"mousedown",u)}},o,u=function(e){n(e,t)&&(Event.add(t.doc,"mousemove",a).listener(e),Event.add(t.doc,"mouseup",l))},a=function(e){o=e},l=function(n){if(r(n,t)&&(Event.remove(t.doc,"mousemove",a),Event.remove(t.doc,"mouseup",l),!o.cancelBubble)){var u=(o.changedTouches||i(o))[0],n=t.bbox,p=e.getBoundingBox(t.target),v=(u.pageX+n.scrollLeft-n.x1)*n.scaleX,u=(u.pageY+n.scrollTop-n.y1)*n.scaleY;v>0&&v<n.width&&u>0&&u<n.height&&n.scrollTop===p.scrollTop&&t.listener(o,s)}};return Event.add(t.target,"mousedown",u),s},e.shake=e.devicemotion=function(e){var t={type:"devicemotion",acceleration:{},accelerationIncludingGravity:{},target:e.target,listener:e.listener,remove:function(){window.removeEventListener("devicemotion",s,!1)}},n=(new Date).getTime(),r={x:0,y:0,z:0},i={x:{count:0,value:0},y:{count:0,value:0},z:{count:0,value:0}},s=function(s){var o=s.accelerationIncludingGravity;r.x=.8*r.x+(1-.8)*o.x,r.y=.8*r.y+(1-.8)*o.y,r.z=.8*r.z+(1-.8)*o.z,t.accelerationIncludingGravity=r,t.acceleration.x=o.x-r.x,t.acceleration.y=o.y-r.y,t.acceleration.z=o.z-r.z;if(e.type==="devicemotion")return e.listener(s,t);for(var o=(new Date).getTime(),u=0;u<3;u++){var a="xyz"[u],l=t.acceleration[a],a=i[a],h=Math.abs(l);if(!(o-n<1e3)&&h>4)if(l=o*l/h,h=Math.abs(l+a.value),a.value&&h<200){if(a.value=l,a.count++,a.count===3)e.listener(s,t),n=o,a.value=0,a.count=0}else a.value=l,a.count=1}};if(window.addEventListener)return window.addEventListener("devicemotion",s,!1),t},e.mousewheel=function(e){var t=e.timeout||150,n={type:"mousewheel",state:"start",wheelDelta:0,target:e.target,listener:e.listener,remove:function(){e.target[s](o,r,!1)}},r=function(r){r=r||window.event,n.state="wheel",n.wheelDelta=r.detail?r.detail*-40:r.wheelDelta,e.listener(r,n),clearTimeout(t),t=setTimeout(function(){n.state="end",n.wheelDelta=0,e.listener(r,n)},t)},i=document.addEventListener?"addEventListener":"attachEvent",s=document.removeEventListener?"removeEventListener":"detachEvent",o=Event.supports("mousewheel")?"mousewheel":"DOMMouseScroll";return e.target[i](o,r,!1),n};var n=function(t,n){for(var r=function(e,t){n.fingers++;var r=n.bbox,i=(e.pageX+r.scrollLeft-r.x1)*r.scaleX,s=(e.pageY+r.scrollTop-r.y1)*r.scaleY,u=o[t]={};u.rotation=0,u.scale=1,u.startTime=u.moveTime=(new Date).getTime(),u.move={x:i,y:s},u.start={x:i,y:s},u.offsetX=0,u.offsetY=0;if(n.position)switch(n.position){case"absolute":u.offsetX=0,u.offsetY=0;break;case"relative":u.offsetX=r.x1,u.offsetY=r.y1;break;case"difference":u.offsetX=e.pageX,u.offsetY=e.pageY;break;case"move":u.offsetX=e.pageX-r.x1,u.offsetY=e.pageY-r.y1}},s=!n.fingers,o=n.tracker,u=t.changedTouches||i(t),a=u.length,f=0;f<a;f++){var l=u[f],c=l.identifier||0;if(n.fingers){if(n.fingers>=n.maxFingers)break;var p=0,d;for(d in o){if(o[d].up){delete o[d],r(l,c),n.cancel=!0;break}p++}if(o[c])continue}else o=n.tracker={},n.bbox=e.getBoundingBox(n.target),n.fingers=0,n.cancel=!1;r(l,c)}return s},r=function(e,t,n){for(var r=e.touches||[],i=r.length,e={},s=0;s<i;s++)e[r[s].identifier||0]=!0;for(var o in t.tracker)if(r=t.tracker[o],!e[o]&&!r.up)n&&n({changedTouches:[{pageX:r.pageX,pageY:r.pageY,identifier:o}]},"up"),t.tracker[o].up=!0,t.fingers--;if(t.fingers!==0)return!1;t.gestureFingers=0;for(var u in t.tracker)t.gestureFingers++;return!0},i=function(e){return i=typeof e.pageX!="undefined"?function(e){return Array(e)}:function(e){return e=e||window.event,Array({pageX:e.clientX+document.documentElement.scrollLeft,pageY:e.clientY+document.documentElement.scrollTop})},i(e)};return e.getBoundingBox=function(e){if(e===window||e===document)e=document.body;var t={x1:0,y1:0,x2:0,y2:0,scrollLeft:0,scrollTop:0};e===document.body?(t.height=window.innerHeight,t.width=window.innerWidth):(t.height=e.offsetHeight,t.width=e.offsetWidth),t.scaleX=e.width/t.width||1,t.scaleY=e.height/t.height||1;for(var n=e;n!==null;)t.x1+=n.offsetLeft,t.y1+=n.offsetTop,n=n.offsetParent;for(n=e.parentNode;n!==null;){if(n===document.body)break;if(n.scrollTop===void 0)break;t.scrollLeft+=n.scrollLeft,t.scrollTop+=n.scrollTop,n=n.parentNode}return t.x2=t.x1+t.width,t.y2=t.y1+t.height,t},e}({}),Event.coords=function(e){if("ontouchstart"in window){var t=0,n=0;Event.coords=function(e){return e=e.changedTouches,e.length?{x:t=e[0].pageX,y:n=e[0].pageY}:{x:t,y:n}}}else Event.coords=typeof e.pageX!="undefined"&&typeof e.pageY!="undefined"?function(e){return{x:e.pageX,y:e.pageY}}:function(e){return e=e||window.event,{x:e.clientX+document.documentElement.scrollLeft,y:e.clientY+document.documentElement.scrollTop}};return Event.coords(e)};var QueueLinearFloodFill;(function(){var e,t,n,r,i,s,o,u,a,f,l,c,h,p,d,v,m,g,y,b,w,E,S,x;QueueLinearFloodFill=function(e){o=e
.src,u=e.srcRect||{x:0,y:0,width:d,height:v},a=e.srcData||o.getImageData(u.x,u.y,u.width,u.height),l=e.dst,c=e.dstRect||{x:0,y:0},h=e.dstData||l.getImageData(u.x,u.y,u.width,u.height),d=o.canvas.width||0,v=o.canvas.height||0,m=d*4;if(typeof e.tolerance=="number"){var t=e.tolerance*255;g=[t,t,t,t]}else t=e.tolerance,g=[t[0]*255,t[1]*255,t[2]*255,t[3]*255];y=e.contiguous},QueueLinearFloodFill.prototype.render=function(N){var C=N.x,L=N.y,N=m*L+C*4;b=l.createImageData(d*v/4+1>>0,1).data,a||(a=o.getImageData(u.x,u.y,u.width,u.height)),h||(h=l.getImageData(u.x,u.y,u.width,u.height)),f=a.data,p=h.data,e=f[N]-g[0],t=f[N+1]-g[1],n=f[N+2]-g[2],minus3=f[N+3]-g[3],r=f[N]+g[0],i=f[N+1]+g[1],s=f[N+2]+g[2],plus3=f[N+3]+g[3],E=[],x=S=0;if(y)for(T(C,L);x>0;){w=E[S],S++,x--;for(var C=d*(w.y+1)+w.startx,L=d*(w.y-1)+w.startx,A=w.y-1,O=w.y+1,M=w.endx,_=w.startx;_<=M;_++)N=m*A+_*4,w.y>0&&!b[L]&&f[N]>=e&&f[N]<=r&&f[N+1]>=t&&f[N+1]<=i&&f[N+2]>=n&&f[N+2]<=s&&f[N+3]>=minus3&&f[N+3]<=plus3&&T(_,A),N=m*O+_*4,w.y<v-1&&!b[C]&&f[N]>=e&&f[N]<=r&&f[N+1]>=t&&f[N+1]<=i&&f[N+2]>=n&&f[N+2]<=s&&f[N+3]>=minus3&&f[N+3]<=plus3&&T(_,O),C++,L++}else{M=f.length;for(N=0;N<M;N+=4)f[N]>=e&&f[N]<=r&&f[N+1]>=t&&f[N+1]<=i&&f[N+2]>=n&&f[N+2]<=s&&f[N+3]>=minus3&&f[N+3]<=plus3&&(p[N+3]=255)}l.putImageData(h,c.x,c.y)};var T=function(o,u){for(var a=o,l=m*u+o*4,c=d*u+o;;)if(b[c]=1,p[l+3]=255,c--,l-=4,a--,a<0||!(f[l]>=e&&f[l]<=r&&f[l+1]>=t&&f[l+1]<=i&&f[l+2]>=n&&f[l+2]<=s&&f[l+3]>=minus3&&f[l+3]<=plus3))break;for(var h=o,l=m*u+o*4,c=d*u+o;;)if(b[c]=1,p[l+3]=255,c++,l+=4,h++,h>=d||!(f[l]>=e&&f[l]<=r&&f[l+1]>=t&&f[l+1]<=i&&f[l+2]>=n&&f[l+2]<=s&&f[l+3]>=minus3&&f[l+3]<=plus3))break;x+S===E.length&&(E.splice(0,S),S=0),E[S+x]={startx:++a,endx:--h,y:u},x++}})(),function(){function e(){this.a=0,this.next=null}StackBlurAlpha=function(r,i,s,o,u,a,f){if(!(isNaN(a)||a<1)){var r=r.getContext("2d"),l;try{try{l=r.getImageData(i,s,o,u)}catch(p){netscape.security.PrivilegeManager.enablePrivilege("UniversalBrowserRead"),l=r.getImageData(i,s,o,u)}}catch(d){throw Error("unable to access image data: "+d)}var v=l.data,m,g,y,b,w,E,S,x,T,N,C;m=a+a+1;var k=o-1,L=u-1,A=a+1,O=A*(A+1)/2,M=new e,_=M;for(y=1;y<m;y++)if(_=_.next=new e,y==A)var D=_;_.next=M,_=y=null,E=w=0;var P=t[a],H=n[a];for(g=0;g<u;g++){T=S=0,x=A*(N=v[w+3]),S+=O*N,_=M;for(y=0;y<A;y++)_.a=N,_=_.next;for(y=1;y<A;y++)b=w+((k<y?k:y)<<2),C=A-y,S+=(_.a=N=v[b+3])*C,T+=N,_=_.next;y=M,_=D;for(m=0;m<o;m++)v[w+3]=S*P>>H,S-=x,x-=y.a,b=E+((b=m+a+1)<k?b:k)<<2,T+=y.a=v[b+3],S+=T,y=y.next,x+=N=_.a,T-=N,_=_.next,w+=4;E+=o}for(m=0;m<o;m++){T=S=0,w=m<<2,x=A*(N=v[w+3]),S+=O*N,_=M;for(y=0;y<A;y++)_.a=N,_=_.next;b=o;for(y=1;y<=a;y++)w=b+m<<2,C=A-y,S+=(_.a=N=v[w+3])*C,T+=N,_=_.next,y<L&&(b+=o);w=m,y=M,_=D;for(g=0;g<u;g++)b=w<<2,v[b+3]=S*P>>H,S-=x,x-=y.a,b=m+((b=g+A)<L?b:L)*o<<2,S+=T+=y.a=v[b+3],y=y.next,x+=N=_.a,T-=N,_=_.next,w+=o}f?r.putImageData(l,0,0):r.putImageData(l,i,s)}},StackBlur=function(r,i,s,o,u,a,f){if(!(isNaN(a)||a<1)){var r=r.getContext("2d"),l;try{try{l=r.getImageData(i,s,o,u)}catch(p){netscape.security.PrivilegeManager.enablePrivilege("UniversalBrowserRead"),l=r.getImageData(i,s,o,u)}}catch(d){throw Error("unable to access image data: "+d)}var v=l.data,m,g,y,b,w,E,S,x,T,N,C,k,L,A,O,M,_,D,P,H,B,j,F,I;g=a+a+1,m=o-1;var q=u-1,R=a+1,U=R*(R+1)/2,z=new e,W=z;for(b=1;b<g;b++)if(W=W.next=new e,b==R)var X=W;W.next=z,W=b=null,S=E=0;var V=t[a],$=n[a];for(y=0;y<u;y++){M=_=D=P=x=T=N=C=0,H=v[E],B=v[E+1],j=v[E+2],F=v[E+3],k=R*H,L=R*B,A=R*j,O=R*F,x+=U*H,T+=U*B,N+=U*j,C+=U*F,W=z;for(b=0;b<R;b++)W.r=H,W.g=B,W.b=j,W.a=F,W=W.next;for(b=1;b<R;b++)w=E+((m<b?m:b)<<2),H=v[w],B=v[w+1],j=v[w+2],F=v[w+3],x+=(W.r=H)*(I=R-b),T+=(W.g=B)*I,N+=(W.b=j)*I,C+=(W.a=F)*I,M+=H,_+=B,D+=j,P+=F,W=W.next;b=z,W=X;for(g=0;g<o;g++)H=x*V>>$,B=T*V>>$,j=N*V>>$,F=C*V>>$,v[E]=H,v[E+1]=B,v[E+2]=j,v[E+3]=F,x-=k,T-=L,N-=A,C-=O,k-=b.r,L-=b.g,A-=b.b,O-=b.a,w=S+((w=g+a+1)<m?w:m)<<2,b.r=v[w],b.g=v[w+1],b.b=v[w+2],b.a=v[w+3],M+=b.r,_+=b.g,D+=b.b,P+=b.a,x+=M,T+=_,N+=D,C+=P,b=b.next,k+=H=W.r,L+=B=W.g,A+=j=W.b,O+=F=W.a,M-=H,_-=B,D-=j,P-=F,W=W.next,E+=4;S+=o}for(g=0;g<o;g++){_=D=P=M=T=N=C=x=0,E=g<<2,k=R*(H=v[E]),L=R*(B=v[E+1]),A=R*(j=v[E+2]),O=R*(F=v[E+3]),x+=U*H,T+=U*B,N+=U*j,C+=U*F,W=z;for(b=0;b<R;b++)W.r=H,W.g=B,W.b=j,W.a=F,W=W.next;w=o;for(b=1;b<=a;b++)E=w+g<<2,x+=(W.r=H=v[E])*(I=R-b),T+=(W.g=B=v[E+1])*I,N+=(W.b=j=v[E+2])*I,C+=(W.a=F=v[E+3])*I,M+=H,_+=B,D+=j,P+=F,W=W.next,b<q&&(w+=o);E=g,b=z,W=X;for(y=0;y<u;y++)w=E<<2,H=x*V>>$,B=T*V>>$,j=N*V>>$,F=C*V>>$,F<255&&(m=F/255,H/=m,B/=m,j/=m),v[w]=H,v[w+1]=B,v[w+2]=j,v[w+3]=F,x-=k,T-=L,N-=A,C-=O,k-=b.r,L-=b.g,A-=b.b,O-=b.a,w=g+((w=y+R)<q?w:q)*o<<2,x+=M+=b.r=v[w],T+=_+=b.g=v[w+1],N+=D+=b.b=v[w+2],C+=P+=b.a=v[w+3],b=b.next,k+=H=W.r,L+=B=W.g,A+=j=W.b,O+=F=W.a,M-=H,_-=B,D-=j,P-=F,W=W.next,E+=o}f?r.putImageData(l,0,0):r.putImageData(l,i,s)}};var t=[512,512,456,512,328,456,335,512,405,328,271,456,388,335,292,512,454,405,364,328,298,271,496,456,420,388,360,335,312,292,273,512,482,454,428,405,383,364,345,328,312,298,284,271,259,496,475,456,437,420,404,388,374,360,347,335,323,312,302,292,282,273,265,512,497,482,468,454,441,428,417,405,394,383,373,364,354,345,337,328,320,312,305,298,291,284,278,271,265,259,507,496,485,475,465,456,446,437,428,420,412,404,396,388,381,374,367,360,354,347,341,335,329,323,318,312,307,302,297,292,287,282,278,273,269,265,261,512,505,497,489,482,475,468,461,454,447,441,435,428,422,417,411,405,399,394,389,383,378,373,368,364,359,354,350,345,341,337,332,328,324,320,316,312,309,305,301,298,294,291,287,284,281,278,274,271,268,265,262,259,257,507,501,496,491,485,480,475,470,465,460,456,451,446,442,437,433,428,424,420,416,412,408,404,400,396,392,388,385,381,377,374,370,367,363,360,357,354,350,347,344,341,338,335,332,329,326,323,320,318,315,312,310,307,304,302,299,297,294,292,289,287,285,282,280,278,275,273,271,269,267,265,263,261,259],n=[9,11,12,13,13,14,14,15,15,15,15,16,16,16,16,17,17,17,17,17,17,17,18,18,18,18,18,18,18,18,18,19,19,19,19,19,19,19,19,19,19,19,19,19,19,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24]}();if(typeof Sketch=="undefined")var Sketch={};window.devicePixelRatio=window.devicePixelRatio||1,window.devicePixelRatio=1,Sketch=function(e){e.canvas2d={scale:1,width:window.innerWidth*window.devicePixelRatio,height:window.innerHeight*window.devicePixelRatio,top:0,left:0,layers:{cache:"display: none",layer0:"z-index: 0; margin: auto;",layer1:"z-index: 1; margin: auto;",active:"z-index: 2; margin: auto;"},history:{max:15,current:-1,data:[]}},e.scale2d=function(t){var n=e.canvas2d.layers;t&&(e.canvas2d.scale=t);var t=e.canvas2d.scale,r;for(r in n){var i=n[r],s=i.width*t,o=i.height*t;i.style.width=s+"px",i.style.height=o+"px",s=(e.container.offsetWidth-s)/2,s<0?(i.parentNode.scrollLeft=-s,i.style.left=0):(i.parentNode.scrollLeft=0,i.style.left=s+"px"),o=(e.container.offsetHeight-o)/2,o<0?(i.parentNode.scrollTop=-o,i.style.top=0):(i.parentNode.scrollTop=0,i.style.top=o+"px"),e.canvas2d.left=parseFloat(i.style.left),e.canvas2d.top=parseFloat(i.style.top)}},e.construct2d=function(t){for(var r in t)t[r]=n(e.container,r),t[r].id=r};var t=window.orientation;e.orientation=function(){console.log("Was: "+t+", Now: "+window.orientation+", Deviance: "+(window.orientation-t));var e=Sketch.canvas2d.layers,n=e.layer0,e=e.active,r=e.ctx,i=r.canvas.width,s=r.canvas.height,o=window.orientation-t+180,u=i/2,a=s/2,u=u>a&&o>0?Math.min(u,a):Math.max(u,a);n.style.display="none",e.style.display="none",r.canvas.height=i,r.canvas.width=s,r.translate(u,u),r.rotate(DEG_RAD*o),r.translate(-u,-u),r.drawImage(n,0,0),n.height=i,n.width=s,n.ctx.drawImage(e,0,0),e.width=e.height,n.style.display="block",e.style.display="block",t=window.orientation},e.resize=function(t,n){var r=Sketch.canvas2d.layers;e.canvas2d.width=t||window.innerWidth*window.devicePixelRatio,e.canvas2d.height=n||window.innerHeight*window.devicePixelRatio,e.construct2d(r)},e.timeMachine={store:function(){var t=e.canvas2d.history,r=t.data.length-1,i=r-t.current;i&&(t.data=t.data.splice(0,r-i+1)),t.data.length===t.max?t.data.push(t.data.shift()):t.data.push(n()),t.current=t.data.length-1,r=e.canvas2d.layers.layer0,t=t.data[t.current].ctx,t.clearRect(0,0,r.width,r.height),t.drawImage(r,0,0)},undo:function(){Sketch.tool.deleteAction&&(Sketch.tool.deleteAction(),Sketch.tool.render());var t=e.canvas2d.history;t.current=Math.max(0,--t.current);var n=e.canvas2d.layers.layer0,r=n.ctx;r.clearRect(0,0,n.width,n.height),r.drawImage(t.data[t.current],0,0)},redo:function(){Sketch.tool.deleteAction&&(Sketch.tool.deleteAction(),Sketch.tool.render());var t=e.canvas2d.history;t.current=Math.min(t.data.length-1,++t.current);var n=e.canvas2d.layers.layer0,r=n.ctx;r.clearRect(0,0,n.width,n.height),r.drawImage(t.data[t.current],0,0)},clear:function(t){if(confirm("Are you sure you want to clear the canvas?")===!0){var n=e.canvas2d.history;n.current=0,n.data=n.data.splice(0,1);try{var r=e.canvas2d.layers.layer0,i=r.ctx;i.clearRect(0,0,r.width,r.height),i.drawImage(n.data[n.current],0,0)}catch(s){e.loadTexture()}e.resize(),e.scale2d(1),e.configure.reset(),t&&t()}}};var n=function(t,n){var r;typeof n!="undefined"&&(r=document.getElementById(n)),r||(r=document.createElement("canvas"));var i=e.canvas2d;return r.id=n,r.width=i.width,r.height=i.height,r.ctx=r.getContext("2d"),typeof i.layers[n]=="string"&&(r.style.cssText=i.layers[n]),t&&t.appendChild(r),r};return e}(Sketch),typeof Sketch=="undefined"&&(Sketch={}),Sketch.area=function(e){var t=this;return e.debug=!1,e.useCreateAction=e.useCreateAction,e.useTestData=e.debug||e.useTestData,e.editable=e.debug||e.editable,e.cursor=e.debug||e.cursor,this.media={},this.media.close=Vector.SVGPath.toVOBPath("M89.794,19.994 70.06,0.261 45.045,25.276 20.029,0.261 0.297,19.994 25.312,45.009 0.298,70.022 20.03,89.757 45.045,64.743 70.059,89.757 89.793,70.022 64.779,45.009z"),this.media.move=Vector.SVGPath.toVOBPath("M75.472,21.74 87.499,33.768 87.5,2.554 56.286,2.554 68.4,14.669 45.005,37.929 21.74,14.528 33.768,2.501 2.554,2.5 2.554,33.714 14.668,21.6 37.913,44.979 14.512,68.244 2.5,56.232 2.5,87.445 33.713,87.445 21.583,75.315 44.964,52.071 68.244,75.488 56.232,87.5 87.445,87.5 87.445,56.287 75.316,68.417 52.056,45.021z"),this.media.scale=Vector.SVGPath.toVOBPath("M87.445,56.287V87.5H56.232l12.59-12.59L50.697,56.68l7.092-7.051l18.105,18.21L87.445,56.287z M32.398,39.495l-17.76-17.864L2.554,33.714V2.5l31.214,0.001L21.709,14.56L39.49,32.444L32.398,39.495z M57.687,37.288L37.312,57.662l-4.95-4.949l20.374-20.375L57.687,37.288z"),this.media.rotate=Vector.SVGPath.toVOBPath("M1.515,24.05l23.068,23.07V29.05c19.965,0,36.207,16.554,36.207,36.903H42.356l23.068,23.068l23.069-23.068H70.791c0-25.863-20.73-46.903-46.208-46.903V0.983L1.515,24.05z"),this.buttons=[],this.actions=[],this.construct=function(){return this.ctx=e.ctx,this.active=e.active,this.cache=e.cache,this.container=document.createElement("div"),this.container.className="textareaWrapper",this.area=document.createElement("div"),this.area.className="textarea",this.area.setAttribute("contentEditable","true"),this.container.appendChild(this.area),setTimeout(function(){e.container.appendChild(t.container)},250),this},this.dragging=!1,this.mouseEvent=function(n){if(this.dragging=n.type!=="mouseup"){var r=t.actions,i=t.findAction(n,r.concat(t.buttons)),r=r.length;typeof i=="undefined"?(t.deselectAction(t.actionID),e.useCreateAction&&(Event.cancel(n),Event.proxy.drag({event:n,target:e.active.canvas,listener:function(e,n){t.createAction(n)}}))):i-r<0?(t.deselectAction(t.actionID),t.selectAction(i),t.buttons[0].event(n),t.active.canvas.className="drag",setTimeout(function(){t.area.blur(),t.area.focus()},10)):(i-=r,t.buttons[i].event(n),t.active.canvas.className="drag")}},this.cursorEvent=function(e){if(!this.dragging){var n=t.actions,e=t.findAction(e,n.concat(t.buttons)),n=n.length;if(typeof e=="undefined")var n="",r=!1;else if(e-n<0){var n="move",r=!0,i=t.active;i.canvas.width=i.canvas.width;for(var s in t.actions){s=parseInt(s);var o=t.actions[s];Sketch.area.actionID===s?t.drawControls(i,null,o):e===s&&t.drawControls(i,null,o,!0)}}else e-=n,n=t.buttons[e].id,r=!0;t.active.canvas.title=n,t.active.canvas.className=r?"hover":""}},this.deleteEvent=function(e){var n=e.target,r=function(){t.deleteAction();var e=0,i=setInterval(function(){t.active.save(),t.active.globalAlpha=.25,t.active.globalCompositeOperation="destination-out",t.active.fillRect(0,0,t.active.canvas.width,t.active.canvas.width),t.active.restore(),e++>10&&(clearInterval(i),t.render("root.deleteAction"))},30);Event.remove(n,"mouseup",r)};Event.add(n,"mouseup",r),Event.cancel(e)},this.moveEvent=function(n){var r=t.actions[t.actionID];if(typeof r!="undefined"){var i=Sketch.container,s=Sketch.canvas2d.scale,o=r.bbox.x-i.scrollLeft/s,u=r.bbox.y-i.scrollTop/s;Event.proxy.drag({position:"difference",event:n,target:e.active.canvas,listener:function(e,n){Event.cancel(e),r.bbox.x=o+n.x,r.bbox.y=u+n.y,t.updateAction()}})}},this.rotateEvent=function(n){var r=t.actions[t.actionID];if(typeof r!="undefined"){var i=r.bbox,s=i.x,o=i.y,u=i.rotate,a=null;Event.proxy.drag({position:"relative",event:n,target:e.active.canvas,listener:function(e,n){Event.cancel(e);if(s-n.x!==0||o-n.y!==0){var r=-Math.atan2(s-n.x,o-n.y)*RAD_DEG;a===null&&(a=r),i.rotate=(u-(a-r)+360)%360,t.updateAction()}}})}},this.scaleEvent=function(n){var r=t.actions[t.actionID];if(typeof r!="undefined"){Event.coords(n);var i=r.bbox,s=i.x,o=i.y,u=i.scale.x,a=null;Event.proxy.drag({position:"relative",event:n,target:e.active.canvas,listener:function(e,n){Event.cancel(e);if(s-n.x!==0||o-n.y!==0){var r=n.x-s,f=n.y-o,r=Math.sqrt(r*r+f*f);a===null&&(a=r),r=r/a*u,r*i.width<i.minWidth&&(r=i.minWidth/i.width),r*i.height<i.minHeight&&(r=i.minHeight/i.height),r*i.width>i.maxWidth&&(r=i.maxWidth/i.width),r*i.height>i.maxHeight&&(r=i.maxHeight/i.height),i.scale={x:r,y:r},t.updateAction()}}})}},this.placeAction=function(e){if(typeof e=="undefined"){e=t.actions[t.actionID];if(typeof e=="undefined")return;e=e.bbox}var n=Sketch.canvas2d.scale,r=e.rotate,i=e.scale.x*n,s=e.scale.y*n,o=t.container.style;o.left=e.x*n-7+"px",o.top=e.y*n-8+"px",o.width=e.width+"px",o.height=e.height+"px",o.transform=o.msTransform=o.OTransform=o.MozTransform=o.WebkitTransform="rotate("+r+"deg) scale("+i+","+s+")",o.transformOrigin=o.msTransformOrigin=o.OTransformOrigin=o.MozTransformOrigin=o.WebkitTransformOrigin="7px 8px",e=t.style.fillStyle,typeof e!="undefined"&&(typeof e.H!="undefined"&&(e="hsla("+e.H+","+e.S+"%,"+e.L+"%,"+e.A/255+")"),t.area.style.color=e)},this.drawControls=function(e,n,r,i){var s=r.bbox;e.save(),e.translate(s.x,s.y),e.rotate(s.rotate*DEG_RAD),e.translate(-s.x,-s.y),e.lineWidth=2,e.strokeStyle=i?"rgba(0,200,255,0.5)":"rgba(0,255,0,0.5)",e.strokeRect(s.x-10,s.y-10,s.scale.x*s.width+20,s.scale.y*s.height+20),e.restore();if(!i){n||(n=Sketch.placement({bbox:{width:s.viewBox[2],height:s.viewBox[3]},pt0:{x:s.x,y:s.y},pt1:{x:s.width+s.x,y:s.height+s.y},rotate:s.rotate*DEG_RAD,scale:s.scale,doRotate:!0,doScale:!0,doLockRatio:!0})),n.translate(-s.x,-s.y);var i=n.point2D(s.x,s.y),o=n.point2D(s.viewBox[2]+s.x,s.viewBox[3]+s.y),u=n.point2D(s.x,s.viewBox[3]+s.y),a=n.point2D(s.viewBox[2]+s.x,s.y),f=Math.round(2.5);t.buttons=[],t.buttons.push({id:"move",event:t.moveEvent,bbox:{x:s.x,y:s.y,left:-10,top:-10,boxWidth:s.scale.x*s.width+20,boxHeight:s.scale.y*s.height+20,rotate:s.rotate,scale:{x:1,y:1}}}),r.hideClose||(e.save(),e.translate(i.x,i.y),e.rotate(s.rotate*DEG_RAD),e.translate(-i.x,-i.y),e.fillStyle="#000",e.fillRect(i.x-20,i.y-20,20,20),e.strokeStyle="rgba(255,255,255,0.6)",e.strokeRect(i.x-20,i.y-20,20,20),e.restore(),t.buttons.push({id:"delete",event:t.deleteEvent,bbox:{x:i.x,y:i.y,left:-30,top:-30,boxWidth:40,boxHeight:40,rotate:s.rotate,scale:{x:1,y:1}}}),e.save(),e.beginPath(),n.reset(),n.translate(i.x,i.y),n.rotate(s.rotate*DEG_RAD),n.translate(-20+f,-20+f),n.scale(.15,.15),n.apply(e),Vector.Shapes.VOBPath(e,t.media.close),e.fillStyle="#fff",e.fill(),e.restore()),r.hideMove||(e.save(),e.translate(u.x,u.y),e.rotate(s.rotate*DEG_RAD),e.translate(-u.x,-u.y),e.fillStyle="#000",e.fillRect(u.x-20,u.y,20,20),e.strokeStyle="rgba(255,255,255,0.6)",e.strokeRect(u.x-20,u.y,20,20),e.restore(),t.buttons.push({id:"move",event:t.moveEvent,bbox:{x:u.x,y:u.y,left:-30,top:-10,boxWidth:40,boxHeight:40,rotate:s.rotate,scale:{x:1,y:1}}}),e.save(),e.beginPath(),n.reset(),n.translate(u.x,u.y),n.rotate(s.rotate*DEG_RAD),n.translate(-20+f,f),n.scale(.15,.15),n.apply(e),Vector.Shapes.VOBPath(e,t.media.move),e.fillStyle="#fff",e.fill(),e.restore()),r.hideScale||(e.save(),e.translate(o.x,o.y),e.rotate(s.rotate*DEG_RAD),e.translate(-o.x,-o.y),e.fillStyle="#000",e.fillRect(o.x,o.y,20,20),e.strokeStyle="rgba(255,255,255,0.6)",e.strokeRect(o.x,o.y,20,20),e.restore(),t.buttons.push({id:"scale",event:t.scaleEvent,bbox:{x:o.x,y:o.y,left:-10,top:-10,boxWidth:40,boxHeight:40,rotate:s.rotate,scale:{x:1,y:1}}}),e.save(),e.beginPath(),n.reset(),n.translate(o.x,o.y),n.rotate(s.rotate*DEG_RAD),n.scale(.15,.15),n.translate(20+f,20+f),n.apply(e),Vector.Shapes.VOBPath(e,t.media.scale),e.fillStyle="#fff",e.fill(),e.restore()),r.hideRotate||(e.save(),e.translate(a.x,a.y),e.rotate(s.rotate*DEG_RAD),e.translate(-a.x,-a.y),e.fillStyle="#000",e.fillRect(a.x,a.y-20,20,20),e.strokeStyle="rgba(255,255,255,0.6)",e.strokeRect(a.x,a.y-20,20,20),e.restore(),t.buttons.push({id:"rotate",event:t.rotateEvent,bbox:{x:a.x,y:a.y,left:-10,top:-30,boxWidth:40,boxHeight:40,rotate:s.rotate,scale:{x:1,y:1}}}),e.save(),e.beginPath(),n.reset(),n.translate(a.x,a.y),n.rotate(s.rotate*DEG_RAD),n.translate(f,-20+f),n.scale(.15,.15),n.apply(e),Vector.Shapes.VOBPath(e,t.media.rotate),e.fillStyle="#fff",e.fill(),e.restore())}},this.selectAction=function(e){t.isActive=!0,t.actionID=e,t.updateAction()},this.deselectAction=function(){var e=t.actions[t.actionID];typeof e!="undefined"&&(t.hide(),t.buttons=[],e.content===""?t.deleteAction():(e.content&&t.updateActionSize(),t.render("root.deselectAction"),t.actionID=void 0))},this.deleteAction=function(){typeof t.actionID!="undefined"&&(t.actions.splice(t.actionID,1),t.actionID=void 0,t.hide())},this.findAction=function(t,n){if(e.editable){for(var r=new Vector.Transform,i=Event.coords(t),s=Sketch.canvas2d,o=Sketch.container,u=s.scale,a=(i.x-s.left)/u+o.scrollLeft,i=(i.y-s.top)/u+o.scrollTop,s=n.length,u=o=void 0;s--;){var f=n[s].bbox,l=f.boxWidth,c=f.boxHeight,p=1/f.scale.x,d=1/f.scale.y,v=f.rotate*DEG_RAD;r.reset(),r.translate(f.x,f.y),v&&r.rotate(-v),r.translate(-f.x*p,-f.y*d),r.scale(p,d),p=r.point2D(a,i),p.x-=f.left||0,p.y-=f.top||0,p.x>f.x&&p.y>f.y&&p.x<f.x+l&&p.y<f.y+c&&(o===void 0||o>l*c)&&(u=s,o=l*c),r.reset()}return u}},this.render=function(n){if(!e.editable){var r=t.actions[t.actionID];return t.ctx.clearRect(0,0,t.ctx.canvas.width,t.ctx.canvas.height),typeof r=="undefined"?void 0:this.renderAction(r,!0,n)}var i=new Vector.Transform;t.ctx.clearRect(0,0,t.ctx.canvas.width,t.ctx.canvas.height),t.active.clearRect(0,0,t.active.canvas.width,t.active.canvas.height);if(e.debug)for(var s=0;s<t.buttons.length;s++){r=t.buttons[s],t.ctx.save();var o=r.bbox,u=o.scale.x,a=o.scale.y,f=o.rotate*DEG_RAD;i.reset(),i.translate(o.x,o.y),f&&i.rotate(f),i.translate(-o.x*u,-o.y*a),i.scale(u,a),i.apply(t.ctx),t.ctx.fillStyle="rgba(0,0,255,0.25)",t.ctx.fillRect(o.x+o.left||0,o.y+o.top||0,o.boxWidth,o.boxHeight),t.ctx.restore()}for(var l=[],s=0,p=t.actions.length;s<p;s++)r=t.actions[s],typeof r.zIndex=="number"?l.splice(r.zIndex,0,r):l.push(r);t.actions=l,s=0;for(p=l.length;s<p;s++)r=l[s],e.debug&&(t.ctx.save(),o=r.bbox,u=o.scale.x,a=o.scale.y,f=o.rotate*DEG_RAD,i.reset(),i.translate(o.x,o.y),f&&i.rotate(f),i.translate(-o.x*u,-o.y*a),i.scale(u,a),i.apply(t.ctx),t.ctx.fillStyle="rgba(255,0,0,0.25)",t.ctx.fillRect(o.x,o.y,o.boxWidth,o.boxHeight),t.ctx.restore()),t.isActive&&t.actionID===s?(e.debug||r.type!=="text")&&t.renderAction(r,!1,n):t.renderAction(r,!0,n)},this.hide=function(){t.isActive=!1,t.container.style.opacity=0,clearTimeout(t.hideTimeout),t.hideTimeout=setTimeout(function(){t.container.style.display="none"},250)},this.show=function(){t.isActive=!0,t.type==="text"&&(t.container.style.opacity=1,t.container.style.display="block"),clearTimeout(t.hideTimeout)},this.construct(),Sketch.area[e.type](e,this),this},Sketch.area.image=Sketch.area.svg=function(e,t){t.type=e.type,t.enable=function(){t.disable(),e.editable&&t.loadActions(),Event.add(t.container,"mousedown",Event.stop),Event.add(e.active.canvas,"mousedown mouseup",t.mouseEvent),e.cursor&&Event.add(e.active.canvas,"mousemove",t.cursorEvent)},t.disable=function(){t.deselectAction(),Event.remove(t.container,"mousedown",Event.stop),Event.remove(e.active.canvas,"mousedown mouseup",t.mouseEvent),e.cursor&&Event.remove(e.active.canvas,"mousemove",t.cursorEvent),t.hide()},t.loadActions=function(){for(var e=t.actions.length,n=e,r=0;r<e;r++){var i=t.actions[r];i.render||t.loadMedia(i,function(){--n||t.render("root.loadActions")})}},t.loadMedia=function(e,n){var r=e.src;typeof e.bbox=="undefined"&&(e=t.style,e.src=r);if(r.split(".").pop()==="svg")return(new Vector.SVG({ctx:Sketch.canvas2D.layers.cache.ctx})).attach({src:r,callback:function(t){e.bbox.viewBox=t.viewBox,e.render=function(e,n){return t.render({ctx:e,Matrix:n})},n(t)}});r=function(){var t=e.bbox,r=t.width,s=t.height,o=i.width,u=i.height;r/o>s/u&&(s=r/o*u),r/o<s/u&&(r=s/u*o),t.width=r,t.height=s,t.boxWidth=r,t.boxHeight=s,t.viewBox=[0,0,o,u],e.render=function(e,t){e.save(),e.transform(t.A,t.B,t.C,t.D,t.X,t.Y),e.drawImage(i,0,0),e.restore()},n&&n(e)};if(typeof FlashCanvas!="undefined"){var i=new Image;i.src=e.src,t.ctx.loadImage(i,r)}else i=new Image,i.onload=r,i.src=e.src},t.createAction=function(n){if(typeof t.style.render=="undefined")return console.log("requires: that.loadMedia(that.style);");Math.min(n.start.x,n.x),Math.min(n.start.y,n.y);var r=Math.abs(n.start.x-n.x),i=Math.abs(n.start.y-n.y),s=t.style.bbox.boxWidth,o=t.style.bbox.boxHeight;r/s>i/o?i=r/s*o:r=i/o*s,t.style.bbox.x=n.start.x,t.style.bbox.y=n.start.y,t.style.bbox.width=r,t.style.bbox.height=i;var u=t.style.bbox;if(n.state==="up"){r===0&&i===0&&e.placement&&(s>o?(i=300/s*o,r=300):(r=300/o*s,i=300),u.width=u.boxWidth=r,u.height=u.boxHeight=i,t.placeAction(u));if(!(u.width>e.minWidth&&u.height>e.minHeight)){t.hide(),t.render("create-up");return}t.actionID=t.actions.length,t.actions.push({id:t.actionID,type:"svg",src:t.style.src,render:t.style.render,hideClose:t.style.hideClose,hideMove:t.style.hideMove,hideRotate:t.style.hideRotate,hideScale:t.style.hideScale,constrain:t.style.constrain,constrainX:t.style.constrainX,constrainY:t.style.constrainY,stickToX:t.style.stickToX,stickToY:t.style.stickToY,bbox:{x:u.x,y:u.y,width:u.width,height:u.height,minWidth:u.minWidth,maxWidth:u.maxWidth,minHeight:u.minHeight,maxHeight:u.maxHeight,boxWidth:u.width,boxHeight:u.height,viewBox:[0,0,u.viewBox[2],u.viewBox[3]],rotate:0,scale:{x:1,y:1}}})}t.updateAction()},t.updateAction=function(){var n=t.actions[t.actionID];if(typeof n!="undefined"){var r=e.ctx.canvas.width,i=e.ctx.canvas.height,s=n.bbox,o=s.height,u=s.width,a=s.x,f=s.y;if(n.constrain||n.constrainX||n.constrainY){var l=new Vector.Transform,p=s.scale.x,d=s.scale.y,v=s.rotate*DEG_RAD;l.translate(s.x,s.y),v&&l.rotate(v),l.translate(-s.x*p,-s.y*d),l.scale(p,d);var v=l.point2D(a+u,f),m=l.point2D(a+u,f+o),g=l.point2D(a,f+o),p=Math.max(v.x,m.x,s.x,g.x),l=Math.max(v.y,m.y,s.y,g.y),d=Math.min(v.x,m.x,s.x,g.x),g=Math.min(v.y,m.y,s.y,g.y),v=a-d,m=f-g,p=r-Math.max(0,p-d)+v,l=i-Math.max(0,l-g)+m;n.constrain?(s.x=Math.max(v,Math.min(p,a)),s.y=Math.max(m,Math.min(l,f))):n.constrainX?(s.x=Math.max(v,Math.min(p,a)),s.y=f):n.constrainY&&(s.x=a,s.y=Math.max(m,Math.min(l,f)))}else s.x=a,s.y=f;n.stickToX?s.x=Math.max(r-u,Math.min(0,s.x)):n.stickToY&&(s.y=Math.max(i-o,Math.min(0,s.y))),t.placeAction(s),t.render("root.updateAction"),t.show()}},t.renderAction=function(e,n){var r=e.bbox;typeof r!="undefined"&&typeof r.viewBox!="undefined"&&(r=Sketch.placement({bbox:{width:r.viewBox[2],height:r.viewBox[3]},pt0:{x:r.x,y:r.y},pt1:{x:r.width+r.x,y:r.height+r.y},rotate:r.rotate*DEG_RAD,scale:r.scale,doRotate:!0,doScale:!0,doLockRatio:!0}),n?e.render(t.ctx,r.Matrix):(e.render(t.ctx,r.Matrix),t.drawControls(t.active,r,e)))},t.style={type:"image",src:"./media/rctid.png",bbox:{x:100,y:0,width:150,height:10,rotate:0,scale:{x:1,y:1}}},e.useTestData&&(t.actions=[{type:"image",src:"./media/rctid.png",constrain:!0,hideClose:!0,hideRotate:!0,hideScale:!0,bbox:{x:100,y:18,width:390,height:80,rotate:0,scale:{x:1,y:1}}}])},typeof Sketch=="undefined"&&(Sketch={}),Sketch.text=function(e){function t(t){var i=document.body;e.element||(e.parent=document.createElement("span"),e.text=document.createElement("span"),e.parent.appendChild(e.text),e.image=document.createElement("img"),e.image.style.display="inline",e.image.src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAAC0lEQVQIW2NkAAIAAAoAAggA9GkAAAAASUVORK5CYII=",e.parent.appendChild(e.image),e.element=document.createElement("div"),e.element.id="DOMMetrics",e.element.appendChild(e.parent),i.insertBefore(e.element,i.firstChild)),e.text.innerHTML=t.text,e.element.style.cssText="display: block;";if(!t.marginReset)return s=t.callback(e.parent),e.element.style.display="none",s;if(!t.setup||t.setup===1)n=i.style.padding,r=i.style.margin,i.style.padding=0,i.style.margin=0;if(!t.setup)var s=t.callback(e.parent);if(!t.setup||t.setup===2)i.style.padding=n,i.style.margin=r,e.element.style.display="none";if(!t.setup)return s}e.getMetrics=function(n,r){var i=window.getComputedStyle(document.body,"").direction,s=e.measureTextHeight(n,r),o=e.measureTextWidth(n,r);return t({marginReset:!0,text:n,callback:function(t){t.style.cssText="font: "+r+"; white-space: nowrap; display: block;";var n=e.image.offsetTop,u=n-s;return t.style.cssText="font: "+r+"; white-space: nowrap; line-height: 0; display: block;",{font:r,direction:i,ascent:n,descent:-u,height:s,width:o,textBaseline:{alphabetic:0,top:n,hanging:n*8/10,middle:e.image.offsetTop,ideographic:u,bottom:u},textAlign:{left:0,start:-(i==="ltr")?0:o,end:-(i==="ltr")?o:0,right:-o,center:-o/2}}}})},e.measureText=function(t,n){return{width:e.measureTextWidth(t,n),height:e.measureTextHeight(t,n)}},e.measureTextWidth=function(e,n){return t({text:e+e,callback:function(e){return e.style.cssText="font: "+n+"; white-space: nowrap; display: inline;",e.offsetWidth/2>>0}})},e.measureTextHeight=function(e,n){return t({text:"1<br>2<br>3",callback:function(e){return e.style.cssText="font: "+n+"; white-space: nowrap; display: inline;",e.offsetHeight/3+.5>>0}})},e.textAlign=function(n,r){var i=window.getComputedStyle(document.body,"").direction,s=e.measureTextWidth(n,r);return t({text:n,callback:function(){return{left:0,start:-(i==="ltr")?0:s,end:-(i==="ltr")?s:0,right:-s,center:-s/2}}})},e.textBaseline=function(n,r){var i=e.measureTextHeight(n,r);return t({marginReset:!0,text:n,callback:function(t){t.style.cssText="font: "+r+"; white-space: nowrap; display: block;";var n=e.image.offsetTop,s=n-i;return t.style.cssText="font: "+r+"; white-space: nowrap; line-height: 0; display: block;",{alphabetic:0,top:n,hanging:n*8/10,middle:e.image.offsetTop+1,ideographic:s,bottom:s}}})},e.textBaselineTop=function(n,r){return t({text:n,callback:function(t){return t.style.cssText="font: "+r+"; white-space: nowrap; display: block;",e.image.offsetTop}})};var n,r,i=1/(180/Math.PI),s=/[\u2014\u2013-]/,o=/[ \u2014\u2013-]/,u=/^\s+|\s+$/g;return e.drawLineBreaks=function(t){var n=t.content.replace(u,"");if(n){var r=e.getFontStyle(t),s=t.bbox,o=t.ctx,a=e.getLineBreaks({font:r,content:n,width:s.width}),n=e.measureText(n,r).height,f=a.data;o.font=r,o.save();var l=s.scale.x,c=s.scale.y,p=s.rotate*i;o.translate(s.x,s.y),p&&o.rotate(p),o.translate(-s.x*l,-s.y*c),l===1&&c===1||o.scale(l,c),o.fillStyle=t.fillStyle||"#000",t.clip&&(o.rect(s.x,s.y,s.width,s.height),o.clip()),t=0;for(l=f.length;t<l;t++)c=e.textBaselineTop(f[t],r),o.fillText(f[t],s.x,t*n+c+s.y);return o.restore(),{data:f,height:a.height,width:a.width,x:s.x,y:s.y}}},e.getLineBreaks=function(t){function n(n){f.push(n),n=e.measureText(n,t.font),v+=n.height,p=Math.max(n.width,p)}function r(){if(!(e.measureTextWidth(l,t.font)<=t.width)){for(var r=l.length,i=0,o=0,a=0;a<r;a++){var f=l.substr(i,++o).replace(u,"");e.measureTextWidth(f,t.font)>t.width&&(f=f.substr(0,f.length-1).replace(u,""),f.match(s)?(i=f.split(s),f=f[i[0].length],a-=i[1].length,n(i[0]+f)):f.match(" ")?(i=f.split(" "),a-=i.pop().length,n(i.join(" "))):n(f),i=a,o=1)}return l.substr(i,o+1)}}for(var i=(new Date).getTime(),a=t.content.replace(u,"").split("\n"),f=[],l="",c,p=0,v=0,m=0;m<=a.length;m++){if(l){n(l);if(m===a.length)break;l=""}for(var g=a[m],y=g.split(o),b=0,w=0;w<y.length+2;w++){var E=b-1<0?"":g.substr(b-1,1),S=y[w]||"";if(e.measureTextWidth(l+E+S,t.font)<=t.width)l+=E+S;else if(c=r())l=c+E+S;else{c=E.match(s)?E:"";if(l||E)e.measureTextWidth(l+c,t.font)>t.width?c===""?S=l+c+S:(n(l),S=c+S):n(l+c);l=S}b+=S.length+1}}return console.log((new Date).getTime()-i),{data:f,lines:f.length,height:v,width:p}},e.getFontStyle=function(e){var t=[];return e.fontStyle&&t.push(e.fontStyle),e.fontVariant&&t.push(e.fontVariant),e.fontWeight&&t.push(e.fontWeight),e.fontSize&&t.push(e.fontSize),e.fontFamily&&t.push(e.fontFamily),t.join(" ")},e.getPixelBoundingBox=function(e){var t=e.ctx,n=e.height>>0,r=e.width>>0,i=e.x>>0,e=e.y>>0,s=t.getImageData(i,e,r,n).data,o={},u=0,a=0,f=0;for(t.save();a<=n&&f<=r;){if(s[(a*r+f)*4+3]){u=f+i;break}a++,a%n===0&&(a=0,f++)}o.x1=u;for(var l=0,a=0,f=r;a<=n&&f>=0;){if(s[(a*r+f)*4+3]){l=f+i+1;break}a++,a%n===0&&(a=0,f--)}o.x2=l,o.width=l-u;for(i=n=0;i<s.length;){if(s[i+3]){i-=i%r,n=i/4/r,n+=e;break}i+=4}o.y1=n,u=0;for(i=s.length;i>=0;){if(s[i+3]){i+=r-i%r,u=i/4/r,u+=e;break}i-=4}return o.height=u-n,o.y2=o.height+o.y1,t.restore(),o},e.getRange=function(t){var n=window.getSelection();return n===null?(t=e.getCursorPos(t),{startOffset:t,endOffset:t}):n.getRangeAt(0)},e.setRange=function(e,t,n){var r=document.createRange(),e=e.firstChild||e;r.setStart(e,t),r.setEnd(e,n),e=window.getSelection(),e.removeAllRanges(),e.addRange(r)},e.getCursorPos=function(e){var t=0;if(window.getSelection){var n=window.getSelection();n.rangeCount&&(n=n.getRangeAt(0),n.commonAncestorContainer.parentNode===e)&&(t=n.endOffset)}else document.selection&&document.selection.createRange&&(n=document.selection.createRange(),n.parentElement()===editableDiv)&&(e=document.createElement("span"),editableDiv.insertBefore(e,editableDiv.firstChild),t=n.duplicate(),t.moveToElementText(e),t.setEndPoint("EndToEnd",n),t=t.text.length);return t},e.attach=function(t){function n(e,t,n){return t.clearRect(0,0,t.canvas.width,t.canvas.height),t.fillText(e,o.textAlign.left,o.textBaseline.top),n.toDataURL()}var r="16px "+t.family+", Arial, Helvetica",i=document.createElement("canvas"),s=i.getContext("2d"),o=e.getMetrics("The quick brown fox.",r);i.width=o.width,i.height=o.height,s.font=r.replace(t.family,"Arial");var u=n("The quick brown fox.",s,i),a=n("",s,i);s.font=r;var f=n("The quick brown fox.",s,i);if(f!==a&&f!==u)return t.callback();var l=setInterval(function(){s.font=r;var e=n("The quick brown fox.",s,i);e!==a&&e!==u&&(clearInterval(l),t.callback())},10),f=t.href.replace(/[^a-zA-Z 0-9]+/g,"");if(!document.getElementById(f)){var c=document.createElement("link");c.href=t.href,c.id=f,c.setAttribute("rel","stylesheet"),c.setAttribute("type","text/css"),document.body.appendChild(c)}},e}({}),Sketch.placement=function(e){var t=new Vector.Transform,n=e.bbox,r=e.pt0,i=e.pt1,s=i.x,o=i.y,i=r.x,r=r.y,u=s-i||.001,a=o-r||.001,f=!e.doRotate&&u<0,l=!e.doRotate&&a<0,c=u<0?1:-1,h=a<0?1:-1,p=f?-1:1,d=l?-1:1,s=typeof e.rotate=="undefined"?-Math.atan2(i-s,r-o):e.rotate,o=n.width,v=n.height,m=u/o||0,n=a/v||0;return e.doLockRatio&&(m=Math.max(Math.abs(n),Math.abs(m)),n=m*h,m*=c),a>0&&(n*=-1),u>0&&(m*=-1),e.doRotate&&(t.translate(i,r),t.rotate(s),t.translate(-i,-r),f&&(i+=-o*m),l&&(r+=-v*n)),e.doScale&&(e.doCenter?(u=p*m*o/2,a=d*n*v/2):a=u=0,t.translate(i-u,r-a),t.scale(m*p,n*d)),e.scale&&t.scale(e.scale.x,e.scale.y),t},Sketch.area.text=function(e,t){t.enable=function(){t.disable(),e.editable&&t.render(),e.debug&&Event.add(window,"mousemove",t.cursorEvent),Event.add
(t.area,"keydown",t.keydown),Event.add(t.area,"keypress",t.keypress),Event.add(t.area,"keyup",t.keyup),Event.add(t.container,"mousedown",Event.stop),Event.add(e.active.canvas,"mousedown",t.mouse)},t.disable=function(){t.deselectAction(),e.debug&&Event.remove(window,"mousemove",t.cursorEvent),Event.remove(t.area,"keydown",t.keydown),Event.remove(t.area,"keypress",t.keypress),Event.remove(t.area,"keyup",t.keyup),Event.remove(t.container,"mousedown",Event.stop),Event.remove(e.active.canvas,"mousedown",t.mouse),t.hide()},t.keydown=function(e){var t=e.metaKey||e.ctrlKey;(e.keyCode===67||e.keyCode===86||e.keyCode===88)&&t&&Event.preventDefault(e)},t.keyup=function(e){if(e.keyCode===27)t.deselectAction();else if(e.keyCode===8){var e=t.area,n=e.innerHTML,r=Sketch.text.getRange(),i=n.substr(0,r.startOffset),n=n.substr(r.endOffset);e.innerHTML=t.cleanText(i+n),i=t.cleanText(i).length,Sketch.text.setRange(e,i,i),t.updateActionSize()}},t.keypress=function(e){if(typeof t.actions[t.actionID]!="undefined"&&e.which!==0&&e.keyCode!==8){Event.preventDefault(e);var n=t.area,r=n.innerHTML,e=String.fromCharCode(e.charCode||e.keyCode),i=Sketch.text.getRange(t.area),s=r.substr(0,i.startOffset),r=r.substr(i.endOffset);n.innerHTML=t.cleanText(s+e+r),r=t.cleanText(s+e).length,Sketch.text.setRange(n,r,r),t.updateActionSize()}},t.createAction=function(e,n){n.state==="down"&&(t.area.blur(),t.area.innerHTML="");var r=Math.min(n.start.x,n.x),i=Math.min(n.start.y,n.y),s=Math.abs(n.start.x-n.x),o=Math.abs(n.start.y-n.y),r={x:r,y:i,width:s,height:o,boxWidth:s,boxHeight:o,rotate:0,scale:{x:1,y:1}};t.area.style.font=Sketch.text.getFontStyle(t.style),t.placeAction(r),t.show(),n.state==="up"&&(s<=10&&o<=10&&(r.width=r.boxWidth=350,r.height=r.boxHeight=100,t.placeAction(r)),r.width>50&&r.height>50?(s=t.style.fillStyle,typeof s!="string"&&(s="hsla("+s.H+","+s.S+"%,"+s.L+"%,"+s.A/255+")"),t.actionID=t.actions.length,t.actions.push({type:"text",fontVariant:t.style.fontVariant,fontStyle:t.style.fontStyle,fontSize:t.style.fontSize,fontFamily:t.style.fontFamily,fillStyle:s,content:"",bbox:r}),t.render(),setTimeout(function(){t.area.blur(),t.area.focus()},10)):t.hide())},t.updateAction=function(){var e=t.actions[t.actionID];typeof e!="undefined"&&(t.area.innerHTML=t.cleanText(e.content).split("\n").join("<br>"),t.area.style.font=Sketch.text.getFontStyle(e),t.placeAction(e.bbox),t.show())},t.updateActionSize=function(){var e=t.actions[t.actionID];if(typeof e!="undefined"){var n=Sketch.text.getFontStyle(e),r=t.cleanText(t.area.innerHTML),i=e.bbox;r&&(n=Sketch.text.getLineBreaks({font:n,content:r,width:i.width}),i.height=n.height,i.boxHeight=n.height,i.boxWidth=n.width,t.container.style.height=n.height+"px",e.content=r)}},t.renderAction=function(e){e.content&&(Sketch.text.drawLineBreaks({ctx:t.ctx,fillStyle:e.fillStyle,transform:e.transform,fontVariant:e.fontVariant,fontStyle:e.fontStyle,fontWeight:e.fontWeight,fontSize:e.fontSize,fontFamily:e.fontFamily,content:e.content,bbox:e.bbox}),Sketch.timeMachine.store())},t.cleanText=function(e){return e.split("&nbsp;").join(" ").split("  ").join(" ").split("<br>").join("\n").split("<div>").join("\n").split("\r").join("\n").split("\n\n").join("\n").replace(/^\s+/g,"").replace(/(<([^>]+)>)/ig,"")},t.style={fontWeight:"bold",fontSize:"41px",fontFamily:"Optima",fontVariant:"small-caps",fontStyle:"italic",fillStyle:{H:180,S:100,L:50,A:255}},e.debug&&(t.actions=[{type:"text",fillStyle:"rgba(255,255,0,1)",fontWeight:"bold",fontVariant:"small-caps",fontSize:"31px",fontFamily:"Optima",content:"The quick brown fox jumps over the lazy dog is an English language pangram, that is, a phrase that contains all of the letters of the English-alphabet. .",bbox:{x:400,y:350,boxWidth:400,boxHeight:230,width:400,height:230,rotate:0,scale:{x:1,y:1}}}])},typeof Sketch=="undefined"&&(Sketch={}),typeof Sketch.event=="undefined"&&(Sketch.event={}),Sketch.brush=function(e){var t=this,n=Sketch.configure.define;return this.active=e.active,this.cache=e.cache,this.ctx=e.layer0,this.device=null,this.gestures=0,this.rendering=!1,this.time=0,this.batches={},this.position={},this.intervals={},this.enable=function(){Event.add(t.active.canvas,"drag",this.record)},this.disable=function(){Event.remove(t.active.canvas,"drag",this.record)},this.load=function(e){e=clone(e),e.ctx=t.ctx,e.callback=function(e){t.device=e},new Sketch.brush[e.type](e)},this.record=function(e,n){n.state==="down"&&Event.cancel(e);var r=t.batches[n.id];r||(r=t.batches[n.id]=[],r.path=[],r.time=t.time);var i={x:n.x,y:n.y,state:n.state};t.device.click===!0?r[0]=i:(r.push(i),r.path.push(i)),t.rendering||t.render()},this.render=function(){(new Date).getTime();var e=t.device,r=e.composite==="disco",i=t.ctx;e.ctx=t.ctx,e.active=t.active,e.cache=t.cache,i.save(),i.globalAlpha=e.alpha/100,i.globalCompositeOperation=n.composite(e.composite);if(e.preprocess)for(var s in t.batches)if(t.batches[s].length){e.preprocess();break}for(s in t.batches){var o=t.batches[s],u=typeof e.draw!="undefined";e.path=o.path,e.finger=s;for(var a=0;a<o.length;a++){var f=o.shift(),l=f.x,h=f.y;e.x=l,e.y=h;if(f.state==="down"){var p=t.position[s+"x"]=l,d=t.position[s+"y"]=h,v=p,m=d;e.px=v,e.py=m,t.gestures++,e.drawStart&&(e.time=++o.time,e.drawStart())}else p=t.position[s+"x"],d=t.position[s+"y"],v=p,m=d,e.px=v,e.py=m;e.interval&&(t.intervals[s]=f);if(f.state==="up"){t.gestures--,e.drawEnd&&(e.time=++o.time,e.drawEnd()),t.time=t.batches[s].time,delete t.batches[s],delete t.intervals[s],delete t.position[s+"x"],delete t.position[s+"y"];break}if(u){var g=e.flow.max,y=p>l?p-l:l-p,b=d>h?d-h:h-d,y=(y>b?y:b)+1;if(!(y<e.flow.min&&f.state!=="down")){for(var b=(l-p)/y||0,w=(h-d)/y||0,E=g||1,g=g<y-1?g:y-1;g<y;g+=E)l=p+b*g,h=d+w*g,r&&(i.globalCompositeOperation=o.time%2===0?"lighter":"source-over"),e.x=l,e.y=h,e.px=v,e.py=m,e.time=++o.time,e.draw(),v=l,m=h;t.position[s+"x"]=l,t.position[s+"y"]=h}}}}i.restore(),e.postprocess&&e.postprocess(),typeof f=="undefined"?t.rendering=!1:(requestAnimationFrame(t.render),t.rendering=!0);for(s in t.intervals)o=t.batches[s],e=t.intervals[s],o.length>0||o.push({x:e.x,y:e.y})},this},typeof Sketch=="undefined"&&(Sketch={}),typeof Sketch.brush=="undefined"&&(Sketch.brush={}),Sketch.brush=function(e){return e.floodfill=function(e){var t=this,n=Sketch.configure.createGradient;this.construct=function(e){this.type="floodfill",this.alpha=e.alpha.value||100,this.colors=e.colors,this.color_mode=e.color_mode||"cycle",this.composite=e.composite||"paint",this.tolerance=e.tolerance.value||25,this.antialias=e.antialias||!1,this.contiguous=e.contiguous||!1,e.callback(this)},this.drawStart=function(){this.loader=new widgets.Loader({message:"Floodfill..."}),setTimeout(function(){t.render()},10)},this.render=function(){var e=this.ctx.canvas.width,t=this.ctx.canvas.height;this.tolerance===100?(this.ctx.save(),this.ctx.globalAlpha=this.alpha/100,this.ctx.fillStyle=n(this.ctx,0,0,e,t,this),this.ctx.fillRect(0,0,e,t),this.ctx.restore()):(this.rendering=!0,this.cache.clearRect(0,0,e,t),(new QueueLinearFloodFill({src:this.ctx,srcRect:{x:0,y:0,width:e,height:t},dst:this.cache,dstRect:{x:0,y:0},tolerance:this.tolerance/100,contiguous:this.contiguous})).render({x:this.x,y:this.y}),this.antialias&&(this.cache.drawImage(this.cache.canvas,0,0,e,t,.25,.25,e,t),this.cache.drawImage(this.cache.canvas,0,0,e,t,-0.25,-0.25,e,t)),this.composite!=="erase"&&(this.cache.save(),this.cache.globalCompositeOperation="source-in",this.cache.fillStyle=n(this.ctx,0,0,e,t,this),this.cache.fillRect(0,0,e,t),this.cache.restore()),this.ctx.save(),this.ctx.globalAlpha=this.alpha/100,this.ctx.drawImage(this.cache.canvas,0,0),this.ctx.restore(),this.loader.stop())},this.construct(e)},e}(Sketch.brush),typeof Sketch=="undefined"&&(Sketch={}),typeof Sketch.brush=="undefined"&&(Sketch.brush={}),Sketch.brush=function(e){return e.chrome=function(e){this.construct=function(e){this.alpha=e.alpha.value||100,this.colors=e.colors,this.composite=e.composite||"paint",this.lineWidth=e.lineWidth.value||1,this.radius=e.radius.value||30,this.flow=e.flow||[0,0],e.callback(this)},this.draw=function(){var e=this.ctx,t=this.path,n=this.colors,r=this.radius*100,i=t.length,s=t[i-1],o=t[i-2]||s,u;e.beginPath(),e.lineCap="round",e.lineWidth=this.lineWidth,e.moveTo(o.x,o.y),e.lineTo(s.x,s.y),e.strokeStyle=n[(this.time*2+1)%n.length],e.stroke();for(var a=0;a<i;a++)if(s=t[a].x-t[i-1].x,o=t[a].y-t[i-1].y,u=s*s+o*o,u<r)e.beginPath(),e.moveTo(t[i-1].x+s*.2,t[i-1].y+o*.2),e.lineTo(t[a].x-s*.2,t[a].y-o*.2),e.strokeStyle=n[(this.time*2+1)%n.length],e.stroke()},this.construct(e)},e.shaded=function(e){this.construct=function(e){this.alpha=e.alpha.value||100,this.colors=e.colors,this.composite=e.composite||"paint",this.lineWidth=e.lineWidth.value||1,this.radius=e.radius.value||30,this.flow=e.flow||[0,0],e.callback(this)},this.draw=function(){var e=this.ctx,t=this.path,n=this.colors,r=this.radius*100,i=t.length,s,o;e.lineCap="round",e.lineWidth=this.lineWidth;for(var u=0;u<i;u++)if(s=t[u].x-t[i-1].x,o=t[u].y-t[i-1].y,s=s*s+o*o,s<r)e.beginPath(),e.globalAlpha=(1-s/r)*.1,e.moveTo(t[i-1].x,t[i-1].y),e.lineTo(t[u].x,t[u].y),e.strokeStyle=n[(this.time*2+1)%n.length],e.stroke()},this.construct(e)},e.sketchy=function(e){this.construct=function(e){this.alpha=e.alpha.value||100,this.colors=e.colors,this.composite=e.composite||"paint",this.lineWidth=e.lineWidth.value||1,this.radius=e.radius.value||30,this.flow=e.flow||[0,0],e.callback(this)},this.draw=function(){var e=this.ctx,t=this.path,n=this.colors,r=this.radius*100,i=t.length,s=t[i-1],o=t[i-2]||s,u;e.beginPath(),e.lineCap="round",e.lineWidth=this.lineWidth,e.moveTo(o.x,o.y),e.lineTo(s.x,s.y),e.strokeStyle=n[(this.time*2+1)%n.length],e.stroke();for(var a=0;a<i;a++)if(s=t[a].x-t[i-1].x,o=t[a].y-t[i-1].y,u=s*s+o*o,u<r&&Math.random()>u/r/2)e.beginPath(),e.moveTo(t[i-1].x+s*.3,t[i-1].y+o*.3),e.lineTo(t[a].x-s*.3,t[a].y-o*.3),e.strokeStyle=n[(this.time*2+1)%n.length],e.stroke()},this.construct(e)},e.web=function(e){this.construct=function(e){this.alpha=e.alpha.value||100,this.colors=e.colors,this.composite=e.composite||"paint",this.lineWidth=e.lineWidth.value||1,this.radius=e.radius.value||30,this.flow=e.flow||[0,0],e.callback(this)},this.draw=function(){var e=this.ctx,t=this.path,n=this.colors,r=this.radius*100,i=t.length,s=t[i-1],o=t[i-2]||s,u;e.beginPath(),e.lineCap="round",e.lineWidth=this.lineWidth,e.moveTo(o.x,o.y),e.lineTo(s.x,s.y),e.strokeStyle=n[(this.time*2+1)%n.length],e.stroke();for(s=0;s<i;s++)if(o=t[s].x-t[i-1].x,u=t[s].y-t[i-1].y,o=o*o+u*u,o<r&&Math.random()<.15)e.beginPath(),e.moveTo(t[i-1].x,t[i-1].y),e.lineTo(t[s].x,t[s].y),e.strokeStyle=n[(this.time*2+1)%n.length],e.stroke()},this.construct(e)},e.fur=function(e){this.construct=function(e){this.alpha=e.alpha.value||100,this.colors=e.colors,this.composite=e.composite||"paint",this.lineWidth=e.lineWidth.value||1,this.radius=e.radius.value||30,this.flow=e.flow||[0,0],e.callback(this)},this.draw=function(){var e=this.ctx,t=this.path,n=this.colors,r=this.radius/100,i=t.length,s=t[i-1],o=t[i-2]||s,u,a;e.beginPath(),e.moveTo(o.x,o.y),e.lineTo(s.x,s.y),e.lineCap="round",e.lineWidth=this.lineWidth,e.strokeStyle=n[(this.time*2+1)%n.length],e.stroke();for(var f=0;f<i;f++)if(o=t[f].x-t[i-1].x,u=t[f].y-t[i-1].y,a=o*o+u*u,a<2e3&&Math.random()<.15)e.beginPath(),e.moveTo(s.x+o*r,s.y+u*r),e.lineTo(s.x-o*r,s.y-u*r),e.strokeStyle=n[(this.time*2+1)%n.length],e.stroke()},this.construct(e)},e}(Sketch.brush),typeof Sketch=="undefined"&&(Sketch={}),typeof Sketch.brush=="undefined"&&(Sketch.brush={}),Sketch.brush=function(e){e.mixer=function(e){var n=this,r,i,s={};this.construct=function(e){this.alpha=e.alpha.value||100,this.colors=e.colors,this.rotate=e.rotate||{min:0,max:0},this.radius=e.radius.value||30,this.bristles=e.bristles||30;var t=this.radius/3;this.flow=e.flow||{min:t,max:t},this.blend=e.blend||.97,this.color_noise=e.color_noise||!1,e.callback(this)},this.drawStart=function(){var e=this.ctx,n=e.canvas;s[this.finger]=t(this);if(typeof i=="undefined"||i.length!==n.width*n.height*4)r=e.getImageData(0,0,n.width,n.height),i=r.data},this.drawEnd=function(){delete s[this.finger]},this.draw=function(){if(s[this.finger])for(var e=this.blend,t=1-e,r=s[this.finger],o=r.length,u=this.ctx.canvas.width,a=this.ctx.canvas.height,l=this.rotate.min,c=this.rotate.max,l=l===0&&c===0?0:(c-l)*Math.random()+l,c=this.px>>0,h=this.py>>0,p=0;p<o;p++){var v=r[p],m=v.color;if(l)var g=Math.cos(l)*v.x-Math.sin(l)*v.y>>0,y=Math.sin(l)*v.x+Math.cos(l)*v.y>>0;else g=v.x,y=v.y;v=((h+y)*u+(c+g))*4;if(!(c+g<0)&&!(c+g>u-1)&&!(h+y<0)&&!(h+y>a-1))if(i[v+3]){var g=i[v+0],y=i[v+1],b=i[v+2],w=i[v+3],E=m.r=m.r*e+g*t,S=m.g=m.g*e+y*t,x=m.b=m.b*e+b*t,m=m.a*n.alpha/100;i[v+0]=(E*m+g*(255-m))/255,i[v+1]=(S*m+y*(255-m))/255,i[v+2]=(x*m+b*(255-m))/255,m=m/255*w+m,m>w&&(i[v+3]=m)}else i[v+0]=m.r,i[v+1]=m.g,i[v+2]=m.b,i[v+3]=m.a}},this.postprocess=function(){this.ctx.putImageData(r,0,0)},this.construct(e)};var t=function(e){var t=[],n={},r=e.radius*e.bristles,i=e.radius/2>>0,s=e.colors[(++e.time*2+1)%e.colors.length];e.brushColor=s.substr(5,s.length-6).split(",").map(function(e){return parseInt(e)}),e.brushColor[3]*=255;for(var o=0;o<r;o++){e.color_noise&&(s=e.colors[(++e.time*2+1)%e.colors.length],e.brushColor=s.substr(5,s.length-6).split(",").map(function(e){return parseInt(e)}),e.brushColor[3]*=255);var u=Math.random()*i,s=1.5-u/i,a=Math.random()*2*Math.PI,f=Math.sin(a)*u+i+.5>>0,u=Math.cos(a)*u+i+.5>>0,a=f+""+u;typeof n[a]=="undefined"&&(n[a]=!0,t.push({x:f-i,y:u-i,color:{r:e.brushColor[0],g:e.brushColor[1],b:e.brushColor[2],a:255*s}}))}return t};return e}(Sketch.brush),typeof Sketch=="undefined"&&(Sketch={}),typeof Sketch.brush=="undefined"&&(Sketch.brush={}),Sketch.brush=function(e){e.radial=function(e){var t=Sketch.configure.createGradient;this.bitmap={},this.construct=function(e){var n=e.radius.value||30,r=this.bitmap=document.createElement("canvas"),i=this.bitmap.ctx=r.getContext("2d"),s=r.width=n*2,r=r.height=n*2,o=i.createRadialGradient(n,n,0,n,n,n);o.addColorStop(0,"rgba(0,0,0,1)"),o.addColorStop(1,"rgba(0,0,0,0)"),i.arc(n,n,n,0,Math.PI*2,!0),i.fillStyle=o,i.fill(),i.globalCompositeOperation="source-in",i.fillStyle=t(i,0,0,s,r,e),i.fillRect(0,0,s,r),this.alpha=e.alpha.value||100,this.colors=e.colors,this.color_mode=e.color_mode||"cycle",this.composite=e.composite,this.radius=n,this.flow=e.flow||[0,Math.max(2,n/5)],e.callback(this)},this.draw=function(){if(this.color_mode==="cycle"){var e=this.colors[(this.time*2+1)%this.colors.length];e!==this.bitmap.ctx.fillStyle&&(this.bitmap.ctx.fillStyle=e,this.bitmap.ctx.fillRect(0,0,this.bitmap.width,this.bitmap.height))}this.ctx.drawImage(this.bitmap,this.x-this.radius,this.y-this.radius)},this.construct(e)};var t={};return e.image=function(e){var n=this,r=new Random(1);return this.bitmap={},this.construct=function(e){this.radius=e.radius.value||20,this.alpha=e.alpha.value||100,this.colors=e.colors,this.color_mode=e.color_mode||"cycle",this.composite=e.composite,this.interval=e.interval||void 0,this.rotate=e.rotate||{min:0,max:0},this.scale=e.scale||{min:1,max:1},this.translate=e.translate||{min:0,max:0},this.flow=e.flow||{min:this.radius/3,max:this.radius/3},this.pollock=e.pollock||!1;if(this.src=e.src||void 0)if(t[this.src])this.image=t[this.src];else{var n=widgets.Loader("Loading brush...");this.image=new Image,this.image.onload=n.stop,this.image.src=this.src,t[this.src]=this.image}e.callback(this)},this.drawStart=function(){var e=n.bitmap,t=this.finger,r=n.finger,i=n.scale.max*n.radius>>0,s=document.createElement("canvas"),o=s.getContext("2d");if(n.src){var u=s.width=n.image.width=i,s=s.height=n.image.height=i;o.drawImage(n.image,0,0,i,i)}else{for(var u=s.width=i,s=s.height=i,i=o.getImageData(0,0,u,s),a=i.data,l=n.radius*25,c=n.radius/2,h=0;h<l;h++){var p=Math.random()*c,d=1.5-p/c,v=Math.random()*2*Math.PI,m=Math.sin(v)*p+c+.5>>0,p=Math.cos(v)*p+c+.5>>0;m>=u||m<=0||p>=s||p<=0||(a[(p*u+m)*4+3]=255*d)}o.putImageData(i,0,0)}o.globalCompositeOperation="source-in",o.fillStyle=Sketch.configure.createGradient(o,0,0,u,s,n),o.fillRect(0,0,u,s),n.ratio=1/((u+s)/2/n.radius),n.bitmap[r]=o,e[t]=o},this.draw=function(){var e=this.ratio,t=this.finger;if(this.bitmap[t]){var t=this.bitmap[t],n=t.canvas.width,i=t.canvas.height,s=n/2,o=i/2,u=this.translate.min,a=this.translate.max;if(u===0&&a===0)var f=0,u=0;else f=(a-u)*r.toDouble()+u,u=(a-u)*r.toDouble()+u;var a=this.scale.min,l=this.scale.max,e=a===1&&l===1?e:((l-a)*r.toDouble()+a)*e,a=this.rotate.min,l=this.rotate.max,a=a===0&&l===0?0:(l-a)*r.toDouble()+a;this.pollock||this.ctx.save(),this.color_mode==="cycle"&&(l=this.colors[(this.time*2+1)%this.colors.length],l!==t.fillStyle)&&(t.fillStyle=l,t.fillRect(0,0,n,i)),this.ctx.translate(this.x-s*e-f,this.y-o*e-u),e!==1&&this.ctx.scale(e,e),a!==0&&(this.ctx.translate(s,o),this.ctx.rotate(a*DEG_RAD),this.ctx.translate(-s,-o)),this.ctx.drawImage(t.canvas,0,0),this.pollock||this.ctx.restore()}},this.drawEnd=function(){delete this.bitmap[this.finger]},this.construct(e)},e}(Sketch.brush),typeof Sketch=="undefined"&&(Sketch={}),typeof Sketch.brush=="undefined"&&(Sketch.brush={}),Sketch.brush=function(e){return e.smooth=function(e){var t={},n=function(e,n,r,i){var s=.2*t[n].thickness,o=t[n].cos,u=t[n].sin,a=t[n].color;e.beginPath(),e.fillStyle=a,e.strokeStyle=a,e.arc(r,i,s,0,Math.PI*2,!0),e.moveTo(t[n].x+o,t[n].y+u),e.lineTo(r+.2*o,i+.2*u),e.lineTo(r-.2*o,i-.2*u),e.lineTo(t[n].x-o,t[n].y-u),e.lineTo(t[n].x+o,t[n].y+u),e.fill(),e.stroke()};this.construct=function(e){this.alpha=e.alpha.value||100,this.colors=e.colors,this.composite=e.composite||"paint",this.flow=e.flow||[0,0],e.callback(this)},this.drawStart=function(){var e=this.finger;t[e]={},t[e].x=this.x,t[e].y=this.y,t[e].px=this.x,t[e].py=this.y,t[e].time=(new Date).getTime(),t[e].vectorx=0,t[e].vectory=0,t[e].thickness=0,t[e].rotation=Math.PI/2},this.draw=function(){var e=this.finger,r=this.colors[(this.time*2+1)%this.colors.length];if(typeof t[e]!="undefined"){var i=this.x-t[e].px,s=this.y-t[e].py,o=(new Date).getTime();if(Math.abs(i)>5||Math.abs(s)>5){i*t[e].vectorx+s*t[e].vectory<0&&(n(this.ctx,e,this.px,this.py),t[e].x=t[e].px=this.px,t[e].y=t[e].py=this.py,t[e].rotation+=Math.PI,t[e].thickness*=.2),t[e].x+=.42*(this.x-t[e].x),t[e].y+=.42*(this.y-t[e].y);var u=t[e].x-t[e].px,a=t[e].y-t[e].py,l=Math.sqrt(u*u+a*a),u=l!==0?Math.PI/2+Math.atan2(a,u):0,a=t[e].thickness+.42*(.25+.2*l-t[e].thickness),c=Math.sin(t[e].rotation),h=Math.cos(t[e].rotation),p=Math.sin(u),d=Math.cos(u),v=t[e].thickness*c,m=t[e].thickness*h;p*=a,d*=a,c*=.33*l;var g=-0.33*l*h,l=t[e].px+m+c,h=t[e].py+v+g,c=t[e].px-m+c,g=t[e].py-v+g,y=this.ctx;y.beginPath(),y.fillStyle=r,y.strokeStyle=r,y.moveTo(t[e].px+m,t[e].py+v),y.quadraticCurveTo(l,h,t[e].x+d,t[e].y+p),y.lineTo(t[e].x-d,t[e].y-p),y.quadraticCurveTo(c,g,t[e].px-m,t[e].py-v),y.lineTo(t[e].px+m,t[e].py+v),y.fill(),y.stroke(),t[e].color=r,t[e].px=t[e].x,t[e].py=t[e].y,t[e].rotation=u,t[e].thickness=a,t[e].vectorx=i,t[e].vectory=s,t[e].cos=d,t[e].sin=p,t[e].time=o}}},this.drawEnd=function(){var e=this.finger;typeof t[e]!="undefined"&&(n(this.ctx,e,this.x,this.y),delete t[e])},this.construct(e)},e}(Sketch.brush),typeof Sketch=="undefined"&&(Sketch={}),typeof Sketch.brush=="undefined"&&(Sketch.brush={}),Sketch.brush=function(e){return e.spirograph=function(e){var t=!0,n=0,r,i,s=0;this.construct=function(e){this.alpha=e.alpha.value||100,this.colors=e.colors,this.composite=e.composite||"paint",this.lineWidth=e.lineWidth.value||1,this.radius=e.radius.value||30,this.flow=e.flow||[0,10],this.interval=e.interval||1e3/60,this.contract=e.contract||0,this.outerRadius=e.outerRadius.value||10.2,this.innerRadius=e.innerRadius.value||3.2,this.speed=e.speed.value||20,s=this.radius,e.callback(this)},this.draw=function(){var e=this.ctx,o=this.colors,u=this.innerRadius,a=this.outerRadius;this.contract===0&&(s=this.radius),e.lineWidth=this.lineWidth;for(var l=this.speed;l--;){if(s>this.radius||s<0)t=!t;t?(n-=1,s-=this.contract):(n+=1,s+=this.contract);var c=(a-u)/u*n,h=(a-u)*Math.cos(n)+s*Math.cos(c),c=(a-u)*Math.sin(n)-s*Math.sin(c);h+=this.x,c+=this.y,r&&(e.beginPath(),e.moveTo(r,i),e.lineTo(h,c),e.strokeStyle=o[(this.time*2+1)%o.length],e.stroke()),r=h,i=c}i=r=void 0},this.construct(e)},e}(Sketch.brush),typeof Sketch=="undefined"&&(Sketch={}),typeof Sketch.brush=="undefined"&&(Sketch.brush={}),Sketch.brush=function(e){e.spraypaint=function(e){var n=this,r=Math.PI*2,i=new Random(1),s=t(e),o=0,u=0,a=Math.PI*.5,f={},l=[],h={},p={},d={},v=0,m=2,g="#f00";this.construct=function(e){this.alpha=e.alpha.value||100,this.colors=e.colors,this.color_mode=e.color_mode||"cycle",this.composite=e.composite,this.interval=e.interval||1e3/60,this.flow=e.flow||[0,0],this.radius=e.radius.value||50,this.enable(),e.callback(this)},this.disable=function(){n.active=!1,window.removeEventListener("deviceorientation",n.deviceOrientation,!1)},this.enable=function(){n.active=!0,window.addEventListener("deviceorientation",n.deviceOrientation,!1)},this.dripInterval=function(){for(var e=0;e<l.length;e++){var t=l[e];t.update(),t.gamma<t.threshold&&t.beta<t.threshold||(l.splice(e,1),--e)}n.active&&requestAnimationFrame(n.dripInterval)},this.deviceOrientation=function(e){if(typeof window.orientation!="undefined"){var t=window.orientation/180;t===.5?(t=-(e.gamma/90),e=e.beta/90):t===-0.5?(t=e.gamma/90,e=-(e.beta/90)):t===1?(t=-(e.beta/90),e=-(e.gamma/90)):(t=e.beta/90,e=e.gamma/90),v=e*5,m=t*5}else m=e.beta/90*5+1.5,v=e.gamma/90*5},this.drawStart=function(){var e=this.finger;h[e]={x:this.x,y:this.y},f[e]=0,d[e]={x:this.x,y:this.y},p[e]=0},this.drawEnd=function(){var e=this.finger;delete h[e],delete f[e],delete d[e],delete p[e],u=o=0},this.draw=function(){var e=this.finger;if(h[e]){var t=this.colors[(this.time*2+1)%this.colors.length];if(g!==t){var n=s.canvas;s.globalCompositeOperation="source-in",s.fillStyle=t,s.fillRect(0,0,n.width,n.height),g=t}t=this.x-d[e].x,n=this.y-d[e].y,p[e]=Math.sqrt(t*t+n*n),d[e]={x:this.x,y:this.y},t=this.x-h[e].x,n=this.y-h[e].y,Math.sqrt(t*t+n*n)<20?++f[e]===15&&(f[e]=0,l.push(new y({x:this.x,y:this.y}))):(f[e]=0,h[e]={x:this.x,y:this.y}),e=Math.max((30-p[e])/30,0),e*=1*o,u<a&&(o=Math.sin(u),u+=.1);var t=s.canvas.width*.5,n=s.canvas.height*.5,c=t*e,v=n*e;this.ctx.save(),this.ctx.translate(this.x-c,this.y-v),this.ctx.scale(e,e),this.ctx.translate(t,n),this.ctx.rotate(i.toDouble()*r),this.ctx.translate(-t,-n),this.ctx.globalAlpha=this.alpha/100,this.ctx.drawImage(s.canvas,0,0),this.ctx.restore()}};var y=function(e){var t=n.ctx,s=n.composite==="disco",o=Sketch.configure.define.composite(n.composite),u=n.time,a=n.alpha,f=1,l=n.radius,c=i.toDouble()*l*.05+1,h=c/l*5,p=i.toDouble()*c,d=0;this.color=g,this.threshold=l*i.toDouble(),this.update=function(){f-=.005,f<.5&&(f=.5);var c=f*h,g=l/2,y=g*c,b=l/2*c;t.save(),t.globalAlpha=n.alpha/100,t.globalCompositeOperation=s?u++%2===0?"lighter":"source-over":o,t.translate(e.x-y+p,e.y-b+d),t.scale(c,c),t.globalAlpha=a/100,t.beginPath(),t.fillStyle=this.color,t.arc(g,l,g,0,r,!0),t.fill(),t.restore(),p+=i.toDouble()*2-1+v,d+=m,this.beta++,this.gamma++},this.beta=this.gamma=0};requestAnimationFrame(this.dripInterval),this.construct(e)};var t=function(e){var t=e.radius.value,n=document.createElement("canvas"),r=n.getContext("2d"),i=new Image;return i.onload=function(){n.width=i.width=t,n.height=i.height=t,r.drawImage(i,0,0,t,t)},i.src="./media/brush/_/73.png",r};return e}(Sketch.brush),typeof Sketch=="undefined"&&(Sketch={}),typeof Sketch.brush=="undefined"&&(Sketch.brush={}),Sketch.brush=function(e){return e.calligraphy=function(e){this.construct=function(e){this.alpha=e.alpha.value||100,this.colors=e.colors,this.composite=e.composite||"paint",this.radius=e.radius.value||30,this.flow=e.flow||[0,0],e.callback(this)},this.draw=function(){var e=this.ctx,t=this.colors,n=this.radius;e.beginPath(),e.lineCap="round",e.moveTo(this.px,this.py),e.lineTo(this.px+n,this.py-n/2),e.lineTo(this.x+n,this.y-n/2),e.lineTo(this.x,this.y),e.closePath(),e.strokeStyle=t[(this.time*2+1)%t.length],e.stroke(),e.fillStyle=t[(this.time*2+1)%t.length],e.fill()},this.construct(e)},e.pencil=function(e){this.construct=function(e){this.alpha=e.alpha.value||100,this.colors=e.colors,this.composite=e.composite||"paint",this.radius=e.radius.value||30,this.flow=e.flow||[0,0],e.callback(this)},this.draw=function(){var e=this.ctx,t=this.colors,n=this.radius;e.beginPath(),e.lineCap="round",e.lineWidth=n,e.moveTo(this.px,this.py),e.lineTo(this.x,this.y),e.strokeStyle=t[(this.time*2+1)%t.length],e.stroke()},this.construct(e)},e.string=function(e){var t={};this.construct=function(e){this.alpha=e.alpha.value||100,this.colors=e.colors,this.composite=e.composite||"paint",this.lineWidth=e.lineWidth.value||1,this.flow=e.flow||[0,0],this.time=0,e.callback(this)},this.preprocess=function(){var e=this.ctx,n=this.colors,r=Sketch.events.brush.batches,i=!0,s,o;e.beginPath(),e.lineWidth=this.lineWidth,e.lineJoin="round",e.lineCap="round";for(var u in r){var a=r[u];(a=a[a.length-1])?t[u]=a:a=t[u],i&&(e.moveTo(s||a.x-.5,o||a.y-.5),i=!1),e.lineTo(a.x,a.y),s=a.x,o=a.y}e.closePath(),e.strokeStyle=n[(++this.time*2+1)%n.length],e.stroke()},this.construct(e)},e.hair=function(e){var t=new Random(1);this.construct=function(e){this.alpha=e.alpha.value||100,this.colors=e.colors,this.composite=e.composite||"paint",this.lineWidth=e.lineWidth.value||1,this.radius=e.radius.value||30,this.flow=e.flow||[0,10],this.lookback=e.lookback||10,e.callback(this)},this.draw=function(){var e=this.ctx,n=this.path,r=this.colors,i=this.radius,s=i*2,o=n.length;e.lineCap="round",e.lineWidth=this.lineWidth;for(var u=1;u<o;u++)if(!(n.length-this.lookback>u)){var a=n[u];e.beginPath(),e.moveTo(this.px,this.py),e.bezierCurveTo(a.x-t.doubleRange(0,s),a.y-t.doubleRange(0,s),a.x,a.y,a.x,a.y),e.bezierCurveTo(a.x+t.doubleRange(0,i),a.y,a.x,a.y-t.doubleRange(0,i),a.x+t.doubleRange(-s,s),a.y+t.doubleRange(-i,i)),e.strokeStyle=r[(this.time*2+1)%r.length],e.stroke()}},this.construct(e)},e}(Sketch.brush);var clone=function(e){if(!e||typeof e!="object")return e;var t=new e.constructor,n;for(n in e)t[n]=!e[n]||typeof e[n]!="object"?e[n]:clone(e[n]);return t};typeof Sketch=="undefined"&&(Sketch={}),Sketch=function(e){var t="Difference,Exclusion,Hue,Saturation,Color,Luminosity,Darker,Lighter,Dissolve,Additive,Subtractive,Multiply,ColorBurn,LinearBurn,Screen,ColorDodge,LinearDodge,Overlay,SoftLight,HardLight,VividLight,LinearLight,PinLight,HardMix".split(","),n={erase:"destination-out",paint:"source-over",multiply:"darker",light:"lighter"};e.configure={save:function(){var t={},n;for(n in e.configure){var i=e.configure[n];r[n]||typeof i!="function"&&(t[n]=clone(i))}i=clone(ToolBuilder.presetCache);for(n in i)delete i[n].colors,t[n]=i[n];return n=clone(ToolBuilder.preset),delete n.colors,t[n.id]=n,JSON.stringify(t)},restore:function(t){if(t&&(t=JSON.parse(t)))for(var n in t)e.configure[n]=t[n]},reset:function(){for(var t in i){var n=i[t];r[t]||typeof n!="function"&&(e.configure[t]=clone(n))}n=ToolBuilder.presetCache;for(t in n)n[t]=clone(i[t]);var s=ToolBuilder.presets;for(t in s)n=s[t],ToolBuilder.presets[t]=clone(i[n.id]);ToolBuilder.preset=ToolBuilder.presets[0],e.configure.setTool(),ToolBuilder.configure(),localStorage.setItem("configure","")},styles:function(t){if(typeof t=="undefined"){var n=e.configure.styles(Sketch.style.colors),r=e.configure.styles(Sketch.style.gradients,n);e.configure.colors=n,e.configure.gradients=r}var n={},i;for(i in t)r=ToolBuilder.hashString(t[i]),n[r]=t[i];return n},createGradient:function(e,t,n,r,i,s){if(s.composite==="erase")return"#000";if(s.color_mode==="cycle")return e=s.colors,e[((s.time||0)*2+1)%e.length];if(s.color_mode==="radial")var o=(t+r)/2,u=(n+i)/2,t=Math.max(Math.abs(t-r),Math.abs(n-i)),o=e.createRadialGradient(o,u,0,o,u,t);else o=e.createLinearGradient(t,n,r,i);if(e=s.colors){for(s=0;s<e.length;s+=2)o.addColorStop(e[s],e[s+1]);return o}},define:{composite:function(e,t){return e==="disco"?t%2===0?"lighter":"source-over":n[e]||"source-over"}},setTool:function(){var e=ToolBuilder.preset;Sketch.tool&&Sketch.tool.disable(),Sketch.configure.setStyle(),Sketch.tool=Sketch.events[e.event],Sketch.tool.load(e),Sketch.tool.enable()},setStyle:function(e){var e=e||ToolBuilder.preset,n=e.color_noise;if(e.fill.type==="gradient")for(var r=e.fill.gradient.split(","),i=0;i<r.length;i+=2)r[i]=parseFloat(r[i]),r[i+1]=parseInt("0x"+r[i+1]);else r=parseInt("0xFF"+e.fill.color),r=[0,r,1,r];if(e.color_mode==="cycle"||!e.color_mode){for(var i=[],s=0;s<r.length;s+=2)i.push(r[s]*.5),i.push(r[s+1]);for(s=r.length-1;s>0;s-=2)i.push(1-r[s-1]*.5),i.push(r[s]);r=i}e.colors=Gradient.getNoise({dna:r,length:1e3,resolution:1,blend:t[5],H:n?10:0,S:n?20:0,L:n?10:0})},typesDisplay:{"clamp-float":"x","clamp-degree":"","px-float":"px","clamp-px":"px",px:"px","%":"%"},types:{"clamp-float":"slide","clamp-degree":"slide","clamp-px":"slide","px-float":"slide",integer:"slide","float":"slide",px:"slide","%":"slide","boolean":"toggle",list:"list",style:"style"},defaults:{alpha:"%",color_mode:["radial","linear","cycle"],composite:["erase","paint","light","disco"],movement:["drag","placement","repeat"],pollock:"boolean",tolerance:"%",antialias:"boolean",contiguous:"boolean",lineWidth:"px-float",radius:"px",rotate:"clamp-degree",scale:"clamp-float",translate:"clamp-px",outerRadius:"float",innerRadius:"float",speed:"integer",sides:"integer",slope:"float",coils:"integer",spread:"%",points:"integer",m:"integer",n1:"float",n2:"float",n3:"float",color_noise:"boolean"},ellipse:{id:"ellipse",event:"shape",tool:"shape",type:"ellipse",composite:"paint",movement:"placement",fill:{type:"gradient",color:"fff000",gradient:"0,ffff5db1,0.5,ffef017c,1,ffef017c"},color_mode:"radial",color_noise:!0,alpha:{value:100,clamp:{max:100,min:0}}},rectangle:{id:"rectangle",event:"shape",tool:"shape",type:"rectangle",composite:"paint",movement:"placement",fill:{type:"gradient",color:"fff000",gradient:"0,ffff5db1,0.5,ffef017c,1,ffef017c"},color_mode:"radial",color_noise:!0,alpha:{value:100,clamp:{max:100,min:0}}},polygon:{id:"polygon",event:"shape",tool:"shape",type:"polygon",composite:"paint",movement:"placement",fill:{type:"gradient",color:"fff000",gradient:"0,ffff0000,0.25,ffffff00,0.5,ffffff00,0.75,ff00ff00,1,ff00ff00"},noise:!0,color_mode:"radial",color_noise:!0,alpha:{value:100,clamp:{min:1,max:100}},sides:{value:5,clamp:{min:1,max:25}}},gear:{id:"gear",event:"shape",tool:"shape",type:"gear",composite:"paint",movement:"placement",fill:{type:"gradient",color:"fff000",gradient:"0,ff2c539e,0.5,ff2c539e,1,ff2c539e"},color_mode:"radial",color_noise:!0,alpha:{value:100,clamp:{min:1,max:100}},sides:{value:30,clamp:{min:2,max:100}},slope:{value:1.1,clamp:{min:.001,max:5}}},star:{id:"star",event:"shape",tool:"shape",type:"star",composite:"paint",movement:"placement",fill:{type:"gradient",color:"fff000",gradient:"0,ffcdeb8b,0.5,ffcdeb8b,1,ffcdeb8b"},color_mode:"radial",color_noise:!0,alpha:{value:100,clamp:{min:1,max:100}},sides:{value:5,clamp:{min:2,max:100}},slope:{value:.5,clamp:{min:-10,max:10}}},burst:{id:"burst",event:"shape",tool:"shape",type:"burst",composite:"paint",movement:"placement",fill:{type:"gradient",color:"fff000",gradient:"0,ff9c2224,0.09,ffc42d25,0.18,ffc42d25,0.255,ffe23f30,0.33,ffe23f30,0.415,ffef5d41,0.5,ffef5d41,0.55,fff38d4e,0.6,fff38d4e,0.67,fff59a3a,0.74,fff59a3a,0.815,fffabf58,0.89,fffabf58,0.945,fffccfa0,1,fffccfa0"},color_mode:"radial",color_noise:!0,alpha:{value:100,clamp:{min:1,max:100}},sides:{value:5,clamp:{min:2,max:100}},slope:{value:.001,clamp:{min:-10,max:10}}},radialburst:{id:"radialburst",event:"shape",tool:"shape",type:"radialburst",composite:"paint",movement:"placement",fill:{type:"gradient",color:"fff000",gradient:"0,ff9c2224,0.09,ffc42d25,0.18,ffc42d25,0.255,ffe23f30,0.33,ffe23f30,0.415,ffef5d41,0.5,ffef5d41,0.55,fff38d4e,0.6,fff38d4e,0.67,fff59a3a,0.74,fff59a3a,0.815,fffabf58,0.89,fffabf58,0.945,fffccfa0,1,fffccfa0"},color_mode:"radial",color_noise:!0,alpha:{value:100,clamp:{min:1,max:100}},sides:{value:12,clamp:{min:1,max:100}},slope:{value:.5,clamp:{min:-10,max:10}}},spiral:{id:"spiral",event:"shape",tool:"shape",type:"spiral",composite:"paint",movement:"placement",fill:{type:"gradient",color:"fff000",gradient:"0,ff607e80,0.25,ff9fd962,0.5,ff9fd962,0.75,fff3fa58,1,fff3fa58"},color_mode:"radial",color_noise:!0,alpha:{value:100,clamp:{min:1,max:100}},sides:{value:10,clamp:{min:1,max:20}},coils:{value:1,clamp:{min:1,max:5}},spread:{value:25,clamp:{min:1,max:100}}},supershape:{id:"supershape",event:"shape",tool:"shape",type:"supershape",composite:"paint",movement:"repeat",fill:{type:"gradient",color:"ff0000",gradient:"0,ff15aeeb,0.3333333,ff8157ba,0.50818891461434,ffed008a,0.6717635,fff47961,1,fffbf239"},color_mode:"radial",color_noise:!0,alpha:{value
:5,clamp:{min:1,max:100}},points:{value:500,clamp:{min:50,max:1e3}},m:{value:39,clamp:{min:.1,max:50}},n1:{value:1,clamp:{min:.1,max:15}},n2:{value:.9,clamp:{min:.1,max:15}},n3:{value:.25,clamp:{min:.1,max:15}}},string:{id:"string",event:"brush",type:"string",composite:"paint",fill:{type:"gradient",color:"fff000",gradient:"0,fffeffff,0.353,ffa0d8ef,1,ffa0d8ef"},color_noise:!0,alpha:{value:100,clamp:{min:1,max:100}},flow:{min:1,max:10},lineWidth:{value:.25,clamp:{min:.01,max:1}}},spirograph:{id:"spirograph",event:"brush",type:"spirograph",composite:"paint",fill:{type:"gradient",color:"fff000",gradient:"0,ff4c36b3,0.15,ffa1207d,0.24734265,fff60a48,0.3446853,fffa7e3b,0.43132864374999996,fffff32e,0.5326573,ff87f874,0.6721152827415,ff0ffebb,0.8,ff26a0be,1,ff3d43c1"},color_noise:!0,alpha:{value:12,clamp:{min:1,max:100}},flow:{min:1,max:Infinity},lineWidth:{value:1.5,clamp:{min:.1,max:10}},radius:{value:100,clamp:{min:1,max:150}},contract:.005,outerRadius:{value:100,clamp:{min:1,max:100}},innerRadius:{value:58.08,clamp:{min:1,max:100}},speed:{value:100,clamp:{min:1,max:100}}},chrome:{id:"chrome",event:"brush",type:"chrome",composite:"paint",fill:{type:"gradient",color:"fff000",gradient:"0,ff45484d,0.5,ff000000,1,ff000000"},color_noise:!0,alpha:{value:15,clamp:{min:1,max:100}},flow:{min:1,max:100},lineWidth:{value:2,clamp:{min:.1,max:10}},radius:{value:20,clamp:{min:1,max:100}},lookback:2e3},shader:{id:"shader",event:"brush",type:"shaded",composite:"paint",fill:{type:"gradient",color:"FF0000",gradient:"0,ff000022,0.175,ff191024,0.28333335,ff322027,0.3916667,ff4c322d,0.5000000499999999,ff664433,0.6083334,ff8a5d3d,0.71666675,ffae7747,0.8250001,ffce9056,1,ffeeaa66"},color_noise:!0,alpha:{value:75,clamp:{min:1,max:100}},flow:{min:1,max:100},lineWidth:{value:.5,clamp:{min:.1,max:10}},radius:{value:40,clamp:{min:1,max:100}},lookback:2e3},sketchy:{id:"sketchy",event:"brush",type:"sketchy",composite:"paint",fill:{type:"gradient",color:"fff000",gradient:"0,ff7d7e7d,0.5,ff0e0e0e,1,ff0e0e0e"},color_noise:!0,alpha:{value:50,clamp:{min:1,max:100}},flow:{min:1,max:100},lineWidth:{value:3,clamp:{min:.1,max:10}},radius:{value:40,clamp:{min:1,max:100}},lookback:2e3},web:{id:"web",event:"brush",type:"web",composite:"paint",fill:{type:"gradient",color:"FF0000",gradient:"0,fffa6c0c,0.04,fff6300a,0.08,fff6300a,0.145,ffd11b7e,0.21,ffd11b7e,0.28,ff7425b1,0.35,ff7425b1,0.42,ff0a62da,0.49,ff0a62da,0.56,ff00c000,0.63,ff00c000,0.715,fff6ef2a,0.8,fff6ef2a,0.9,fffa6c0c,1,fffa6c0c"},color_noise:!0,alpha:{value:25,clamp:{min:1,max:100}},flow:{min:1,max:100},lineWidth:{value:1,clamp:{min:.1,max:10}},radius:{value:150,clamp:{min:1,max:150}},lookback:2e3},fur:{id:"fur",event:"brush",type:"fur",composite:"paint",fill:{type:"gradient",color:"fff000",gradient:"0,ff7d7e7d,0.5,ff0e0e0e,1,ff0e0e0e"},color_noise:!0,alpha:{value:15,clamp:{min:1,max:100}},flow:{min:1,max:10},lineWidth:{value:.5,clamp:{min:.1,max:10}},radius:{value:250,clamp:{min:1,max:500}},lookback:2e3},hair:{id:"hair",event:"brush",type:"hair",composite:"paint",fill:{type:"gradient",color:"0fffff",gradient:"0.06567889822065,ff0c0126,0.1176747,ff19022a,0.22994306504649997,ff27032e,0.37598319999999996,ff43013a,0.43984393878431993,ff5f0046,0.544758,ff7e003a,0.6070303324195799,ff9e002f,0.7105123,ffce1129,0.77393466551848,fffe2323,0.8197397,fff6441a,0.8692658678592999,ffee6611,0.930715,fff68617,0.9802042847244999,ffffa61e"},color_noise:!0,alpha:{value:100,clamp:{min:1,max:100}},flow:{min:1,max:10},lineWidth:{value:.5,clamp:{min:.1,max:10}},radius:{value:50,clamp:{min:1,max:100}},lookback:20},pencil:{id:"pencil",event:"brush",type:"pencil",composite:"paint",fill:{type:"gradient",color:"0085c8",gradient:"0,ff9e0142,0.046,ff9e0142,0.091,ffd53e4f,0.136,ffd53e4f,0.182,fff46d43,0.227,fff46d43,0.273,fffdae61,0.318,fffdae61,0.364,fffee08b,0.409,fffee08b,0.455,ffffffbf,0.5,ffffffbf,0.546,ffe6f598,0.591,ffe6f598,0.636,ffabdda4,0.682,ffabdda4,0.727,ff66c2a5,0.773,ff66c2a5,0.818,ff3288bd,0.864,ff3288bd,0.909,ff5e4fa2,0.955,ff5e4fa2,1,ff5e4fa2"},color_noise:!1,alpha:{value:100,clamp:{min:1,max:100}},flow:{min:1,max:50},radius:{value:15,clamp:{min:1,max:100}}},eraser:{id:"eraser",event:"brush",type:"radial",composite:"erase",fill:{type:"color",color:"000000"},alpha:{value:5,clamp:{min:1,max:100}},flow:{min:1,max:1},radius:{value:20,clamp:{min:1,max:50}}},brush:{id:"brush",event:"brush",type:"radial",composite:"paint",fill:{type:"gradient",color:"e90808",gradient:"0,ff9c2224,0.09,ffc42d25,0.18,ffc42d25,0.255,ffe23f30,0.33,ffe23f30,0.415,ffef5d41,0.5,ffef5d41,0.55,fff38d4e,0.6,fff38d4e,0.67,fff59a3a,0.74,fff59a3a,0.815,fffabf58,0.89,fffabf58,0.945,fffccfa0,1,fffccfa0"},color_noise:!1,alpha:{value:5,clamp:{min:1,max:100}},flow:{min:1,max:1},radius:{value:20,clamp:{min:1,max:150}}},automater:{id:"automater",event:"brush",type:"image",composite:"disco",interval:1e3/60,fill:{type:"gradient",color:"1b0045",gradient:"0.06567889822065,ff0c0126,0.1176747,ff19022a,0.22994306504649997,ff27032e,0.37598319999999996,ff43013a,0.43984393878431993,ff5f0046,0.544758,ff7e003a,0.6070303324195799,ff9e002f,0.7105123,ffce1129,0.77393466551848,fffe2323,0.8197397,fff6441a,0.8692658678592999,ffee6611,0.930715,fff68617,0.9802042847244999,ffffa61e"},color_mode:"linear",color_noise:!0,alpha:{value:25,clamp:{min:1,max:100}},flow:{min:1,max:Infinity},rotate:{min:0,max:0,clamp:{min:0,max:360}},scale:{min:1,max:3,clamp:{min:.01,max:3}},translate:{min:0,max:200,clamp:{min:0,max:250}},radius:{value:150,clamp:{min:1,max:350}},pollock:!1,src:"./media/brush/_/73.png"},spraypaint:{id:"spraypaint",event:"brush",type:"spraypaint",composite:"paint",fill:{type:"gradient",color:"cc0000",gradient:"0.06567889822065,ff0c0126,0.1176747,ff19022a,0.22994306504649997,ff27032e,0.37598319999999996,ff43013a,0.43984393878431993,ff5f0046,0.544758,ff7e003a,0.6070303324195799,ff9e002f,0.7105123,ffce1129,0.77393466551848,fffe2323,0.8197397,fff6441a,0.8692658678592999,ffee6611,0.930715,fff68617,0.9802042847244999,ffffa61e"},color_noise:!1,alpha:{value:25,clamp:{min:1,max:100}},flow:{min:1,max:100},radius:{value:150,clamp:{min:50,max:250}},src:"./media/brush/_/73.png"},floodfill:{id:"floodfill",event:"brush",type:"floodfill",composite:{options:["erase","paint","light"],value:"paint"},fill:{type:"gradient",color:"fff000",gradient:"0,ff607e80,0.25,ff9fd962,0.5,ff9fd962,0.75,fff3fa58,1,fff3fa58"},color_mode:"radial",color_noise:!0,alpha:{value:100,clamp:{min:1,max:100}},tolerance:{value:7,clamp:{min:1,max:100}},antialias:!0,contiguous:!0,click:!0},oil:{id:"oil",event:"brush",type:"mixer",blend:.98,bristles:8,fill:{type:"gradient",color:"fff000",gradient:"0,ff607e80,0.25,ff9fd962,0.5,ff9fd962,0.75,fff3fa58,1,fff3fa58"},color_noise:!1,alpha:{value:100,clamp:{min:1,max:100}},flow:{min:1,max:1},radius:{value:50,clamp:{min:1,max:100}}},pastel:{id:"pastel",event:"brush",type:"mixer",blend:.97,bristles:35,fill:{type:"color",color:"fff000",gradient:"0,fffa6c0c,0.04,fff6300a,0.08,fff6300a,0.145,ffd11b7e,0.21,ffd11b7e,0.28,ff7425b1,0.35,ff7425b1,0.42,ff0a62da,0.49,ff0a62da,0.56,ff00c000,0.63,ff00c000,0.715,fff6ef2a,0.8,fff6ef2a,0.9,fffa6c0c,1,fffa6c0c"},rotate:{hidden:!0,min:0,max:360},radius:{value:25,clamp:{min:3,max:42}}},crayon:{id:"crayon",event:"brush",type:"image",composite:"paint",fill:{type:"gradient",color:"1b0045",gradient:"0,fffa6c0c,0.04,fff6300a,0.08,fff6300a,0.145,ffd11b7e,0.21,ffd11b7e,0.28,ff7425b1,0.35,ff7425b1,0.42,ff0a62da,0.49,ff0a62da,0.56,ff00c000,0.63,ff00c000,0.715,fff6ef2a,0.8,fff6ef2a,0.9,fffa6c0c,1,fffa6c0c"},color_noise:!1,alpha:{value:100,clamp:{min:1,max:100}},rotate:{hidden:!0,min:0,max:360},radius:{value:19,clamp:{min:3,max:42}}},streamer:{id:"streamer",event:"brush",type:"smooth",composite:"paint",fill:{type:"gradient",color:"ffff00",gradient:"0.06567889822065,ff005ee6,0.1176747,ff1912ea,0.22994306504649997,ff27032e,0.37598319999999996,ff43013a,0.43984393878431993,ff5f0046,0.544758,ff7e003a,0.6070303324195799,ff9e002f,0.7105123,ffce1129,0.77393466551848,fffe2323,0.8197397,fff6441a,0.8692658678592999,ffee6611,0.930715,fff68617,0.9802042847244999,ffffa61e"},color_noise:!0,alpha:{value:100,clamp:{min:1,max:100}},flow:{min:1,max:50}},calligraphy:{id:"calligraphy",event:"brush",type:"calligraphy",composite:"paint",fill:{type:"gradient",color:"1b0045",gradient:"0,ff000022,0.175,ff191024,0.28333335,ff322027,0.3916667,ff4c322d,0.5000000499999999,ff664433,0.6083334,ff8a5d3d,0.71666675,ffae7747,0.8250001,ffce9056,1,ffeeaa66"},color_noise:!1,alpha:{value:100,clamp:{min:1,max:100}},flow:{min:5,max:5},radius:{value:17,clamp:{min:1,max:50}}}};var r={defaults:!0,define:!0,types:!0,typesDisplay:!0},i=clone(e.configure);return e}(Sketch),typeof Sketch=="undefined"&&(Sketch={}),typeof Sketch.event=="undefined"&&(Sketch.event={}),Sketch.shape=function(e){var t=this,n=Sketch.configure.createGradient;this.active=e.active,this.cache=e.cache,this.ctx=e.layer0,this.device={},this.gestures=this.gid=0,this.rendering=!1,this.time=0,this.batches={},this.events={},this.enable=function(){this.disable(),this.device.useGesture="ontouchstart"in window&&this.device.movement!=="drag",this.events[this.gid]=t.device.useGesture?Event.add(this.active.canvas,"gesture",new this.record):Event.add(this.active.canvas,"drag",new this.record)},this.disable=function(){for(var e in this.events)this.events[e].remove(),delete this.events[e]},this.load=function(e){t.device.alpha=e.alpha.value||100,t.device.colors=e.colors,t.device.color_mode=e.color_mode||"cycle",t.device.composite=e.composite||"paint",t.device.movement=e.movement||"placement",t.device.type=e.type||"star",e.sides&&(t.device.sides=e.sides.value||5),e.slope&&(t.device.slope=e.slope.value||.5),e.coils&&(t.device.coils=e.coils.value||1),e.spread&&(t.device.spread=e.spread.value||2),e.points&&(t.device.points=e.points.value||250),e.m&&(t.device.m=e.m.value||39),e.n1&&(t.device.n1=e.n1.value||25),e.n2&&(t.device.n2=e.n2.value||215),e.n3&&(t.device.n3=e.n3.value||10)},this.record=function(){var e=t.gid;return function(n,s){var o=t.batches[s.id];o||(o=t.batches[s.id]=[],o.time=t.time);if(t.device.useGesture)if(s.state==="start")t.gestures++,t.events[++t.gid]=Event.add(t.active.canvas,"gesture",new t.record);else{s.state==="end"&&(t.gestures--,t.events[e].remove(),t.time=o.time,delete t.events[e]);var u={};u.pt1=s.touches[0],u.pt2=s.touches[1],u.rotation=s.rotation,u.state=s.state,o[0]=u}else{u={};if(t.device.movement==="drag"){u.pt1={x:r[s.id],y:i[s.id]},r[s.id]=s.x,i[s.id]=s.y;if(typeof u.pt1.x=="undefined")return;s.state==="up"&&(delete r[s.id],delete i[s.id])}else u.pt1={x:s.start.x,y:s.start.y};u.pt2={x:s.x,y:s.y},u.rotation=-Math.atan2(s.x-u.pt1.x,s.y-u.pt1.y)*RAD_DEG+180,u.state=s.state,o[0]=u}t.rendering||requestAnimationFrame(t.render)}};var r={},i={};this.render=function(){(new Date).getTime();var e=t.device,r=Sketch.configure.define,i=t.ctx;e.ctx=t.ctx,e.active=t.active,e.cache=t.cache,t.active.clearRect(0,0,i.canvas.width,i.canvas.height);for(var s in t.batches)for(var o=t.batches[s],u=0;u<o.length;u++){var a=o.shift(),f=a.state==="end"||a.state==="up";e.movement==="placement"&&(f?i=t.ctx:(i=t.active,o[0]=a)),i.save(),i.beginPath();if(t.device.useGesture)var l=a.pt1,h=a.pt2,p=(l.x+h.x)/2,d=(l.y+h.y)/2,v=h.x-l.x,m=h.y-l.y,g=Math.max(0,Math.sqrt(v*v+m*m)-75);else l=a.pt1,h=a.pt2,p=l.x,d=l.y,v=h.x-l.x,m=h.y-l.y,g=Math.max(0,Math.sqrt(v*v+m*m));i.translate(p,d),i.rotate(a.rotation*DEG_RAD),i.translate(-p,-d);switch(e.type){case"ellipse":Vector.Shapes.ellipse(i,p,d,g,g);break;case"rectangle":Vector.Shapes.rect(i,p-g,d-g,p+g,d+g);break;case"polygon":Vector.Shapes.polygon(i,p,d,g,e.sides>>0);break;case"gear":Vector.Shapes.gear(i,p,d,g,e.sides>>0,e.slope);break;case"star":Vector.Shapes.star(i,p,d,g,e.sides>>0,e.slope);break;case"burst":Vector.Shapes.burst(i,p,d,g,e.sides>>0,e.slope);break;case"radialburst":Vector.Shapes.radialBurst(i,p,d,g,e.sides>>0,e.slope);break;case"spiral":Vector.Shapes.spirals(i,p,d,g,e.sides>>0,e.coils,1-e.spread/100,e.colors);break;case"supershape":Vector.Shapes.superformula(i,p,d,g,e.points,e.m>>0,e.n1,e.n2,e.n3)}i.restore(),i.save(),i.globalAlpha=e.alpha/100,i.globalCompositeOperation=r.composite(e.composite,o.time),e.color_mode==="cycle"?(a=e.colors,i.fillStyle=a[(o.time++*2+1)%a.length]):i.fillStyle=t.device.useGesture?n(t.ctx,l.x,l.y,h.x,h.y,e):n(t.ctx,l.x-v,l.y-m,h.x,h.y,e),i.fill(),i.globalAlpha=.225,i.lineWidth=1,i.strokeStyle="rgba(0,0,0,1)",i.stroke(),i.restore();if(f){t.time=t.batches[s].time,delete t.batches[s];break}}e.postprocess&&e.postprocess(),typeof s=="undefined"?t.rendering=!1:(requestAnimationFrame(t.render),t.rendering=!0)}},typeof Sketch=="undefined"&&(Sketch={}),typeof Sketch.style=="undefined"&&(Sketch.style={}),Sketch.style.gradients="0,ffff0000,0.25,ffffff00,0.5,ffffff00,0.75,ff00ff00,1,ff00ff00 0,ff000000,0.167,ff000000,0.333,ffff0000,0.5,ffff0000,0.667,ffffff00,0.833,ffffff00,1,ffffff00 0,ff9e0142,0.046,ff9e0142,0.091,ffd53e4f,0.136,ffd53e4f,0.182,fff46d43,0.227,fff46d43,0.273,fffdae61,0.318,fffdae61,0.364,fffee08b,0.409,fffee08b,0.455,ffffffbf,0.5,ffffffbf,0.546,ffe6f598,0.591,ffe6f598,0.636,ffabdda4,0.682,ffabdda4,0.727,ff66c2a5,0.773,ff66c2a5,0.818,ff3288bd,0.864,ff3288bd,0.909,ff5e4fa2,0.955,ff5e4fa2,1,ff5e4fa2 0,fffa6c0c,0.04,fff6300a,0.08,fff6300a,0.145,ffd11b7e,0.21,ffd11b7e,0.28,ff7425b1,0.35,ff7425b1,0.42,ff0a62da,0.49,ff0a62da,0.56,ff00c000,0.63,ff00c000,0.715,fff6ef2a,0.8,fff6ef2a,0.9,fffa6c0c,1,fffa6c0c 0,ff9c2224,0.09,ffc42d25,0.18,ffc42d25,0.255,ffe23f30,0.33,ffe23f30,0.415,ffef5d41,0.5,ffef5d41,0.55,fff38d4e,0.6,fff38d4e,0.67,fff59a3a,0.74,fff59a3a,0.815,fffabf58,0.89,fffabf58,0.945,fffccfa0,1,fffccfa0 0.06567889822065,ff0c0126,0.1176747,ff19022a,0.22994306504649997,ff27032e,0.37598319999999996,ff43013a,0.43984393878431993,ff5f0046,0.544758,ff7e003a,0.6070303324195799,ff9e002f,0.7105123,ffce1129,0.77393466551848,fffe2323,0.8197397,fff6441a,0.8692658678592999,ffee6611,0.930715,fff68617,0.9802042847244999,ffffa61e 0,ff607e80,0.25,ff9fd962,0.5,ff9fd962,0.75,fff3fa58,1,fff3fa58 0,ff000000,0.1458854,ff000000,0.16999999999999998,ff000000,0.1941146,ff2b0700,0.21807295,ff560e00,0.2420313,ff8d1e00,0.25648445000000003,ffc42f00,0.2709376,ffd84600,0.2988543,ffec5e00,0.326771,ffde4800,0.3423439,ffd13200,0.3579168,ffe65c11,0.36890635,fffb8623,0.37989589999999995,fffd6919,0.39893229999999996,ffff4d0f,0.41796869999999997,ffc8511f,0.42578119999999997,ff915530,0.43359369999999997,ffc8aa97,0.44140619999999997,ffffffff,0.44921869999999997,ffffffff,0.47153435,ffffffff,0.49384999999999996,ffcdf1ff,0.5277562499999999,ff9be3ff,0.5616625,ff5aa2f1,0.7015583,ff1a61e4,0.7015583,ff1736a4,0.7653604744791199,ff150b64,0.8291626999999999,ff0a0532,0.91458135,ff000000 0.06279181820714999,ff030101,0.1259619,ff0d000a,0.1884619,ff180013,0.25096189999999996,ff65024e,0.31346189999999996,ffb2048a,0.37596189999999996,ffb20356,0.43846189999999996,ffb20323,0.5009619,ffb20319,0.5634619,ffb2030f,0.6259619,ff8d0230,0.6902920499999999,ff680251,0.7546222,ffaf1e4b,0.8247415191252401,fff63b46,0.8750691,ffa71e45,0.95131794026088,ff590245 0,ffffbbd9,0.125,ffdac1df,0.25,ffb6c8e6,0.375,ffc7c9b6,0.55625,ffd9cb86,0.7375,ff819569,0.8609375,ff295f4d,0.984375,ff17423c,1,ff06252c 0,ff15aeeb,0.3333333,ff8157ba,0.50818891461434,ffed008a,0.6717635,fff47961,1,fffbf239 0,ff5b2600,0.5,ff8b5600,1,ffbb8600 0,ff395fa5,0.17,ff51485c,0.277,ff51485c,0.292,ffa47472,0.307,ffa47472,0.332,ff632d02,0.449,ff632d02,0.554,ff494d47,0.695,ff494d47,0.843,ff2e2426,1,ff2e2426 0,ff285f88,0.165,ff9eb9d4,0.33,ff9eb9d4,0.495,fff9947e,0.66,fff9947e,0.83,ffe45d61,1,ffe45d61 0,ff000022,0.175,ff191024,0.28333335,ff322027,0.3916667,ff4c322d,0.5000000499999999,ff664433,0.6083334,ff8a5d3d,0.71666675,ffae7747,0.8250001,ffce9056,1,ffeeaa66 0.125,ff5b49af,0.25,ffa92c77,0.375,fff81040,0.5,fffb5f36,0.58653845,ffffae2d,0.75,ff9f9044,0.797337275,ff40725b 0,ffdb2962,0.3300781,ffe98431,0.54206764604626,fff8df00,0.6728514999999999,ffa4ac33,0.9999998999999999,ff517a67 0,fffe4d01,0.245,fffe7701,0.49,ffffa101,0.745,ff92a470,1,ff26a8e0 0,ff4c36b3,0.15,ffa1207d,0.24734265,fff60a48,0.3446853,fffa7e3b,0.43132864374999996,fffff32e,0.5326573,ff87f874,0.6721152827415,ff0ffebb,0.8,ff26a0be,1,ff3d43c1 0,ffca0020,0.125,ffca0020,0.25,fff4a582,0.375,fff4a582,0.5,ff92c5de,0.625,ff92c5de,0.75,ff0571b0,0.875,ff0571b0,1,ff0571b0 0,ffff67d0,0.036,ffff3e6c,0.072,ffff3e6c,0.127,ffff579e,0.181,ffff579e,0.247,ffff3958,0.313,ffff3958,0.368,ffff3958,0.422,ffff3958,0.482,ffff3958,0.542,ffff3958,0.584,ffff4189,0.627,ffff4189,0.681,ffc41c57,0.735,ffc41c57,0.795,ffff4246,0.855,ffff4246,0.928,ffc2275e,1,ffc2275e 0,ff4c4c4c,0.125,ff666666,0.253,ff666666,0.386,ff2c2c2c,0.502,ff000000,0.602,ff2b2b2b,0.759,ff2b2b2b,0.913,ff131313,1,ff131313 0,fff0f9ff,0.469,ffa1dbff,1,ffa1dbff 0,ff7abcff,0.44,ff4096ee,1,ff4096ee 0,ff00b7ea,0.5,ff009ec3,1,ff009ec3 0,fffeffff,0.353,ffa0d8ef,1,ffa0d8ef 0,ffb8e1fc,0.095,ff90bae4,0.253,ff90bae4,0.373,ff90bff0,0.502,ff6ba8e5,0.833,ffbdf3fd,1,ffbdf3fd 0,ff3b679e,0.25,ff2b88d9,0.5,ff207cca,0.75,ff7db9e8,1,ff7db9e8 0,ff6db3f2,0.25,ff54a3ee,0.5,ff3690f0,0.75,ff1e69de,1,ff1e69de 0,ffebf1f6,0.25,ffabd3ee,0.5,ff89c3eb,0.75,ffd5ebfb,1,ffd5ebfb 0,ffe4f5fc,0.25,ffbfe8f9,0.5,ff9fd8ef,0.75,ff2ab0ed,1,ff2ab0ed 0,ffd0e4f7,0.237,ff0a77d5,0.502,ff0a77d5,0.793,ff87bcea,1,ff87bcea 0,ffb3dced,0.25,ff29b8e5,0.5,ff29b8e5,0.75,ffbce0ee,1,ffbce0ee 0,ffb4ddb4,0.167,ff52b152,0.333,ff52b152,0.5,ff008a00,0.667,ff008a00,0.833,ff002400,1,ff002400 0,ffcdeb8e,0.5,ffa5c956,1,ffa5c956 0,ffc9de96,0.44,ff398235,1,ff398235 0,fff8ffe8,0.328,ffb7df2d,1,ffb7df2d 0,ffa9db80,0.5,ff96c56f,1,ff96c56f 0,ffb4e391,0.25,ff61c419,0.5,ff61c419,0.75,ffb4e391,1,ffb4e391 0,ff299a0b,0.5,ff299a0b,1,ff299a0b 0,ff006e2e,0.5,ff006e2e,1,ff006e2e 0,ffcdeb8b,0.5,ffcdeb8b,1,ffcdeb8b 0,ff8fc400,0.5,ff8fc400,1,ff8fc400 0,ffb6e026,0.5,ffabdc28,1,ffabdc28 0,ff9dd53a,0.25,ffa1d54f,0.5,ff80c217,0.75,ff7cbc0a,1,ff7cbc0a 0,ffe6f0a3,0.25,ffd2e638,0.5,ffc3d825,0.75,ffdbf043,1,ffdbf043 0,ffbfd255,0.25,ff8eb92a,0.5,ff72aa00,0.75,ff9ecb2d,1,ff9ecb2d 0,ffeeeeee,0.5,ffcccccc,1,ffcccccc 0,ffcedce7,0.5,ff596a72,1,ff596a72 0,ff606c88,0.5,ff3f4c6b,1,ff3f4c6b 0,ffb0d4e3,0.5,ff88bacf,1,ff88bacf 0,fff2f5f6,0.365,ffc8d7dc,1,ffc8d7dc 0,ffb8c6df,0.5,ff6d88b7,1,ff6d88b7 0,ffd2dfed,0.261,ffbed0ea,0.506,ffa6c0e3,0.618,ffbad0ef,0.751,ffbad0ef,0.876,ff799bc8,1,ff799bc8 0,ffe2e2e2,0.25,ffdbdbdb,0.5,ffd1d1d1,0.75,fffefefe,1,fffefefe 0,fff2f6f8,0.25,ffd8e1e7,0.5,ffb5c6d0,0.75,ffe0eff9,1,ffe0eff9 0,ffd4e4ef,0.5,ff86aecc,1,ff86aecc 0,fffefefd,0.423,ffaebf76,1,ffaebf76 0,ffe4efc0,0.5,ffabbd73,1,ffabbd73 0,ffa4b357,0.5,ff75890c,1,ff75890c 0,ff627d4d,0.5,ff1f3b08,1,ff1f3b08 0,ffffaf4b,0.5,ffff920a,1,ffff920a 0,fffac695,0.469,ffef8d31,1,ffef8d31 0,ffffc578,0.5,fffb9d23,1,fffb9d23 0,fff9c667,0.5,fff79621,1,fff79621 0,fffceabb,0.25,fffccd4d,0.5,fff8b500,0.75,fffbdf93,1,fffbdf93 0,ffff670f,0.5,ffff670f,1,ffff670f 0,ffff5db1,0.5,ffef017c,1,ffef017c 0,fffb83fa,0.5,ffe93cec,1,ffe93cec 0,ffe570e7,0.469,ffa849a3,1,ffa849a3 0,ffcb60b3,0.25,ffad1283,0.5,ffad1283,0.75,ffde47ac,1,ffde47ac 0,fffcecfc,0.25,fffba6e1,0.5,fffd89d7,0.75,ffff7cd8,1,ffff7cd8 0,ffebe9f9,0.25,ffd8d0ef,0.5,ffcec7ec,0.75,ffc1bfea,1,ffc1bfea 0,fffebbbb,0.452,ffff5c5c,1,ffff5c5c 0,fff2825b,0.25,ffe55b2b,0.5,ffe55b2b,0.75,fff07146,1,fff07146 0,fff85032,0.25,fff16f5c,0.5,fff6290c,0.71,ffe73827,1,ffe73827 0,fffeccb1,0.25,fff17432,0.5,ffea5507,0.75,fffb955e,1,fffb955e 0,ffefc5ca,0.25,ffd24b5a,0.5,ffba2737,0.75,fff18e99,1,fff18e99 0,fffeffe8,0.5,ffd6dbbf,1,ffd6dbbf 0,fffcfff4,0.403,ffb3bead,1,ffb3bead 0,ffe5e696,0.5,ffd1d360,1,ffd1d360 0,ff45484d,0.5,ff000000,1,ff000000 0,ff7d7e7d,0.5,ff0e0e0e,1,ff0e0e0e 0,ff959595,0.461,ff010101,0.502,ff010101,0.531,ff4e4e4e,0.764,ff4e4e4e,0.867,ff1b1b1b,1,ff1b1b1b 0,ffaebcbf,0.25,ff6e7774,0.5,ff0a0e0a,0.75,ff0a0809,1,ff0a0809 0,ffc5deea,0.307,ff066dab,1,ff066dab 0,fff7fbfc,0.403,ffadd9e4,1,ffadd9e4 0,ffd6f9ff,0.5,ff9ee8fa,1,ff9ee8fa 0,ffe9f6fd,0.5,ffd3eefb,1,ffd3eefb 0,ff63b6db,0.5,ff309dcf,1,ff309dcf 0,ff2c539e,0.5,ff2c539e,1,ff2c539e 0,ffa9e4f7,0.5,ff0fb4e7,1,ff0fb4e7 0,ff93cede,0.411,ff49a5bf,1,ff49a5bf 0,ffb2e1ff,0.5,ff66b6fc,1,ff66b6fc 0,ffa7cfdf,0.5,ff23538a,1,ff23538a 0,ff4f85bb,0.5,ff4f85bb,1,ff4f85bb 0,ffdeefff,0.5,ff98bede,1,ff98bede 0,fffeffff,0.5,ffd2ebf9,1,ffd2ebf9 0,ff356aa0,0.5,ff356aa0,1,ff356aa0 0,ffffffff,0.25,fff1f1f1,0.5,ffe1e1e1,0.75,fff6f6f6,1,fff6f6f6 0,fff6e6b4,0.5,ffed9017,1,ffed9017 0,ffeab92d,0.5,ffc79810,1,ffc79810 0,ffffd65e,0.5,fffebf04,1,fffebf04".split(" "),Sketch.style.colors="a8efff,aed3ff,dea6ff,ffb4e2,ffbcbc,ffdbb4,ffeeaa,ffff9a,fdfda6,e4f9c1,63e1ff,6eb0ff,c261ff,ff79c9,ff8888,ffbe79,ffe067,ffff49,fafa60,cef28f,2bcfff,3a8fff,a629ff,fb48af,ff5b5b,ffa147,ffce2f,fffd07,f0f026,b6e565,00bafe,1271ff,8a00ff,e92294,ff3737,ff8620,ffba04,fff200,e0e000,9dd241,00a1e7,0056ff,6f00f9,cd0679,ff1b1b,fb6c03,eea300,ffdc00,c9c900,83b925,0085c8,003de2,5300d0,a8005c,e90808,da5300,d08800,d6b700,a9a900,689a10,006192,0027a9,37008a,79003e,ac0000,ae3b00,9f6700,ab9200,7d7d00,4c7602,003d5b,00155c,1b0045,41001f,5e0000,742400,6a4400,806e00,505000,2e4b00,ffffff,e5e5e5,cccccc,b2b2b2,999999,7f7f7f,666666,4c4c4c,333333,191919".split(",");var UserInterface=function(){this.toggleList=function(e){if(String(e)==="[object Object]")var t=e.className||"active",n=e.list||[],e=e.target||{};else t="active",n=e,e={};for(var r=0,i=n.length;r<i;r++)n[r].className=(" "+n[r].className+" ").split(" "+t+" ").join("").trim();e.className=(e.className+" "+t).trim()},this.toggleSingle=function(e){if(String(e)==="[object Object]")var t=e.className||"active",n=e.target||{},r=e.list||[];else t="active",n=e,r=[];var i=" "+n.className+" ";r.length>0&&this.toggleList(r),e=typeof e.toggle!="undefined"?e.toggle:i.indexOf(t)===-1,n.className=e?(i+(" "+t)).trim():i.split(" "+t+" ").join("").trim()},this.toggleSwitch=function(e){if(String(e)==="[object Object]")var t=e.className||"active",e=e.target||{};else t="active";if(e.childNodes){var e=e.getElementsByTagName("li"),n={};if(e.length!==2)return!1;n=e[0].className.indexOf(t)!==-1?e[1]:e[0],this.toggleList({target:n,list:e})}},this.create={style:function(){var e=document.getElementById("configure"),t=document.createElement("li");t.id="fill_type",t.className="color",t.title="Style";var n=document.createElement("div");n.className="ctrl";var r=document.createElement("ul");r.className="switch",r.id="fill_switch";var i=document.createElement("li");i.id="fill_color";var s=document.createElement("span");s.className="option";var o=document.createElement("span");o.className="indicator";var u=document.createTextNode("Color");s.appendChild(o),s.appendChild(u),i.appendChild(s);var a=document.createElement("li");return a.className="active",a.id="fill_gradient",s=document.createElement("span"),s.className="option",o=document.createElement("span"),o.className="indicator",u=document.createTextNode("Gradient"),s.appendChild(o),s.appendChild(u),a.appendChild(s),r.appendChild(i),r.appendChild(a),n.appendChild(r),t.appendChild(n),e.appendChild(t),t},list:function(e,t,n,r){var n=document.getElementById("configure"),i=document.createElement("li");i.id=e,i.title=e.replace("_"," ").ucwords();var s=document.createElement("div");s.className="ctrl";var o=document.createElement("ul"),u=document.createElement("li");u.className="menu";var a=document.createElement("span");a.className="current";var f=document.createElement("span");f.className="textNode",f.innerHTML=t.ucwords(),a.appendChild(f);for(var f=document.createElement("ul"),l=0;l<r.length;l++){var c=document.createElement("li");c.id=e+"-"+r[l],c.innerHTML=r[l].ucwords(),t===r[l]&&(c.className="hidden"),f.appendChild(c)}return u.appendChild(a),u.appendChild(f),o.appendChild(u),s.appendChild(o),i.appendChild(s),n.appendChild(i),i},slide:function(e,t,n){typeof t=="number"&&(t={value:t,clamp:{min:1,max:100}});var r=document.getElementById("configure"),i=document.createElement("li");i.id=e,i.title=e.replace("_"," ").ucwords();var s=document.createElement("div");s.className="ctrl";var o=document.createElement("ul");o.className="slideValue",o.setAttribute("data-unit",n||""),o.setAttribute("data-min",t.clamp.min),o.setAttribute("data-max",t.clamp.max),o.setAttribute("data-type",e);var u=document.createElement("li");u.className="handle";var a=document.createElement("span");a.className="ico",a.innerHTML="4",u.appendChild(a),a=document.createElement("li"),a.className="value";var f=document.createElement("span");f.className="textNode";var t=typeof t.max=="number"?t.max:t.value,l="<span style='color: #666;text-shadow:none'>"+e.ucwords()+"</span><br>";return f.innerHTML=n==="float"?l+(t*100+.5>>0)/100:Sketch.configure.defaults[e].indexOf("float")!==-1?l+(t*100+.5>>0)/100+(n||""):l+(t>>0)+(n||""),a.appendChild(f),o.appendChild(u),o.appendChild(a),s.appendChild(o),i.appendChild(s),r.appendChild(i),i},toggle:function(e,t){var n=document.getElementById("configure"),r=document.createElement("li");r.id=e,r.className=t?"toggle active":"toggle",r.title=e.replace("_"," ").ucwords();var i=document.createElement("div");i.className="ctrl";var s=document.createElement("div");s.className="toggleWrapper";var o=document.createElement("ul"),u=document.createElement("li");u.className="handle";var a=document.createElement("span");a.className="ico",a.innerHTML="$",u.appendChild(a),a=document.createElement("li"),a.className="value";var f=document.createElement("span");f.className="textNode off",f.innerHTML="Off";var l=document.createElement("span");return l.className="textNode on",l.innerHTML="On",a.appendChild(f),a.appendChild(l),o.appendChild(u),o.appendChild(a),s.appendChild(o),i.appendChild(s),s=document.createElement("div"),s.className="label",a=document.createElement("span"),a.className="textNode",a.innerHTML=e.replace("_"," ").ucwords(),s.appendChild(a),r.appendChild(i),r.appendChild(s),n.appendChild(r),r}}};typeof Sketch=="undefined"&&(Sketch={}),typeof Sketch.events=="undefined"&&(Sketch.events={}),Event.add(window,"unload",function(){localStorage.setItem("configure",Sketch.configure.save())}),Event.add(window,"load",function(){Event.add(window,"contextmenu",Event.cancel),Event.add(window,"shake",Sketch.nib.clearImage);var e=document.getElementById("canvasArea"),t=Sketch.canvas2d.layers;Sketch.container=e,Sketch.construct2d(t);var n=localStorage.getItem("configure"),r={};r.cache=t.cache.ctx,r.layer0=t.layer0.ctx,r.active=t.active.ctx,Sketch.events.brush=new Sketch.brush(r),Sketch.events.shape=new Sketch.shape(r),Sketch.nib.construct(e),Sketch.nib.enable(),Sketch.configure.styles(),ToolBuilder.construct(),Event.add(document.getElementById("tutorial"),"mousemove",ToolBuilder.enableScroll),Event.add(document.getElementById("textures"),"mousemove",ToolBuilder.enableScroll),Event.add("#start-info","click",Sketch.openTutorial),Event.add("#start-backdrop","click",Sketch.openTextures),Event.add("#start-save","click",Sketch.savePane),Event.add("#start-info-button","click",Sketch.openTutorial),Event.add("#start-backdrop-button","click",Sketch.openTextures),Event.add("#start-go","click",function(){Sketch.tool?(animate("#toolBuilder","block"),animate("#splash","none"),toggleClassName("start-go"),Sketch.pane="toolBuilder",Sketch.closeStartup(),ToolBuilder.configure()):Sketch.openStartup()}),Event.add("#start-check","click",function(){ToolBuilder.toggleCanvas(0)}),Event.add("#start-go-button","click",function(){Sketch.tool?(Sketch.closeStartup(),ToolBuilder.toggleCanvas(0),animate("#controls","none")):(Sketch.pane="toolBuilder",Sketch.resize(),Sketch.closeStartup(),Sketch.loadTexture("./media/texture/concrete_1.jpeg"),animate("#controls","none"),animate("#splash","none"))}),Sketch.loader=widgets.Loader(!1),Sketch.uploader=new widgets.Uploader({confirm:"text",action:"./save.php",mode:"read",maxFiles:1,dropAreaStyle:"position: absolute; background: rgba(0, 200, 0, 1);",dropAreaMessage:"Drop Photo Here",onChange:function(e){for(var t in e);var e=e[t],n=Sketch.canvas2d.layers.layer0,r=(new widgets.Thumbnailer).generate({src:e.src,maxHeight:n.height,maxWidth:n.width,crop:"Fit",callback:function(){n.ctx.drawImage(r,0,0)}})},onProgress:function(e){document.getElementById("upload-bar").style.width=e.transferPercent+"%",document.getElementById("upload-bar-percent").innerHTML=e.transferPercent+"%"}}),window.location.hash==="#startup"||!n?Sketch.openStartup():Sketch.openDraw()}),Sketch.pane="toolBuilder",Sketch.inSyncWithS3=!1,Sketch.saveImage=function(e){var t=function(){document.getElementById("upload-view").style.display="block",document.getElementById("upload-progress").style.display="none",document.getElementById("upload-share").style.display="block",document.getElementById("upload-bar").style.width="0%",document.getElementById("upload-bar-percent").innerHTML="0%"};if(Sketch.inSyncWithS3)return t();Sketch.uploader.action="./save.php?"+e,new Sketch.uploader.upload({data:Sketch.canvas2d.layers.layer0.toDataURL("image/jpeg",.96),name:"image"},function(e,n){var r=document.getElementById("upload-link"),i=n.split(".").shift();return r.innerHTML="https://sketch.io/mobile/?"+i,r.href="https://sketch.io/mobile/?"+i,console.log(e,n),t()}),Sketch.inSyncWithS3=!0},Sketch.savePane=function(){Sketch.pane="save-menu",animate("#controls","block"),animate("#splash","block"),animate("#splash #textures","block"),animate("#splash #tutorial","none"),animate("#splash #startup","none"),animate("#save-menu","block"),toggleClassName("start-save"),Sketch.inSyncWithS3?(document.getElementById("upload-share").style.display="block",document.getElementById("upload-view").style.display="block",document.getElementById("upload-progress").style.display="none"):(document.getElementById("upload-share").style.display="none",document.getElementById("upload-view").style.display="none",document.getElementById("upload-progress").style.display="block")},Sketch.loadTexture=function(e,t){e||(e=Sketch.texture),Sketch.loader.message("Loading texture..."),Sketch.texture=e;var n=new Image;n.onload=function(){var e=Sketch.canvas2d.layers.layer0.ctx,r=e.createPattern(n,"repeat");e.fillStyle=r,e.fillRect(0,0,e.canvas.width,e.canvas.height),Sketch.configure.setTool(),Sketch.loader.stop(),t&&t()},n.src=e};var toggleClassName=function(e,t){var n=document.getElementById(e),r=n.parentNode.getElementsByClassName("active")[0];r&&(r.className=(" "+r.className+" ").replace(" active "," ").trim()),t||(n.className+=" active")};Sketch.openTutorial=function(){Sketch.pane="splash",animate("#controls","block"),animate("#splash","block"),animate("#splash #tutorial","block"),animate("#splash #textures","none"),animate("#splash #startup","none"),animate("#save-menu","none"),toggleClassName("start-info")},Sketch.openTextures=function(){Sketch.pane="splash",animate("#controls","block"),animate("#splash","block"),animate("#splash #textures","block"),animate("#splash #tutorial","none"),animate("#splash #startup","none"),animate("#save-menu","none"),toggleClassName("start-backdrop");var e="./media/texture/concrete_1.jpeg,./media/texture/concrete_2.jpeg,./media/texture/concrete_3.jpeg,./media/texture/concrete_4.jpeg,./media/texture/concrete_5.jpeg,./media/texture/fabric_1.jpeg,./media/texture/fabric_2.jpeg,./media/texture/fabric_3.jpeg,./media/texture/leather_1.jpeg,./media/texture/leather_2.jpeg,./media/texture/leather_3.jpeg,./media/texture/leather_4.jpeg,./media/texture/leather_5.jpeg,./media/texture/leather_6.jpeg,./media/texture/leather_7.jpeg,./media/texture/leather_8.jpeg,./media/texture/paint_1.jpeg,./media/texture/paint_2.jpeg,./media/texture/paint_3.jpeg,./media/texture/paper_1.jpeg,./media/texture/paper_2.jpeg,./media/texture/paper_3.jpeg,./media/texture/paper_4.jpeg,./media/texture/paper_5.jpeg,./media/texture/paper_6.jpeg,./media/texture/paper_7.jpeg,./media/texture/plastic_1.jpeg,./media/texture/plastic_2.jpeg,./media/texture/plastic_3.jpeg,./media/texture/plastic_4.jpeg,./media/texture/plastic_5.jpeg,./media/texture/rocks_1.jpeg,./media/texture/rocks_2.jpeg,./media/texture/rocks_3.jpeg,./media/texture/rocks_4.jpeg,./media/texture/rocks_5.jpeg,./media/texture/rocks_6.jpeg,./media/texture/rocks_7.jpeg,./media/texture/water_1.jpeg,./media/texture/water_2.jpeg,./media/texture/water_3.jpeg,./media/texture/wood_1.jpeg,./media/texture/wood_2.jpeg,./media/texture/wood_3.jpeg,./media/texture/wood_4.jpeg,./media/texture/wood_5.jpeg,./media/texture/wood_6.jpeg,./media/texture/wood_7.jpeg,./media/texture/wood_8.jpeg,./media/texture/wood_9.jpeg".split(","),t=document.getElementById("textures");if(!t.innerHTML){var n=new widgets.Thumbnailer,r;for(r in e){var i=n.generate({title:e[r],src:e[r].replace(".jpeg","_thumb.jpeg"),maxHeight:124,maxWidth:124,crop:"None",click:function(e,t){var n=this.target.src.replace("_thumb.jpeg",".jpeg");Sketch.tool?window.confirm("Creating a new canvas will overwrite your changes. Are you sure you want to continue?")===!0&&(Sketch.resize(),Sketch.closeStartup(
),Sketch.loadTexture(n),ToolBuilder.toggleCanvas(0),t.remove(),setTimeout(t.add,100)):(Sketch.resize(),Sketch.closeStartup(),Sketch.loadTexture(n),animate("#controls","none"))}});t.appendChild(i)}}},Sketch.openDraw=function(){toggleClassName("start-go"),Sketch.closeStartup(),Sketch.loadTexture("./media/texture/concrete_1.jpeg",function(){})},Sketch.openStartup=function(){animate("#splash","block"),animate("#startup","block"),animate("#textures","none"),animate("#tutorial","none"),animate("#controls","none"),animate("#start-check","none"),animate("#save-menu","none"),animate("#start-save","none"),toggleClassName("startup"),toggleClassName("start-go"),Sketch.tool&&(document.querySelector("#start-go-button .title").innerHTML="resume")},Sketch.closeStartup=function(){animate("#splash","none"),animate("#start-check","table"),animate("#start-save","table"),animate("#save-menu","none")},window.Sketch=function(e){return e.nib=new function(){var t=this;this.active=!1,this.points=[],this.construct=function(t){this.recognize=new DollarRecognizer,this.container=t,this.canvas=e.canvas2d.layers.active,this.ctx=this.canvas.ctx,this.powernib.id="powernib";var n=document.createElement("div");n.innerHTML="<b>REFERENCE</b><li>1-5 finger tap to change preset<li>&ldquo;circle&rdquo; to reset image<li> &ldquo;check&rdquo; to save image<li>&ldquo;s&rdquo; to enter style builder",this.backdrop.appendChild(n),t.appendChild(this.powernib),t.appendChild(this.backdrop),document.body.appendChild(this.growlElement)},this.mouse=function(e,n){Event.stopPropagation(e);switch(n.state){case"tap":return Sketch.nib.powernib.className==="active"?t.exit():ToolBuilder.toggleCanvas();case"taphold":return t.growl("terminal"),t.enter(e);case"release":if(!("ontouchstart"in window))break;return t.exit()}},this.enable=function(){Event.add(this.powernib,"taphold tap",this.mouse)},this.disable=function(){Event.remove(this.powernib,"taphold tap",this.mouse)},this.powernib=document.createElement("div"),this.growlElement=document.createElement("div"),this.growlElement.className="growl",this.backdrop=document.createElement("div"),this.backdrop.className="growl-background",this.enableRecognizer=function(){Event.add(this.canvas,"drag",this.recognizer,{maxFingers:1}),Event.add(this.canvas,"tap",this.tap)},this.disableRecognizer=function(){this.ctx.clearRect(0,0,this.canvas.width,this.canvas.height),Event.remove(this.canvas,"drag",this.recognizer,{maxFingers:1}),Event.remove(this.canvas,"tap",this.tap)},this.enter=function(n){e.tool.gestures>0||(e.tool.disable(),this.active=!0,this.enableRecognizer(),Event.proxy.drag({position:"move",event:n,target:this.powernib,listener:function(e,n){var r=t.powernib,i=window.innerHeight-r.offsetHeight,s=Math.max(0,Math.min(window.innerWidth-r.offsetWidth,n.x)),i=Math.max(0,Math.min(i,n.y));r.style.left=s+"px",r.style.top=i+"px"}}),this.powernib.className="active",this.backdrop.style.display="block",setTimeout(function(){t.backdrop.style.opacity=1},1))},this.exit=function(){e.tool.enable(),e.configure.setTool(),this.active=!1,this.disableRecognizer(),this.powernib.className="",this.backdrop.style.opacity=0,setTimeout(function(){t.backdrop.style.display="none"},300)},this.tap=function(e,n){if(t.growlElement.style.display!=="block"){ToolBuilder.selectPreset(n.fingers-1);var r=ToolBuilder.preset.id.ucwords();t.ctx.clearRect(0,0,t.canvas.width,t.canvas.height),t.growl(r)}},this.recognizer=function(e,n){if(t.active!==!1){var r=t.points,i=r.length,s=t.canvas,o=t.ctx;n.state==="down"&&(t.points=[],o.lineWidth=6,o.lineCap="round",o.lineJoin="round"),r.push({x:n.x>>0,y:n.y>>0});if(!(Math.abs(n.start.x-n.x)<1)&&!(Math.abs(n.start.y-n.y)<1)){o.beginPath(),o.clearRect(0,0,s.width,s.height);for(s=0;s<i;s++)s===0?(o.arc(r[s].x,r[s].y,6,0,Math.PI*2,!0),o.moveTo(r[s].x,r[s].y),o.fill()):o.lineTo(r[s].x,r[s].y);o.stroke();if(n.state==="up"&&!(r.length<=10)&&(i=t.recognize.PathLength(r),r=t.recognize.Recognize(r,!1),console.log(r.Name,r.Score,i),!(r.Score<.7)))switch(r.Name){case"s":if(i<250)break;ToolBuilder.fromTerminal=!0,ToolBuilder.toggleCanvas(),ToolBuilder.togglePreview(),t.exit();break;case"circle":if(i<300)break;t.clearImage();break;case"check":if(i<150)break;Sketch.savePane(),t.exit()}}}},this.growl=function(e){this.disableRecognizer(),this.growlElement.innerHTML=e,this.growlElement.style.display="block",setTimeout(function(){t.growlElement.style.opacity=1,setTimeout(function(){t.growlElement.style.opacity=0,setTimeout(function(){t.active&&t.enableRecognizer(),t.growlElement.style.display="none"},300)},750)},1)},this.clearImage=function(){e.tool&&Sketch.timeMachine.clear(function(){t.exit()})}},e}(Sketch),typeof ToolBuilder=="undefined"&&(window.ToolBuilder={}),window.ToolBuilder=function(e){return e={mode:0,preset:{},presetID:0,presetCache:{},presets:[{id:"pencil"},{id:"web"},{id:"spraypaint"},{id:"crayon"},{id:"supershape"}],swatch:{color:[],gradient:[]},construct:function(){document.body.style.opacity=1,e.swatch={},e.swatch.color=[],e.swatch.gradient=[],e.drawPalette("color",Sketch.configure.colors),e.drawPalette("gradient",Sketch.configure.gradients),e.UI=new UserInterface,e.selectPreset();for(var t=document.querySelectorAll("#presets li"),n=0,r=t.length;n<r;n++)Event.add(t[n],"click dblclick",function(t,n){n.type==="dblclick"?e.toggleCanvas(0):e.selectPreset(parseInt(n.target.id.substr(1)))});t=document.querySelectorAll("#toolBox li"),n=0;for(r=t.length;n<r;n++)Event.add(t[n],"click dblclick",function(t,n){n.type==="dblclick"?e.toggleCanvas(0):e.selectTool(n.target.id)});Event.add(window,"keyup",function(t){document.getElementById("splash").style.display!=="block"&&(t.keyCode===27?ToolBuilder.mode===2?e.togglePreview():ToolBuilder.mode===1&&e.toggleCanvas(0):t.keyCode===13&&(ToolBuilder.mode===1?e.togglePreview():ToolBuilder.mode===0&&e.toggleCanvas(1)))}),Event.add("#start-check","click",function(){e.toggleCanvas(0)}),Event.add("#closePreview","click",e.togglePreview),Event.add(document,"mousemove",Event.prevent),Event.add("#options","mousemove",e.enableScroll),Event.add("#tool","mousemove",e.enableScroll),Event.add("#swatch","mousemove",e.enableScroll),Event.add(document.body,"click",function(){e.UI.toggleList(document.getElementsByClassName("menu"))});var i;Event.add(window,"resize",function(t){var n=Math.min(window.innerWidth/1280,window.innerHeight/800)*100>>0;document.body.style.fontSize=n+"%",t&&(window.clearInterval(i),i=window.setTimeout(function(){e.configure()},50))}).listener(),Event.add(document.body,"touchmove",Event.prevent)},animateWindow:function(e){animate("#controls",e),animate("#canvasArea",e==="block"?"none":"block");switch(Sketch.pane){case"save-menu":animate("#splash","none"),animate("#save-menu",e),animate("#toolBuilder","none");break;case"splash":animate("#splash",e),animate("#save-menu","none"),animate("#toolBuilder","none");break;case"toolBuilder":animate("#splash","none"),animate("#save-menu","none"),animate("#toolBuilder",e)}},initToggles:function(){for(var t=document.getElementsByClassName("toggle"),n=0,r=t.length;n<r;n++)Event.add(t[n],"click",function(t,n){e.UI.toggleSingle(n.target);var r=n.target.id;e.preset[r]=!e.preset[r];switch(r){case"color_noise":Sketch.configure.setStyle(),e.drawPreview("color_mode")}})},initFillStyle:function(){var t=document.getElementById("fill_switch"),n=document.querySelectorAll("#fill_type li");t&&Event.add(t,"click",function(t,r){e.UI.toggleSwitch(r.target);var i=n[0].className.indexOf("active")!==-1?n[0]:n[1];e.selectFillType(i.id.substr(5))})},initMenus:function(){for(var t=document.getElementsByClassName("menu"),n=0;n<t.length;n++)if(!t[n].getAttribute("data-active")){t[n].setAttribute("data-active","true"),Event.add(t[n],"click",function(n,r){Event.stopPropagation(n),e.UI.toggleSingle({target:r.target,list:t})});for(var r=t[n].getElementsByTagName("li"),i=0;i<r.length;i++)Event.add(r[i],"click",function(t,n){e.UI.toggleSingle(n.target.parentNode.parentNode);var r=n.target,i=r.id.split("-"),s=i[0],o=i[1],i=r.parentNode.parentNode;i.getElementsByClassName("textNode")[0].innerHTML=r.innerHTML,i.getElementsByClassName("hidden")[0]&&(i.getElementsByClassName("hidden")[0].className=""),r.className="hidden",o==="menu"?(i=document.getElementById(s+"_list"),(r=i.getElementsByClassName("active")[0])||(r=i.getElementsByTagName("li")[1]),e.selectTool(r.id)):(e.preset[s]=o,e.drawPreview(s))})}},configure:function(t){var t=t||e.preset.id,n=Sketch.configure[t],r=Sketch.configure.defaults,i=Sketch.configure.types,s=Sketch.configure.typesDisplay,o=e.preset,u=e.presetCache;typeof o.alpha!="undefined"&&(u[o.id]=clone(o));for(var a in o)delete o[a];u=u[t]||{};if(typeof u!="undefined")for(a in u)o[a]=clone(u[a]);o.id=t;for(t=document.getElementById("configure");t.hasChildNodes();)t.removeChild(t.firstChild);u=1e4;for(a in n){if(n[a].options)var t="list",f=n[a].options,l=n[a].value;else typeof r[a]=="object"?(t="list",f=r[a]):(t=r[a]?r[a]:a==="fill"&&o.id!=="eraser"?"style":void 0,f=void 0),l=n[a];typeof o[a]=="undefined"?o[a]=clone(l):l=clone(o[a]),t&&l.hidden!==!0&&(f=e.UI.create[i[t]](a,l,s[t],f),f.style.zIndex=u--,t!=="boolean")&&(t=document.createElement("canvas"),t.className="preview",t.id="preview_"+a,f.appendChild(t))}e.initToggles(),e.initFillStyle(),e.initMenus(),e.initSlideValues(),n=document.getElementsByClassName("preview"),r=0;for(i=n.length;r<i;r++)Event.add(n[r],"click",e.togglePreview),e.drawPreview(n[r].id.substr(8));o=e.presets[e.presetID],t=o.fill.type,e.selectFill(t,o.fill[t])},selectPreset:function(t){var t=t||0,n=document.querySelectorAll("#presets li");e.UI.toggleList({target:n[t],list:n}),e.presetID=t,e.preset=e.presets[t],e.selectTool()},selectToolMenu:function(t){e.UI.toggleList({target:t,list:document.querySelectorAll("#tool .list")});for(var n=document.getElementById("toolMenu"),r=n.getElementsByClassName("current")[0].getElementsByClassName("textNode")[0],n=n.getElementsByClassName("menu")[0].getElementsByTagName("li"),t=t.id.split("_")[0],i=0,s=n.length;i<s;i++)n[i].id.indexOf(t)!==-1&&(r.innerHTML=n[i].innerHTML)},selectTool:function(t){var t=t||e.preset.id,n=document.getElementById(t),r=n.parentNode.getElementsByTagName("li");e.configure(t),e.selectToolMenu(document.getElementById(t).parentNode),e.selectFillType(e.preset.fill.type),e.selectSlideValues(),e.UI.toggleList({target:n,list:r})},selectFillType:function(t){var n=e.presets[e.presetID];e.selectFill(t,n.fill[t]);var r=document.querySelectorAll("#fill_type li");r.length&&(r=r[0].parentNode.parentNode.parentNode,document.getElementById("fill_"+t).className.indexOf("active")===-1&&e.UI.toggleSwitch(r),e.UI.toggleList({target:document.getElementById(t+"Swatch"),list:document.querySelectorAll("#swatch ul")}),n.fill.type=t,r.className=t,Sketch.configure.setStyle(),e.drawPreview("color_mode"))},selectFill:function(t,n){e.preset.fill[t]=n;var r=document.getElementById("fill_type");if(r){r.querySelectorAll("li");var r=r.querySelector(".preview"),i=document.getElementById(t+e.hashString(n));e.UI.toggleList({target:i,list:e.swatch[t]}),t==="color"?r.style.cssText="background: #"+n:t==="gradient"&&(r.style.cssText=e.renderGradient(n))}},selectSlideValues:function(){for(var t=document.getElementsByClassName("slideValue"),n=0,r=t.length;n<r;n++){var i=t[n],s=i.getElementsByClassName("textNode")[0],o=i.getAttribute("data-type"),u=i.getAttribute("data-unit");parseFloat(i.getAttribute("data-min")),parseFloat(i.getAttribute("data-max")),i.parentNode.parentNode.getElementsByTagName("canvas")[0].getContext("2d");var i="<span style='color: #666;text-shadow:none'>"+o.ucwords()+"</span><br>",a=Sketch.configure.defaults[o].indexOf("float")!==-1,f=typeof e.preset[o].max=="number"?e.preset[o].max:e.preset[o].value;e.drawPreview(o),s.innerHTML=u==="float"?i+(f*100+.5>>0)/100:a?i+(f*100+.5>>0)/100+u:i+(f>>0)+u}},initSlideValues:function(){function t(t){var n=t.getElementsByClassName("textNode")[0],r=t.getAttribute("data-type"),i=t.getAttribute("data-unit"),s=parseFloat(t.getAttribute("data-min")),o=parseFloat(t.getAttribute("data-max"));t.parentNode.parentNode.getElementsByTagName("canvas")[0].getContext("2d");var u="<span style='color: #666;text-shadow:none'>"+r.ucwords()+"</span><br>",a=Sketch.configure.defaults[r].indexOf("float")!==-1;Event.add(t.getElementsByClassName("handle")[0],"drag",function(d,v){v.state==="down"&&(e.enableScroll.disable=!0,v.value=typeof e.preset[r].max=="number"?e.preset[r].max:e.preset[r].value,e.UI.toggleSingle(t));var y=Math.max(-1,Math.min(1,(v.x-v.start.x)/(window.innerWidth/3))),y=Math.max(s,Math.min(o,v.value+(o-s)*y));n.innerHTML=i==="float"?u+(y*100+.5>>0)/100:a?u+(y*100+.5>>0)/100+i:u+(y>>0)+i,e.drawPreview(r),typeof e.preset[r].max=="number"?e.preset[r].max=y:e.preset[r].value=y,v.state==="up"&&(e.enableScroll.disable=!1,e.UI.toggleSingle(t))})}for(var n=document.getElementsByClassName("slideValue"),r=0,i=n.length;r<i;r++)t(n[r])},hashString:function(e){return Math.abs(djb2(e)).toString(16).substr(0,6).rpad("0",6)},drawPalette:function(t,n){var r=document.getElementById(t+"Swatch"),i;for(i in n){var s=document.createElement("li"),o=document.createElement("a");t==="color"?o.style.cssText="background: #"+n[i]:t==="gradient"&&(o.style.cssText=e.renderGradient(n[i])),s.setAttribute("data-type",t),s.setAttribute("data-dna",n[i]),s.id=t+e.hashString(n[i]),s.appendChild(o),r.appendChild(s),Event.add(o,"click dblclick",function(t,n){if(n.type==="click"){var r=n.target.parentNode,i=r.getAttribute("data-type"),r=r.getAttribute("data-dna");e.selectFill(i,r),Sketch.configure.setTool(),console.log(r),Sketch.configure.setStyle(),e.drawPreview("color_mode")}else e.togglePreview()}),e.swatch[t].push(s)}},toggleCanvas:function(t){t=typeof t!="undefined"?t:e.mode?0:1;if(!(Sketch.tool&&Sketch.tool.gestures>0)){document.getElementById("toolBuilder");var n=document.getElementById("canvasArea");t===0?(Sketch.configure.setTool(),Sketch.nib.enable(),Sketch.tool&&Sketch.tool.enable(),e.mode=0,e.updateActiveLayer("layer0"),e.animateWindow("none"),n.style.display="block",e.preset.id==="floodfill"?Sketch.nib.growl("Tap once"):e.preset.event==="shape"&&e.preset.movement!=="drag"||e.preset.id==="string"?Sketch.nib.growl("Use 2+ fingers"):Sketch.nib.growl("Use 1+ fingers")):(Sketch.inSyncWithS3=!1,Sketch.nib.disable(),Sketch.tool&&Sketch.tool.disable(),e.animateWindow("block"),e.mode=1,e.selectSlideValues(),e.resizePreview(),setTimeout(function(){n.style.display="none"},500))}},resizePreview:function(){for(var t=document.getElementsByClassName("preview"),n=0,r=t.length;n<r;n++)t[n].width=t[n].offsetWidth,t[n].height=t[n].offsetHeight,e.drawPreview(t[n].id.substr(8))},togglePreview:function(){var t=document.getElementById("toolPreview");if(e.mode===1)t.className=e.swatch[e.preset.fill.type]?"viewSwatch":"",t.style.display="block",e.mode=2,e.updatePreview(),e.updateActiveLayer("preview"),animate("#toolPreview","block"),animate("#controls","none"),animate("#splash","none"),animate("#save-menu","none");else if(e.mode=1,e.UI.toggleSingle(t),animate("#toolPreview","none"),e.animateWindow("block"),ToolBuilder.fromTerminal)ToolBuilder.fromTerminal=!1,e.toggleCanvas()},updateActiveLayer:function(e){var e=document.getElementById(e),t=document.getElementById("active");t.width=e.width,t.height=e.height,e.parentNode.insertBefore(t,e),Sketch.events.brush.ctx=e.getContext("2d"),Sketch.events.shape.ctx=e.getContext("2d"),Sketch.configure.setTool()},updatePreview:function(){for(var e=document.getElementById("toolPreview").getElementsByTagName("canvas"),t=0;t<e.length;t++){var n=e[t],r=n.width=n.offsetWidth,i=n.height=n.offsetHeight;n.id==="preview"&&(n=n.getContext("2d"),n.font="bold 1em arial",n.textBaseline="bottom",n.textAlign="center",n.strokeStyle="#999",n.strokeText("Preview Area",r/2,i-10))}},drawPreviewAlpha:function(){var e=new Image;return e.onload=function(){var t=document.createElement("canvas").getContext("2d");t.canvas.width=e.width,t.canvas.height=e.height,e.pattern=t.createPattern(e,"repeat")},e.src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAYAAAAf8/9hAAAALklEQVQ4T2NUUlL6z4AH3Lt3D580A+OoAcMiDICRjDcdAKMZfzoYNYCBceiHAQDsuisx5wDZVAAAAABJRU5ErkJggg==",e}(),drawPreview:function(t){if(e.preset[t]){var n=typeof e.preset[t].max=="number"?e.preset[t].max:e.preset[t].value,r=document.getElementById("preview_"+t),i=r.getContext("2d"),s=r.width=r.offsetWidth,o=r.height=r.offsetHeight;switch(t){case"alpha":i.clearRect(0,0,s,o),i.fillStyle=e.drawPreviewAlpha.pattern,i.fillRect(0,0,s,o),t=n/parseInt(r.parentNode.querySelector(".slideValue").getAttribute("data-max")),i.globalAlpha=t,i.fillStyle="#00f",i.fillRect(0,0,s,o);break;case"composite":t=e.preset[t],t==="disco"?(i.globalCompositeOperation="lighter",i.fillStyle="#00f",i.fillRect(s/2,o/2,s/2,o/2),i.fillStyle="#0f0",i.fillRect(s/4,o/4,s/2,o/2),i.fillStyle="#f00",i.fillRect(0,0,s/2,o/2)):(i.fillStyle="#00f",i.fillRect(s/3,o/3,s/1.5,o/1.5),i.fillStyle="#f00",i.globalCompositeOperation=Sketch.configure.define.composite(t),i.fillRect(0,0,s/1.5,o/1.5));break;case"radius":t=e.preset[t],t=n/t.clamp.max,n=s*t,t*=o,i.fillStyle="#00f",i.fillRect((s-n)/2,(o-t)/2,n,t);break;case"color_mode":i.fillStyle=Sketch.configure.createGradient(i,0,0,s,o,ToolBuilder.preset),i.fillRect(0,0,s,o);break;case"rotate":t=e.preset[t],i.fillStyle="#00f",i.arc(s/2,o/2,Math.min(o,s)/2,t.max*DEG_RAD,0,!0),i.lineTo(s/2,o/2),i.fill();break;case"scale":t=e.preset[t],i.fillStyle="#00f",i.fillRect(s/2,0,s/2,t.max*o/3),i.fillStyle="#f00",i.fillRect(0,0,s/2,o/3),i.fill();break;case"translate":t=e.preset[t],n=t.max/t.clamp.max,s/=2,o/=2,i.fillStyle="#00f",i.fillRect(s+s*n,o+o*n,s,o),i.fillStyle="#f00",i.fillRect(0,0,s-s*n,o-o*n),i.fill();break;case"movement":t=e.preset[t],t==="repeat"?(i.globalCompositeOperation="lighter",i.fillStyle="#00f",i.fillRect(s/2,o/2,s/2,o/2),i.fillStyle="#00f",i.fillRect(s/4,o/4,s/2,o/2),i.fillStyle="#00f",i.fillRect(0,0,s/2,o/2)):(i.fillStyle="#00f",i.fillRect(0,0,s,o));break;case"m":case"n1":case"n2":case"n3":case"points":case"spread":case"coils":case"slope":case"sides":n=s/2,o/=2,s/=2,t=e.preset,i.beginPath();switch(t.type){case"ellipse":Vector.Shapes.ellipse(i,n,o,s,s);break;case"rectangle":Vector.Shapes.rect(i,n-s,o-s,n+s,o+s);break;case"polygon":Vector.Shapes.polygon(i,n,o,s,t.sides.value>>0);break;case"gear":Vector.Shapes.gear(i,n,o,s,t.sides.value>>0,t.slope.value);break;case"star":Vector.Shapes.star(i,n,o,s,t.sides.value>>0,t.slope.value);break;case"burst":Vector.Shapes.burst(i,n,o,s,t.sides.value>>0,t.slope.value);break;case"radialburst":Vector.Shapes.radialBurst(i,n,o,s,t.sides.value>>0,t.slope.value);break;case"spiral":Vector.Shapes.spirals(i,n,o,s,t.sides.value>>0,t.coils.value,1-t.spread.value/100,t.colors);break;case"supershape":Vector.Shapes.superformula(i,n,o,s,t.points.value,t.m.value>>0,t.n1.value,t.n2.value,t.n3.value)}i.fillStyle="#00f",i.fill()}}},enableScroll:function(t){if(!e.enableScroll.disable){var n=e.scrollTop,r=e.offsetHeight,i=e.scrollHeight-1;n<=0&&(e.scrollTop=1),n+r>i&&(e.scrollTop=i-r),t.stopPropagation()}},renderGradient:function(e){for(var t=[],e=e.split(","),n=0,r=e.length;n<r;){var i=e[n]*100,s=e[n+1],s="rgba("+parseInt(s.substr(2,2),16)+","+parseInt(s.substr(4,2),16)+","+parseInt(s.substr(6,2),16)+","+parseInt(s.substr(0,2),16)+")";t.push(s+" "+i+"%"),n+=2}return t=t.join(", "),"background: linear-gradient(left top,"+t+");background: -webkit-linear-gradient(left top,"+t+");background: -ms-linear-gradient(left top,"+t+");background: -moz-linear-gradient(left top,"+t+");background: -o-linear-gradient(left top,"+t+");"}}}(ToolBuilder),typeof Vector=="undefined"&&(Vector={}),typeof Vector.BBox=="undefined"&&(Vector.BBox={}),function(){var e=Vector.BBox;Vector.BBox=function(e){this.unset();if(typeof e!="undefined")return this.path(e)},Vector.BBox.prototype={path:function(e,t){t&&this.unset();for(var n=this.x,r=this.y,i=0,s=0,o=0,u=e.length;o<u;o++)switch((data=e[o]).cmd){case"M":n.extendTo(data.x),r.extendTo(data.y),i=data.x,s=data.y;break;case"L":n.extendTo(data.x),r.extendTo(data.y),i=data.x,s=data.y;break;case"C":this.cubic(i,s,data.x1,data.y1,data.x2,data.y2,data.x,data.y),i=data.x,s=data.y;break;case"Q":var a=i+2/3*(data.x1-i),f=s+2/3*(data.y1-s);this.cubic(i,s,a,f,a+(data.x-i)/3,f+(data.y-s)/3,data.x,data.y),i=data.x,s=data.y}return{x1:n.min,x2:n.max,y1:r.min,y2:r.max}},cubic:function(e,t,n,r,i,s,o,u){var a=this.x,f=this.y;a.extendTo(o),f.extendTo(u);var l=a.contains(n)&&a.contains(i),c=f.contains(r)&&f.contains(s);if(!l){var l=3*e-9*n+9*i-3*o,h=6*n-12*i+6*o,p=3*i-3*o;if(Math.abs(l)<1e-5){if(Math.abs(h)>1e-5&&(p=-p/h,p>0&&p<1)){var d=1-p;a.extendTo(p*p*p*e+3*p*p*d*n+3*p*d*d*i+d*d*d*o)}}else if(p=h*h-4*l*p,p>=0){var v=Math.sqrt(p),p=(-h+v)/(2*l);p>0&&p<1&&(d=1-p,a.extendTo(p*p*p*e+3*p*p*d*n+3*p*d*d*i+d*d*d*o)),p=(-h-v)/(2*l),p>0&&p<1&&(d=1-p,a.extendTo(p*p*p*e+3*p*p*d*n+3*p*d*d*i+d*d*d*o))}}c||(l=3*t-9*r+9*s-3*u,h=6*r-12*s+6*u,p=3*s-3*u,Math.abs(l)<1e-5?Math.abs(h)>1e-5&&(p=-p/h,p>0&&p<1&&(d=1-p,f.extendTo(p*p*p*t+3*p*p*d*r+3*p*d*d*s+d*d*d*u))):(p=h*h-4*l*p,p>=0&&(v=Math.sqrt(p),p=(-h+v)/(2*l),p>0&&p<1&&(d=1-p,f.extendTo(p*p*p*t+3*p*p*d*r+3*p*d*d*s+d*d*d*u)),p=(-h-v)/(2*l),p>0&&p<1&&(d=1-p,f.extendTo(p*p*p*t+3*p*p*d*r+3*p*d*d*s+d*d*d*u)))))},unset:function(){this.x=new e.Geom({min:Infinity,max:-Infinity}),this.y=new e.Geom({min:Infinity,max:-Infinity})}},e.Geom=function(e){this.min=e.min,this.max=e.max},e.Geom.prototype={extendTo:function(e){e<this.min&&(this.min=e),e>this.max&&(this.max=e)},contains:function(e){return this.min<=e&&e<=this.max}}}(),typeof Graphics=="undefined"&&(Graphics={}),function(){var e=Graphics.Vector={origin:{x:0,y:0},lineDash:{id:0,data:null,bezier:!0,leftover:0}};e.moveTo=function(t,n){var r=e.ctx;e.origin.x=t,e.origin.y=n,r.moveTo(t,n)},e.lineTo=function(t,n){var r=e.ctx,i=e.origin,s=e.lineDash.data,o=s.length,u=t-i.x,a=n-i.y,f=Math.sqrt(u*u+a*a),l=Math.abs(u)>Math.abs(a),c=l?a/u:u/a,p=e.lineDash.id>>0;f-=e.lineDash.id-p;for(r.moveTo(i.x,i.y);f>.42;){var d=Math.min(f,s[p%o]),v=Math.sqrt(d*d/(1+c*c));l?(u<0&&(v=-v),i.x+=v,i.y+=c*v):(a<0&&(v=-v),i.x+=c*v,i.y+=v),r[p%2==0?"lineTo":"moveTo"](i.x,i.y),f-=d,p++}},e.quadraticCurveTo=function(t,n,r,i){var s=e.origin,t=s.x+2/3*(t-s.x),n=s.y+2/3*(n-s.y);e.bezierDashTo(t,n,t+(r-s.x)/3,n+(i-s.y)/3,r,i)},e.bezierCurveTo=function(t,n,r,i,s,o){for(var u=e.ctx,a=e.origin||{x:0,y:0},f=!0,l=e.lineDash.bezier||!1,c=e.lineDash.data||[5,5],p=e.lineDash.id||0,t=[a.x,a.y,t,n,r,i,s,o],d=a.x,v=a.y,n=a.x,r=a.y,i=0,m,g,y,b,w;i<1;){e.lineDash.leftover?(f=!1,w=e.lineDash.leftover,e.lineDash.leftover=0):(f=!0,w=c[++p%c.length]);for(i=0;i<1;i+=.001){b=Math.sqrt(Math.pow(d-n,2)+Math.pow(v-r,2));if(b>w)break;d=1-i,v=d*d*d,m=3*i*d*d,g=3*i*i*d,y=i*i*i,d=v*t[0]+m*t[2]+g*t[4]+y*s,v=v*t[1]+m*t[3]+g*t[5]+y*o}m=e.bezierKnotSplit(t[0],t[1],t[2],t[3],t[4],t[5],t[6],t[7],i),t=m.curve2,p%2&&(m=m.curve1,f&&u.moveTo(n,r),l?u.bezierCurveTo(m[2],m[3],m[4],m[5],m[6],m[7]):u.lineTo(m[6],m[7])),n=d,r=v}e.lineDash.id=p,e.lineDash.leftover=w-b,a.x=d,a.y=v},e.catmullRomSpline=function(e,t,n){var n=1-(n||0),r=t.length-1;t.splice(0,0,t[0]),t.push(t[t.length-1]);for(var i=0;i<r;i++){var s=t[i],o=t[i+1],u=t[i+2],a=t[i+3];i==0&&e.moveTo(o.x,o.y),e.bezierCurveTo(o.x+(n*u.x-n*s.x)/6,o.y+(n*u.y-n*s.y)/6,u.x+(n*o.x-n*a.x)/6,u.y+(n*o.y-n*a.y)/6,u.x,u.y)}},e.lineDistance=function(e,t,n,r){return e=n-e,t=r-t,Math.sqrt(e*e+t*t)},e.quadraticDistance=function(e,t,n){var r,i;r=e.x-2*t.x+n.x,i=e.y-2*t.y+n.y,n=2*t.x-2*e.x,t=2*t.y-2*e.y,e=4*(r*r+i*i),r=4*(r*n+i*t),n=n*n+t*t,i=2*Math.sqrt(e+r+n);var t=Math.sqrt(e),s=2*e*t,o=2*Math.sqrt(n),u=r/t;return(s*i+t*r*(i-o)+(4*n*e-r*r)*Math.log((2*t+u+i)/(u+o)))/(4*s)},e.bezierDistanceApprox=function(e,t,n,r,i,s,o,u){var a=Math.sqrt(Math.pow(e-n,2)+Math.pow(t-r,2)),n=Math.sqrt(Math.pow(n-i,2)+Math.pow(r-s,2)),i=Math.sqrt(Math.pow(i-o,2)+Math.pow(s-u,2)),e=Math.sqrt(Math.pow(o-e,2)+Math.pow(u-t,2));return(a+n+i)*.5+e*.5},e.bezierDistance=function(e,t,n,r,i,s,o,u){for(var a=0,f=e,l=t,c=0;c<1;c+=.01){var h=1-c,p=h*h*h,d=3*c*h*h,v=3*c*c*h,m=c*c*c,h=p*e+d*n+v*i+m*o,p=p*t+d*r+v*s+m*u;a+=Math.sqrt(Math.pow(h-f,2)+Math.pow(p-l,2)),f=h,l=p}return a},e.bezierPointAtTime=function(e,t,n,r,i,s,o,u,a){var f=1-a,l=f*f*f,c=3*a*f*f;return f*=3*a*a,a*=a*a,{x:l*e+c*n+f*i+a*o,y:l*t+c*r+f*s+a*u}},e.bezierKnotSplit=function(e,t,n,r,i,s,o,u,a){var f=e+(n-e)*a,l=t+(r-t)*a;n+=(i-n)*a,r+=(s-r)*a,i+=(o-i)*a,s+=(u-s)*a;var c=f+(n-f)*a,h=l+(r-l)*a;n+=(i-n)*a,r+=(s-r)*a;var p={};return p.x=c+(n-c)*a,p.y=h+(r-h)*a,p.curve1=[e,t,f,l,c,h,p.x,p.y],p.curve2=[p.x,p.y,n,r,i,s,o,u],p}}(),typeof Vector=="undefined"&&(Vector={}),typeof Vector.Shapes=="undefined"&&(Vector.Shapes={}),function(){var e=Math.PI*2,t=Vector.Shapes;t.point={},t.circle=function(e,n,r,i){return t.ellipse(e,n,r,i,i)},t.ellipse=function(e,t,n,r,i){e.moveTo(t,n-i),e.bezierCurveTo(t+.5522847498307936*r,n-i,t+r,n-.5522847498307936*i,t+r,n),e.bezierCurveTo(t+r,n+.5522847498307936*i,t+.5522847498307936*r,n+i,t,n+i),e.bezierCurveTo(t-.5522847498307936*r,n+i,t-r,n+.5522847498307936*i,t-r,n),e.bezierCurveTo(t-r,n-.5522847498307936*i,t-.5522847498307936*r,n-i,t,n-i)},t.line=function(e,t,n,r,i){e.moveTo(t,n),e.lineTo(r,i)},t.SVGPath=function(e,n){return n=Vector.SVG.toVOBPath(n),t.VOBPath(e,n)},t.VOBPath=function(e,t){for(var n in t)switch((o=t[n]).cmd){case"M":e.moveTo(o.x,o.y);break;case"L":e.lineTo(o.x,o.y);break;case"Q":e.quadraticCurveTo(o.x1,o.y1,o.x,o.y);break;case"C":e.bezierCurveTo(o.x1,o.y1,o.x2,o.y2,o.x,o.y);break;case"A":e.arcTo(o.x1,o.y1,o.x2,o.y2,o.radius);break;case"Z":e.closePath()}},t.rect=function(e,t,n,r,i){t-r<=0!=n-i<=0?(e.moveTo(t,n),e.lineTo(r,n),e.lineTo(r,i),e.lineTo(t,i)):(e.moveTo(t,n),e.lineTo(t,i),e.lineTo(r,i),e.lineTo(r,n)),e.lineTo(t,n),e.closePath()},t.roundRect=function(e,t,n,r,i,s,o){r<0&&(t+=r,r=Math.abs(r)),i<0&&(n+=i,i=Math.abs(i)),typeof s!="numeric"&&(o=s);var u=-Math.PI/2,a=Math.PI/4;s>Math.min(r,i)/2&&(s=Math.min(r,i)/2),o>Math.min(r,i)/2&&(o=Math.min(r,i)/2),e.moveTo(t+s,n),e.lineTo(t+r-s,n),e.quadraticCurveTo(t+r-s+Math.cos(u+a/2)*s/Math.cos(a/2),n+o+Math.sin(u+a/2)*o/Math.cos(a/2),t+r-s+Math.cos(u+a)*s,n+o+Math.sin(u+a)*o),e.quadraticCurveTo(t+r-s+Math.cos((u+=a)+a/2)*s/Math.cos(a/2),n+o+Math.sin(u+a/2)*o/Math.cos(a/2),t+r-s+Math.cos(u+a)*s,n+o+Math.sin(u+a)*o),e.lineTo(t+r,n+i-o),e.quadraticCurveTo(t+r-s+Math.cos((u+=a)+a/2)*s/Math.cos(a/2),n+i-o+Math.sin(u+a/2)*o/Math.cos(a/2),t+r-s+Math.cos(u+a)*s,n+i-o+Math.sin(u+a)*o),e.quadraticCurveTo(t+r-s+Math.cos((u+=a)+a/2)*s/Math.cos(a/2),n+i-o+Math.sin(u+a/2)*o/Math.cos(a/2),t+r-s+Math.cos(u+a)*s,n+i-o+Math.sin(u+a)*o),e.lineTo(t+s,n+i),e.quadraticCurveTo(t+s+Math.cos((u+=a)+a/2)*s/Math.cos(a/2),n+i-o+Math.sin(u+a/2)*o/Math.cos(a/2),t+s+Math.cos(u+a)*s,n+i-o+Math.sin(u+a)*o),e.quadraticCurveTo(t+s+Math.cos((u+=a)+a/2)*s/Math.cos(a/2),n+i-o+Math.sin(u+a/2)*o/Math.cos(a/2),t+s+Math.cos(u+a)*s,n+i-o+Math.sin(u+a)*o),e.lineTo(t,n+o),e.quadraticCurveTo(t+s+Math.cos((u+=a)+a/2)*s/Math.cos(a/2),n+o+Math.sin(u+a/2)*o/Math.cos(a/2),t+s+Math.cos(u+a)*s,n+o+Math.sin(u+a)*o),e.quadraticCurveTo(t+s+Math.cos((u+=a)+a/2)*s/Math.cos(a/2),n+o+Math.sin(u+a/2)*o/Math.cos(a/2),t+s+Math.cos(u+a)*s,n+o+Math.sin(u+a)*o)},t.wedge=function(e,t,n,r,i,s,o){e.moveTo(t,n),e.arc(t,n,r,i,s,o),e.lineTo(t,n)},t.polygon=function(e,t,n,r,i){e.moveTo(t,n-r);for(var s=1,o;s<i;s++)o=360/i*s*.017453,e.lineTo(Math.sin(o)*r+t,-Math.cos(o)*r+n);e.lineTo(t,n-r)},t.gear=function(t,n,r,i,s,o){o<1&&(i*=o);var u=e/s,a=u/4,o=i/o;t.moveTo(i+n,r);for(var f=1;f<=s;f++)t.lineTo(Math.cos(u*f-a*3)*o+n,Math.sin(u*f-a*3)*o+r),t.lineTo(Math.cos(u*f-a*2)*o+n,Math.sin(u*f-a*2)*o+r),t.lineTo(Math.cos(u*f-a)*i+n,Math.sin(u*f-a)*i+r),t.lineTo(Math.cos(u*f)*i+n,Math.sin(u*f)*i+r)},t.star=function(t,n,r,i,s,o){o<1&&(i*=o);var u=e/s,a=u/2,o=i/o;t.moveTo(i+n,r);for(var f=1;f<=s;f++)t.lineTo(Math.cos(u*f-a)*o+n,Math.sin(u*f-a)*o+r),t.lineTo(Math.cos(u*f)*i+n,Math.sin(u*f)*i+r)},t.burst=function(t,n,r,i,s,o){o<1&&(i*=o);var u=e/s,a=u/2,f=u/4,o=i/o,l=0;t.moveTo(i+n,r);for(l=1;l<=s;l++)t.quadraticCurveTo(Math.cos(u*l-f*3)*(o/Math.cos(f))+n,Math.sin(u*l-f*3)*(o/Math.cos(f))+r,Math.cos(u*l-a)*o+n,Math.sin(u*l-a)*o+r),t.quadraticCurveTo(Math.cos(u*l-f)*(o/Math.cos(f))+n,Math.sin(u*l-f)*(o/Math.cos(f))+r,Math.cos(u*l)*i+n,Math.sin(u*l)*i+r)},t.radialBurst=function(t,n,r,i,s,o){var o=o*4||1,u=e/s,a=u/8,f=u/4;t.moveTo(i+n,r);for(var l=1;l<=s;l++)t.moveTo(Math.cos(u*l-a*o)*0+n,Math.sin(u*l-a*o)*0+r),t.lineTo(Math.cos(u*l-f*o)*i+n,Math.sin(u*l-f*o)*i+r),t.lineTo(Math.cos(u*l)*i+n,Math.sin(u*l)*i+r),t.lineTo(Math.cos(u*l-a*o)*0+n,Math.sin(u*l-a*o)*0+r)},t.spiral=function(n,r,i,s,o,u,a){var f=0,l=0,p=0,d=0,u=u/o*e,v="moveTo";if(a)for(a=o;a>0;a--){var p=Math.pow(s,a/o),m=a*u,f=Math.cos(m)*p+r,p=Math.sin(m)*p+i;t[v]?(l=Math.sqrt(Math.pow(f-l,2)+Math.pow(p-d,2)),t[v](n,f,p,l/2,5,3.35)):n[v](f,p),v==="moveTo"&&(t.point.x=f,t.point.y=p,v="lineTo"),l=f,d=p}else{for(a=0;a<=o;a++)p=Math.pow(s,a/o),m=a*u,f=Math.cos(m)*p+r,p=Math.sin(m)*p+i,n.lineTo(f,p);t.point.x=f,t.point.y=p}},t.spirals=function(n,r,i,s,o,u,a){for(var f=o;f--;){n.save(),n.translate(r,i),n.rotate(f*e/o),n.translate(-r,-i),n.moveTo(r,i);var l=50*u;t.spiral(n,r,i,s*a,l,u,!0);var p=t.point.x,d=t.point.y;t.spiral(n,r,i,s,l,u),n.lineTo(p,d),n.restore()}},t.superformula=function(t,n,r,i,s,o,u,a,f){o===0&&(o=.01),u===0&&(u=-0.01),a===0&&(a=.01),f===0&&(f=.01);for(var l="moveTo",c=0;c<=s;c++){var p=c*e/s,d=Math.pow(Math.abs(Math.cos(o*p/4)/1),a),v=Math.pow(Math.abs(Math.sin(o*p/4)/1),f),v=Math.pow(d+v,1/u);v===0?p=d=0:(v=1/v,d=v*Math.cos(p),p=v*Math.sin(p)),t[l](d*i+n,p*i+r),l="lineTo"}},t.clearPath=function(e,n,r,i,s,o,u,a,f){e.beginPath(),e.globalCompositeOperation="destination-out",t[n](e,n,r,i,s,o,u,a,f),e.fill(),e.globalCompositeOperation="source-over",e.beginPath()},t.clipPath=function(e,n,r,i,s,o,u,a,f){e.beginPath(),t[n](e,n,r,i,s,o,u,a,f),e.clip()}}(),typeof Vector=="undefined"&&(Vector={}),typeof Vector.SVG=="undefined"&&(Vector.SVG={}),function(){function e(e){e=e.getAttribute("style");if(!e)return{};for(var e=e.split(";"),t={},n=0,r=e.length;n<r;n++){var i=e[n].split(":");i[0]&&i[1]&&(t[i[0].trim()]=i[1].trim())}return t}function t(e){var t=[];for(typeof e=="string"&&(e=e.indexOf(",")!==-1?e.split(","):e.split(" "));e.length;)t.push(parseFloat(e.shift()));return t}var n=Vector.SVG=function(e){return this.ctx=e.ctx,this.cache=e.cache,this.stateFill="#000",this.defs={},this.VOB={},this};n.prototype.attach=function(e){var t=this,n=document.createElement("object");return n.style.cssText="position: absolute; left: 100px;",e.debug||(n.style.opacity=0),n.data=e.src,n.type="image/svg+xml",n.addEventListener("load",function(){t.document=n,t.element=n.contentDocument,t.VOB=t.SVGParser({doc:t.element,node:{childNodes:[]}})[0],t.viewBox=t.getBBox(),e.callback&&e.callback(t),e.debug||document.body.removeChild(n)},!1),document.body.appendChild(n),this},n.prototype.getBBox=function(){var e=Infinity,t=Infinity,n=0,r=0,i=function(s){for(var o=0,u=s.length;o<u;o++){var a=s[o];a.bbox&&(a.bbox.x1<e&&(e=a.bbox.x1),a.bbox.y1<t&&(t=a.bbox.y1),a.bbox.x2>n&&(n=a.bbox.x2),a.bbox.y2>r&&(r=a.bbox.y2)),a.childNodes&&i(a.childNodes)}};return i([this.VOB]),[e,t,n,r]},n.prototype.render=function(e){var t=function(e){for(var i=0,s=e.length;i<s;i++){r.save(),r.beginPath();var o=e[i];if(o.Matrix){var u=o.Matrix;r.transform(u.A,u.B,u.C,u.D,u.X,u.Y)}o.clip&&o.clip[0]&&(t(o.clip[0].childNodes),r.clip());switch(o.type){case"Path":Vector.Shapes.VOBPath(r,o.data);break;case"Ellipse":Vector.Shapes.ellipse(r,o.cx,o.cy,o.rx,o.ry);break;case"Circle":Vector.Shapes.ellipse(r,o.cx,o.cy,o.r,o.r);break;case"Rect":typeof o.rx=="undefined"?Vector.Shapes.rect(r,o.x,o.y,o.width+o.x,o.height+o.y):Vector.Shapes.roundRect(r,o.x,o.y,o.width,o.height,o.rx,o.ry)}o.style&&(r.save(),o.style.fill&&(u=o.style.fill,u=n.defs[u.fillStyle]||u,n.applyStyle(r,u,"fillStyle"),r.fill()),o.style.stroke&&(u=o.style.stroke,u.lineCap&&(r.lineCap=u.lineCap),u.lineJoin&&(r.lineJoin=u.lineJoin),u.miterLimit&&(r.miterLimit=u.miterLimit),u.strokeWidth&&(r.lineWidth=u.strokeWidth),u.strokeStyle&&(u=n.defs[u.strokeStyle]||u,n.applyStyle(r,u,"strokeStyle"),r.stroke())),r.restore()),o.childNodes&&t(o.childNodes),r.restore()}},n=this,r=e.ctx||this.ctx;this.VOB.Matrix=e.Matrix||{A:1,B:0,X:0,C:0,D:1,Y:0},t([this.VOB])},n.prototype.stringify=function(e){var t=e.VOB,e=e.defs,n;for(n in e);for(n in t);},n.prototype.SVGParser=function(e){if(e.node){if(e.doc.childNodes.length)var t=e.doc.childNodes;else{var i=String(e.doc),i=i.substr(8,i.length-9);if(!r[i])return;t=[e.doc]}e.defs&&(this.defs=e.defs);for(var s=e.node.childNodes,o=e.svg,u=e.skipDraw,a=this.ctx,l=0,c=t.length;l<c;l++){var h=t[l],i=String(h),p="";a.save();switch(i=i.substr(8,i.length-9)){case"SVGSVGElement":this.currentNode=p=this.getAttributes(a,h,{id:"string"
,x:"coordinate",y:"coordinate",width:"coordinate",height:"coordinate",viewBox:"numarray"}),p.Matrix={A:1,B:0,X:0,C:0,D:1,Y:0},this.VOB=p,this.ctx.canvas.style.border="1px solid rgba(0,0,0,0.1)",this.ctx.canvas.width=p.width||0,this.ctx.canvas.height=p.height||0,this.document.width=this.ctx.canvas.width,this.document.height=this.ctx.canvas.height,e.debug||(this.document.style.left=this.ctx.canvas.width+"px");if(p.viewBox){var o=p.width,i=p.height,d=p.viewBox[2]-p.viewBox[0],v=p.viewBox[3]-p.viewBox[1];if(o!==d||i!==v){var d=o/d,v=i/v,m=Math.min(d,v);a.translate(o/2,i/2),a.scale(m,m),a.translate(-o/2*1/d,-i/2*1/v);var g=new Vector.Transform(p.Matrix);g.translate(o/2,i/2),g.scale(m,m),g.translate(-o/2*1/d,-i/2*1/v),p.Matrix=g.Matrix}}s.push(p),o=s[0],p.childNodes=[],p.childNodes=this.SVGParser({doc:h,node:p,svg:o});break;case"SVGTitleElement":o.title=h.textContent;break;case"SVGDescElement":o.desc=h.textContent;break;case"SVGSwitchElement":case"SVGGElement":this.currentNode=p=this.getAttributes(a,h,{id:"string"}),p.parentNode=e.node,p.type="G",a.beginPath(),this.parseTransform(h,!0),this.parseClipPath(h,!0),p.style=this.parseStyle(a,h,!0),h.hasChildNodes&&(p.childNodes=[],p.childNodes=this.SVGParser({doc:h,node:p,svg:o}),s.push(p));break;case"SVGUseElement":if(h=h.getAttribute("xlink:href")||h.getAttribute("href"))if(this.currentNode=p={},p.parentNode=e.node,p.type="Use",h=h.substr(1),!this.defs[h])h=this.element.getElementById(h),a.beginPath(),this.parseTransform(h,!0),this.parseClipPath(h),p.childNodes=[],p.childNodes=this.SVGParser({skipFill:e.skipFill,doc:h,node:p,svg:o}),s.push(p);break;case"SVGFEGaussianBlurElement":this.currentNode=p=this.getAttributes(a,h,{id:"string",stdDeviation:"float"}),p.parentNode=e.node,p.type="GaussianBlur",s.push(p);break;case"SVGTextElement":this.currentNode=p=this.getAttributes(a,h,{"font-size":"float","font-family":"string","font-weight":"string","line-height":"float",id:"string",x:"float",y:"float"},"style"),p.parentNode=e.node,p.type="Text",p.text=h.textContent,a.beginPath(),this.parseTransform(h,!0),this.parseClipPath(h,!0),a.font=p.fontWeight+" "+p.fontSize+"px "+p.fontFamily,p.style=this.parseStyle(a,h,!0),u||(p.style.fill&&(this.applyStyle(a,p.style.fill,"fillStyle"),a.fillText(p.text,p.x,p.y)),p.style.stroke&&p.style.stroke.style&&(this.applyStyle(a,p.style.stroke,"strokeStyle"),a.strokeText(p.text,p.x,p.y))),s.push(p);break;case"SVGRectElement":this.currentNode=p=this.getAttributes(a,h,{id:"string",x:"float",y:"float",rx:"float",ry:"float",width:"float",height:"float"}),p.bbox={x1:p.x,y1:p.y,x2:p.width+p.x,y2:p.height+p.y},p.parentNode=e.node,p.type="Rect",p.x||(p.x=0),p.y||(p.y=0),a.beginPath(),this.parseTransform(h,!0),this.parseClipPath(h,!0),typeof p.rx=="undefined"?Vector.Shapes.rect(a,p.x,p.y,p.width+p.x,p.height+p.y):Vector.Shapes.roundRect(a,p.x,p.y,p.width,p.height,p.rx,p.ry),p.style=this.parseStyle(a,h,!0),s.push(p);break;case"SVGCircleElement":this.currentNode=p=this.getAttributes(a,h,{id:"string",cx:"float",cy:"float",r:"float"}),p.bbox={x1:p.cx-p.r,y1:p.cy-p.r,x2:p.cx+p.r,y2:p.cy+p.r},p.parentNode=e.node,p.type="Circle",a.beginPath(),this.parseTransform(h,!0),this.parseClipPath(h,!0),Vector.Shapes.ellipse(a,p.cx,p.cy,p.r,p.r),p.style=this.parseStyle(a,h,!0),s.push(p);break;case"SVGEllipseElement":this.currentNode=p=this.getAttributes(a,h,{id:"string",cx:"float",cy:"float",rx:"float",ry:"float"}),p.bbox={x1:p.cx-p.rx,y1:p.cy-p.ry,x2:p.cx+p.rx,y2:p.cy+p.ry},p.parentNode=e.node,p.type="Ellipse",a.beginPath(),this.parseTransform(h,!0),this.parseClipPath(h,!0),Vector.Shapes.ellipse(a,p.cx,p.cy,p.rx,p.ry),p.style=this.parseStyle(a,h,!0),s.push(p);break;case"SVGLineElement":this.currentNode=p=this.getAttributes(a,h,{id:"string",x1:"float",y1:"float",x2:"float",y2:"float"}),p.bbox={x1:p.x1,y1:p.y1,x2:p.x2,y2:p.y2},p.parentNode=e.node,p.type="Line",a.beginPath(),this.parseTransform(h,!0),this.parseClipPath(h,!0),Vector.Shapes.line(a,p.x1,p.y1,p.x2,p.y2),p.style=this.parseStyle(a,h,!0),s.push(p);break;case"SVGPolylineElement":case"SVGPolygonElement":p=h.getAttribute("points");if(typeof p=="undefined")break;d=p.trim().split(" "),p=[],v=0;for(m=d.length;v<m;v++)d[v]&&p.push(d[v]);p="M"+p.join(" L")+"z",this.currentNode=i==="SVGPolylineElement"?p={parentNode:e.node,d:p}:p={parentNode:e.node,d:"L"+p},p.data=n.toVOBPath(p.d),p.bbox=new Vector.BBox(p.data),p.parentNode=e.node,p.type="Path",a.beginPath(),this.parseTransform(h,!0),this.parseClipPath(h,!0),Vector.Shapes.VOBPath(a,p.data),p.style=this.parseStyle(a,h,!0),s.push(p);break;case"SVGPathElement":this.currentNode=p={parentNode:e.node,d:h.getAttribute("d")},p.data=n.toVOBPath(p.d),p.bbox=new Vector.BBox(p.data),p.type="Path",a.beginPath(),this.parseTransform(h,!0),this.parseClipPath(h,!0),Vector.Shapes.VOBPath(a,p.data),p.style=this.parseStyle(a,h,!0),s.push(p)}a.restore()}return s}},n.prototype.applyStyle=function(e,t,n){var r=new Vector.Transform;if(t.gradientTransform){var i=t.gradientTransform;if(this.currentNode&&this.currentNode.Matrix){var s=this.currentNode.Matrix,o=this.VOB.Matrix;r.transform(o.A,o.B,o.C,o.D,o.X,o.Y),r.transform(s.A,s.B,s.C,s.D,s.X,s.Y),r.transform(i.A,i.B,i.C,i.D,i.X,i.Y),s=r.Matrix}}switch(t.type){case"LinearGradient":s&&e.setTransform(s.A,s.B,s.C,s.D,s.X,s.Y),r=e.createLinearGradient(t.x1,t.y1,t.x2,t.y2),i=0;for(s=t.stops.length;i<s;i++)o=t.stops[i],r.addColorStop(o.offset,o.color);e[n]=r;break;case"RadialGradient":s&&e.setTransform(s.A,s.B,s.C,s.D,s.X,s.Y),r=e.createRadialGradient(t.cx,t.cy,0,t.fx,t.fy,t.r),i=0;for(s=t.stops.length;i<s;i++)o=t.stops[i],r.addColorStop(o.offset,o.color);e[n]=r;break;case"Pattern":break;default:e[n]=t[n]}},n.prototype.parseStyle=function(t,n,r){function i(e){var r=u[e]||n.getAttribute(e);if(r){if(r==="none")r="rgba(0,0,0,0)";else if(r.substr(0,3)==="url"){var r=r.substr(5,r.indexOf(")")-5),i=o.parseDefs(t,r,e);i&&o.applyStyle(t,i,e+"Style")}else(i=u["fill-opacity"]||n.getAttribute("fill-opacity"))&&i!=="1"&&(r=r.substr(1),r.length===3&&(r=r[0]+r[0]+r[1]+r[1]+r[2]+r[2]),r=Color.Space.HEX_RGB("0x"+r),r.A=parseFloat(i),r=Color.Space.RGBA_W3(r)),t[e+"Style"]=r;return r}}var s={fill:{fillStyle:"#000"}},o=this,u=e(n);t.save();var a=u.opacity||n.getAttribute("opacity");a&&(s.globalAlpha=a,t.globalAlpha=a);if(a=u.filter||n.getAttribute("filter")){var f=a.substr(5,a.length-6);!this.defs[f]&&(a=this.element.getElementById(f))&&(this.defs[f]=this.getAttributes(t,a,{id:"string",x:"float",y:"float",width:"float",height:"float"}),this.defs[f].filter=this.SVGParser({doc:a,node:{childNodes:[]}})),s.filter=f}(a=i("fill"))?(s.fill=this.getAttributes(t,n,{"fill-rule":"string","fill-opacity":"float"},"style"),s.fill.fillStyle=a,this.stateFill=s.fill):(a=this.currentNode.parentNode,s.fill=a.style?this.stateFill=a.style.fill:this.stateFill={fillStyle:"#000"}),r&&this.stateFill&&(t.fillStyle=this.stateFill.fillStyle,t.fill());if(a=i("stroke"))s.stroke=this.getAttributes(t,n,{"stroke-width":"coordinate","stroke-linecap":"string","stroke-linejoin":"string","stroke-miterlimit":"float","stroke-dasharray":"numarray","stroke-dashoffset":"coordinate","stroke-opacity":"float"},"style"),s.stroke.strokeStyle=a,s.stroke.strokeWidth>1e-8&&(s.stroke.strokeWidth=s.stroke.strokeWidth),this.stateStroke=s.stroke;else if(a=this.currentNode.parentNode,a.style)this.stateStroke=s.stroke=a.style.stroke;return r&&this.stateStroke&&(a=this.stateStroke,a.lineCap&&(t.lineCap=a.lineCap),a.lineJoin&&(t.lineJoin=a.lineJoin),a.miterLimit&&(t.miterLimit=a.miterLimit),a.strokeWidth&&(t.lineWidth=a.strokeWidth),a.strokeStyle&&(t.strokeStyle=a.strokeStyle),t.stroke()),t.restore(),s},n.prototype.parseDefs=function(e,t,n){if(!this.defs[t]){var r=this.element.getElementById(t);if(!r)return{};n=String(r),n=n.substr(8,n.length-9);if(n==="SVGPatternElement"){var i=document.createElement("canvas").getContext("2d");i.VOBPath=Vector.Shapes.VOBPath,n=this.parsePattern(e,r,n),i.canvas.width=n.width,i.canvas.height=n.width,n.childNodes=this.SVGParser({ctx:i,doc:r,node:{childNodes:[]}}),i.canvas.width&&(n.pattern=e.createPattern(i.canvas,"repeat")),this.defs[t]=n}else this.defs[t]=this.parseGradient(e,r,n)}return this.defs[t]},n.prototype.parseGradient=function(t,n,r){if(r==="SVGLinearGradientElement"){var i=this.getAttributes(t,n,{id:"string",x1:"float",y1:"float",x2:"float",y2:"float",spreadMethod:"string",gradientUnits:"string",gradientTransform:"gradientTransform"});i.type="LinearGradient"}else i=this.getAttributes(t,n,{id:"string",cx:"float",cy:"float",r:"float",fx:"float",fy:"float",spreadMethod:"string",gradientUnits:"string",gradientTransform:"gradientTransform"}),typeof i.fx=="undefined"&&(i.fx=i.cx,i.fy=i.cy),i.type="RadialGradient";var s=[],o=n.childNodes;if(n.getAttribute("xlink:href"))s=n.getAttribute("xlink:href").substr(1),s=this.parseDefs(t,s,r),i.stops=s.stops;else{for(var u in o)if(t=o[u],r=String(t),r.substr(8,r.length-9)==="SVGStopElement")n=e(t),r=n["stop-color"]||t.getAttribute("stop-color"),(n=n["stop-opacity"]||t.getAttribute("stop-opacity"))&&n!=="1"&&(r=r.substr(1),r.length===3&&(r=r[0]+r[0]+r[1]+r[1]+r[2]+r[2]),r=Color.Space.HEX_RGB("0x"+r),r.A=parseFloat(n),r=Color.Space.RGBA_W3(r)),s.push({offset:parseFloat(t.getAttribute("offset")),color:r});i.stops=s}return i},n.prototype.parsePattern=function(e,t){var n=this.getAttributes(e,t,{patternUnits:"string",patternContentUnits:"string",patternTransform:"patternTransform",x:"coordinate",y:"coordinate",width:"coordinate",height:"coordinate",preserveAspectRatio:"string",href:"xlink:href"});return n.type="Pattern",n.id=t.id,n},n.prototype.parseTransform=function(e,n,r){var i=this.ctx,s=this.currentNode,e=e.getAttribute(r||"transform");if(n)if(s.parentNode.Matrix)var o=s.parentNode.Matrix,r=s.Matrix={A:o.A,B:o.B,C:o.C,D:o.D,X:o.X,Y:o.Y};else r=s.Matrix={A:1,B:0,C:0,D:1,X:0,Y:0};else r={A:1,B:0,C:0,D:1,X:0,Y:0};if(e){o=new Vector.Transform(r);if(e.substr(0,6)==="matrix")e=e.substr(7,e.length-8),e=t(e),o.transform(e[0],e[1],e[2],e[3],e[4],e[5]),n&&i.transform(e[0],e[1],e[2],e[3],e[4],e[5]);else if(e.indexOf("(")!==-1)for(var e=e.substr(0,e.length-1).split(")"),u=0,a=e.length;u<a;u++){var f=e[u].replace(/^\s+|\s+$/,"").split("("),r=f[0].replace(/^\s+|\s+$/,""),f=f[1];f.indexOf(",")&&(f=t(f.split(",")));switch(r){case"translate":f.length===2?(n&&i.translate(f[0],f[1]),o.translate(f[0],f[1])):(n&&i.translate(f[0],0),o.translate(f[0]));break;case"scale":f.length===2?(n&&i.scale(f[0],f[1]),o.scale(f[0],f[1])):(n&&i.scale(f[0],f),o.scale(f[0],f[0]));break;case"rotate":r=f[0]*DEG_RAD,f.length===3?(n&&(i.translate(f[1],f[2]),i.rotate(r),i.translate(-f[1],-f[2])),o.translate(f[1],f[2]),o.rotate(r),o.translate(-f[1],-f[2])):(n&&i.rotate(r),o.rotate(r));break;case"skewX":r=f[0]*DEG_RAD,n&&i.transform(1,0,Math.tan(r),1,0,0),o.shear(r,0);break;case"skewY":r=f[0]*DEG_RAD,n&&i.transform(1,Math.tan(r),0,1,0,0),o.shear(0,r)}}return n&&(s.Matrix=o.Matrix),o.Matrix}},n.prototype.parseClipPath=function(e,t){var n=this.ctx,r=this.currentNode,i=e.getAttribute("clip-path");if(i){var s=i.substr(5,i.length-6);if(this.defs[s])return this.defs[s];if(i=this.element.getElementById(s))return this.defs[s]=this.getAttributes(n,i,{id:"string",x:"float",y:"float",width:"float",height:"float"}),i=this.SVGParser({doc:i,node:{childNodes:[]},skipFill:!0,skipDraw:!0}),n.clip(),n.beginPath(),this.defs[s].d=i,t&&(r.clip=i),this.defs[s]}},n.prototype.getAttributes=function(n,r,i,s){n={};if(r){var o=e(r),u;for(u in i){var a=i[u];if(s){var f=o[u]||r.getAttribute(u);u.indexOf("-")!==-1&&(u=u.split("-"),u[1]&&(u[1]=u[1].ucfirst()),u=u.join(""))}else f=r.getAttribute(u)||o[u];if(f)switch(a){case"numarray":n[u]=t(f);break;case"coordinate":n[u]=parseFloat(f);break;case"float":n[u]=parseFloat(f);break;case"int":n[u]=parseInt(f);break;case"transform":case"patternTransform":case"gradientTransform":n[u]=this.parseTransform(r,!1,i[u]);break;case"string":n[u]=f}}return n}};var r={SVGTextElement:!0,SVGRectElement:!0,SVGCircleElement:!0,SVGEllipseElement:!0,SVGLineElement:!0,SVGPolylineElement:!0,SVGPolygonElement:!0,SVGPathElement:!0}}(),typeof Vector=="undefined"&&(Vector={}),typeof Vector.SVG=="undefined"&&(Vector.SVG={}),function(){var e=Vector.SVG;e.toVOBFont=function(n,r){var i=new XMLHttpRequest;i.open("GET",n,!0),i.onreadystatechange=function(){if(i.readyState==4){var n=document.createElement("div"),s=null;n.innerHTML=i.responseText;var o=n.getElementsByTagName("font")[0],u=n.getElementsByTagName("font-face")[0],a=u.getAttribute("font-family"),l=(s=u.getElementsByTagName("font-face-name")[0])?s.getAttribute("name"):a,p=u.getAttribute("font-style")||"all",d=u.getAttribute("font-variant")||"normal",v=u.getAttribute("font-weight")||"all",m=u.getAttribute("font-stretch")||"normal",y=u.getAttribute("unicode-range")||"U+0-10FFFF",b=u.getAttribute("panose-1")||"0 0 0 0 0 0 0 0 0 0",w=u.getAttribute("cap-height")||0,E=u.getAttribute("x-height")||0,S=parseFloat(u.getAttribute("units-per-em")||1e3,10),x={x:parseFloat(o.getAttribute("horiz-adv-x"),10),y:parseFloat(o.getAttribute("vert-adv-y")||0,10)||S};parseFloat(n.getElementsByTagName("missing-glyph")[0].getAttribute("horiz-adv-x")||x.x,10);var o={horiz:{x:parseFloat(o.getAttribute("horiz-origin-x")||0,10),y:parseFloat(o.getAttribute("horiz-origin-y")||0,10)},vert:{x:parseFloat(o.getAttribute("vert-origin-x")||0,10),y:parseFloat(o.getAttribute("vert-origin-y")||0,10)}},T=parseFloat(u.getAttribute("ascent")||S-o.vert.y,10),N=parseFloat(u.getAttribute("descent")||o.vert.y,10),C={},k=["alphabetic","ideographic","mathematical","hanging"],L;for(L in k)(s=u.getAttribute(L=k[L]))&&(C[L]=parseFloat(s,10));var u={},k=n.getElementsByTagName("glyph"),A;for(L in k)if((s=k[L]).getAttribute){A=s.getAttribute("unicode");if(A.match(t))if(n=A,n.match(t)){A={amp:"&",apos:"'",quot:'"',lt:"<",gt:">"};for(var O=void 0,M="";(O=t.exec(n))!==null;)M+=O[1].charAt(1)=="x"?String.fromCharCode(O[1].slice(2),16):isNaN(parseFloat(O[1].slice(1),10))?A(O[1]):String.fromCharCode(O[1].slice(1));A=M}else A=void 0;n=s.getAttribute("d"),u[A]={name:s.getAttribute("glyph-name"),xadv:parseFloat(s.getAttribute("horiz-adv-x")||x.x,10),d:n,data:e.toVOBPath(n)}}E||e.toVOBPath(u[120].path),r&&r({family:a,name:l,style:p,variant:d,weight:v,stretch:m,range:y,panose:b.split(" ").map(parseFloat),capHeight:w,unitsPerEm:S,origin:o,advance:x,ascent:T,descent:N,xheight:E,baseline:C,glyphs:u})}},i.send(null)};var t=/&(quot|apos|lt|gt|amp|#x[^;]+|#\d+);/g}(),typeof Vector=="undefined"&&(Vector={}),typeof Vector.SVG=="undefined"&&(Vector.SVG={}),function(){function e(e,t,n,r,i,s,o,u,a){var f=Math.PI,l=o*(f/180),o=Math.sin(l),l=Math.cos(l),c=[],n=Math.abs(n),r=Math.abs(r),h=l*(u-e)*.5+o*(a-t)*.5,p=l*(a-t)*.5-o*(u-e)*.5,h=h*h/(n*n)+p*p/(r*r);h>1&&(h=Math.sqrt(h),n*=h,r*=h);var h=l/n,p=o/n,d=-o/r,v=l/r,m=h*u+p*a,a=d*u+v*a,u=h*e+p*t,e=d*e+v*t,h=1/((u-m)*(u-m)+(e-a)*(e-a))-.25;h<0&&(h=0),h=Math.sqrt(h),s==i&&(h=-h),i=.5*(m+u)-h*(e-a),t=.5*(a+e)+h*(u-m),m=Math.atan2(a-t,m-i),a=Math.atan2(e-t,u-i)-m,a<0&&s==1?a+=2*f:a>0&&s==0&&(a-=2*f),s=Math.ceil(Math.abs(a/(f*.5+.001)));for(f=0;f<s;f++){var e=m+f*a/s,g=m+(f+1)*a/s,h=l*n,p=-o*r,d=o*n,v=l*r,u=.5*(g-e),y=8/3*Math.sin(u*.5)*Math.sin(u*.5)/Math.sin(u),u=i+Math.cos(e)-y*Math.sin(e),e=t+Math.sin(e)+y*Math.cos(e),b=i+Math.cos(g),w=t+Math.sin(g),E=b+y*Math.sin(g),g=w-y*Math.cos(g);c[f]={cmd:"C",x1:h*u+p*e,y1:d*u+v*e,x2:h*E+p*g,y2:d*E+v*g,x:h*b+p*w,y:d*b+v*w}}return c}var t={m:2,l:2,h:1,v:1,c:6,s:4,q:4,t:2,a:7,z:0},n=Vector.SVG;n.fromVOBPath=function(e){for(var t="",n={},r=0,i=e.length;r<i;r++)switch((n=e[r]).cmd){case"M":t+="M"+n.x+" "+n.y+" ";break;case"L":t+="L"+n.x+" "+n.y+" ";break;case"C":t+="C"+n.x1+" "+n.y1+", "+n.x2+" "+n.y2+", "+n.x+" "+n.y+" ";break;case"Q":t+="Q"+n.x1+" "+n.y1+", "+n.x+" "+n.y+" ";break;case"Z":t+="Z "}return t.substr(0,t.length-1)},n.toVOBPath=function(n){if(n){for(var n=n.replace(/([^e])([+-])/g,"$1 $2"),n=n.split(/([mlhvcsqtaz])|[, ]/gi),r=[],i=0,s=n.length;i<s;i++)n[i]&&r.push(n[i]);for(var n=r,r="",o=i=0,u=0,a=0,f=0,l,p,d="",v=0,m=[];r=n[i];){var g=t[r.toLowerCase()]+1;if(g){for(var y=1,s=g,b=[];y<s;y++)b.push(parseFloat(n[i+y]));prevType=r,v=g,i+=g}else{y=0,s=v-1;for(b=[];y<s;y++)b.push(parseFloat(n[i+y]));r=d=="m"?"l":d=="M"?"L":d,i+=v-1}if(r){switch(r){case"M":o=b[0],u=b[1],a=o,f=u,l=p=null,m.push({cmd:"M",x:o,y:u});break;case"m":o+=b[0],u+=b[1],a=o,f=u,l=p=null,m.push({cmd:"M",x:o,y:u});break;case"L":o=b[0],u=b[1],l=p=null,m.push({cmd:"L",x:o,y:u});break;case"l":o+=b[0],u+=b[1],l=p=null,m.push({cmd:"L",x:o,y:u});break;case"H":o=b[0],l=p=null,m.push({cmd:"L",x:o,y:u});break;case"h":o+=b[0],l=p=null,m.push({cmd:"L",x:o,y:u});break;case"V":u=b[0],l=p=null,m.push({cmd:"L",x:o,y:u});break;case"v":u+=b[0],l=p=null,m.push({cmd:"L",x:o,y:u});break;case"C":o=b[4],u=b[5],l=b[2],p=b[3],m.push({cmd:"C",x1:b[0],y1:b[1],x2:b[2],y2:b[3],x:b[4],y:b[5]});break;case"c":b[4]==0&&b[5]==0&&(b[4]+=1e-4,b[5]+=1e-4),m.push({cmd:"C",x1:b[0]+o,y1:b[1]+u,x2:b[2]+o,y2:b[3]+u,x:b[4]+o,y:b[5]+u}),l=o+b[2],p=u+b[3],o+=b[4],u+=b[5];break;case"S":if(l==null||!d.match(/[sc]/i))l=o,p=u;m.push({cmd:"C",x1:o-(l-o),y1:u-(p-u),x2:b[0],y2:b[1],x:b[2],y:b[3]}),l=b[0],p=b[1],o=b[2],u=b[3];break;case"s":b[2]==0&&b[3]==0&&(b[2]+=1e-4,b[3]+=1e-4);if(l==null||!d.match(/[sc]/i))l=o,p=u;m.push({cmd:"C",x1:o-(l-o),y1:u-(p-u),x2:o+b[0],y2:u+b[1],x:o+b[2],y:u+b[3]}),l=o+b[0],p=u+b[1],o+=b[2],u+=b[3];break;case"Q":l=b[0],p=b[1],o=b[2],u=b[3],m.push({cmd:"Q",x1:b[0],y1:b[1],x:b[2],y:b[3]});break;case"q":b[2]==0&&b[3]==0&&(b[2]+=1e-4,b[3]+=1e-4),m.push({cmd:"Q",x1:b[0]+o,y1:b[1]+u,x:b[2]+o,y:b[3]+u}),l=o+b[0],p=u+b[1],o+=b[2],u+=b[3];break;case"T":l==null||!d.match(/[qt]/i)?(l=o,p=u):(l=o-(l-o),p=u-(p-u)),m.push({cmd:"Q",x1:l,y1:p,x:b[0],y:b[1]}),o=b[0],u=b[1];break;case"t":b[0]==0&&b[1]==0&&(b[0]+=1e-4,b[1]+=1e-4),l==null||!d.match(/[qt]/i)?(l=o,p=u):(l=o-(l-o),p=u-(p-u)),m.push({cmd:"Q",x1:l,y1:p,x:o+b[0],y:u+b[1]}),o+=b[0],u+=b[1];break;case"A":s=e(b[5],b[6],b[0],b[1],b[3],b[4],b[2],o,u);for(o=0;o<s.length;o++)m.push(s[o]);o=b[5],u=b[6];break;case"a":b[5]+=o,b[6]+=u,s=e(b[5],b[6],b[0],b[1],b[3],b[4],b[2],o,u);for(o=0;o<s.length;o++)m.push(s[o]);o=b[5],u=b[6];break;case"Z":f=a=0,m.push({cmd:"Z"});break;case"z":o=a,u=f,m.push({cmd:"Z"})}d=r}}return m}}}(),function(){typeof Vector=="undefined"&&(Vector={}),typeof Vector.Transform=="undefined"&&(Vector.Transform={}),Vector.Transform=function(e){return this.Matrix=typeof e=="undefined"?{A:1,B:0,X:0,C:0,D:1,Y:0}:typeof e[0]=="undefined"?e:this.clone(e),this},Vector.Transform.prototype={point2D:function(e,t){var n=this.Matrix;return{x:n.A*e+n.C*t+n.X,y:n.B*e+n.D*t+n.Y}},invert:function(e){e=e||this.Matrix,typeof e.A=="undefined"&&(e=this.clone(e));var t=e.A*e.D-e.B*e.C;return delete this.Matrix,this.combine({A:e.D/t,B:-e.B/t,X:(e.B*e.Y-e.D*e.X)/t,C:-e.C/t,D:e.A/t,Y:(e.C*e.X-e.A*e.Y)/t}),this},transform:function(e,t,n,r,i,s){var o=this.Matrix;return this.Matrix={A:o.A*e+o.C*t,B:o.B*e+o.D*t,C:o.A*n+o.C*r,D:o.B*n+o.D*r,X:o.A*i+o.C*s+o.X,Y:o.B*i+o.D*s+o.Y},this},setTransform:function(e,t,n,r,i,s){return this.Matrix={A:e,B:t,C:n,D:r,X:i,Y:s},this},rotate:function(e){var t=this.Matrix,n=Math.cos(e),e=Math.sin(e);return this.Matrix={A:t.A*n+t.B*-e,B:t.A*e+t.B*n,C:t.C*n+t.D*-e,D:t.C*e+t.D*n,X:t.X,Y:t.Y},this},scale:function(e,t){typeof t=="undefined"&&(t=e);var n=this.Matrix;return this.Matrix={A:n.A*e,B:n.B*t,C:n.C*e,D:n.D*t,X:n.X,Y:n.Y},this},shear:function(e,t){var n=this.Matrix,r=n.A,i=n.B,s=n.C,o=n.D,u=Math.tan(e),a=Math.tan(t);return n.A=r-i*u,n.B=r*a+i,n.C=s-o*u,n.D=s*a+o,this},translate:function(e,t){typeof t=="undefined"&&(t=0);var n=this.Matrix;return n.X=n.A*e+n.C*t+n.X,n.Y=n.B*e+n.D*t+n.Y,this},relative:function(e,t){var n=this.Matrix;return delete this.Matrix,this.combine({A:1,B:0,X:-e,C:0,D:1,Y:-t},{A:n.A,B:n.B,X:n.X,C:n.C,D:n.D,Y:n.Y},{A:1,B:0,X:e,C:0,D:1,Y:t}),this},combine:function(e){var t=[];if(typeof e.A=="number")for(var n=0;n<arguments.length;n++)t[n]=arguments[n];else t=e;var r=this.Matrix,i=[];for(n in t)r?(i=t[n],r={A:r.A*i.A+r.B*i.C,B:r.A*i.B+r.B*i.D,C:r.C*i.A+r.D*i.C,D:r.C*i.B+r.D*i.D,X:r.A*i.X+r.C*i.Y+r.X,Y:r.B*i.X+r.D*i.Y+r.Y}):r=t[n];return this.Matrix=r,this},clone:function(e){return e=e||this.Matrix,typeof e.A=="undefined"?{A:e[0],B:e[1],C:e[2],D:e[3],X:e[4],Y:e[5]}:{A:e.A,B:e.B,C:e.C,D:e.D,X:e.X,Y:e.Y}},reset:function(){return this.Matrix={A:1,B:0,X:0,C:0,D:1,Y:0},this},toString:function(){var e=this.Matrix;return e.A+","+e.B+","+e.C+","+e.D+","+e.X+","+e.Y},apply:function(e){var t=this.Matrix;return e.setTransform(t.A,t.B,t.C,t.D,t.X,t.Y),this}}}(),typeof widgets=="undefined"&&(widgets={}),function(e){var t=!!document.createElement("canvas").getContext,n=Math.PI,r={id:"loader",bars:12,radius:0,lineWidth:20,lineHeight:70,display:!0},i=function(){if(window.innerWidth&&window.innerHeight)var e=window.innerWidth,t=window.innerHeight;else document.body&&document.body.offsetWidth?(e=window.innerWidth=document.body.offsetWidth,t=window.innerHeight=document.body.offsetHeight):document.compatMode==="CSS1Compat"&&document.documentElement&&document.documentElement.offsetWidth&&(e=window.innerWidth=document.documentElement.offsetWidth,t=window.innerHeight=document.documentElement.offsetHeight);return{width:e,height:t}};e.Loader=function(e){function s(){var t=i(),r=t.width-d,s=t.height-d;a.style.left=r/2+"px",a.style.top=s/2+"px",e.message&&(o.span.style.left=(r+d)/2-o.span.offsetWidth/2+"px",o.span.style.top=s/2+d-10+"px"),w.save(),w.clearRect(0,0,d,d),w.translate(d/2,d/2);for(var t=360-360/h,u=0;u<h;u++){r=u/h*2*n+b,w.save(),w.translate(p*Math.sin(-r),p*Math.cos(-r)),w.rotate(r);var f=-e.lineWidth/2,r=e.lineWidth,s=e.lineHeight,l=r/2;w.beginPath(),w.moveTo(f+l,0),w.lineTo(f+r-l,0),w.quadraticCurveTo(f+r,0,f+r,0+l),w.lineTo(f+r,0+s-l),w.quadraticCurveTo(f+r,0+s,f+r-l,0+s),w.lineTo(f+l,0+s),w.quadraticCurveTo(f,0+s,f,0+s-l),w.lineTo(f,0+l),w.quadraticCurveTo(f,0,f+l,0),w.fillStyle="hsla("+u/(h-1)*t+", 100%, 50%, 0.85)",w.fill(),w.restore()}w.restore(),b+=.07,e.messageAnimate&&(r=b/.07>>0,r%10===0)&&(o.span.innerHTML=e.message+e.messageAnimate[r/10%e.messageAnimate.length])}if(t){var o=this;if(document.body){typeof e=="string"&&(e={message:e}),typeof e=="undefined"&&(e={}),e===!1&&(e={display:!1});for(var u in r)typeof e[u]=="undefined"&&(e[u]=r[u]);var a=document.getElementById(e.id);if(a)o.span=a.parentNode.getElementsByTagName("span")[0];else{u=document.createElement("div"),u.style.cssText="color: #fff; pointer-events: none; -webkit-transition-property: opacity; -webkit-transition-duration: 1s; position: fixed; left: 0; top: 0; width: 100%; height: 100%; z-index: 10000; opacity: 1; display: none";var l=document.createElement("span");l.style.cssText="font-family: monospace; font-size: 14px; opacity: 1; display: inline-block;background: rgba(0,0,0,0.65); border-radius: 10px; padding: 10px; width: 200px; text-align: center; position: absolute; z-index: 1000;",u.appendChild(l),o.span=l,o.div=u,a=document.createElement("canvas"),document.body.appendChild(a),a.id=e.id,a.style.cssText="opacity: 1; position: absolute; z-index: 1000;",u.appendChild(a),document.body.appendChild(u)}var h=e.bars,p=e.radius,d=(e.lineHeight+20)*2+e.radius;u=i();var v=u.width-d,m=u.height-d;a.width=d,a.height=d,a.style.left=v/2+"px",a.style.top=m/2+"px",e.message&&(o.span.style.left=(v+d)/2-o.span.offsetWidth/2+"px",o.span.style.top=m/2+d-10+"px");var o=this,y=0,b=0,w=a.getContext("2d");return w.globalCompositeOperation="lighter",w.shadowOffsetX=1,w.shadowOffsetY=1,w.shadowBlur=1,w.shadowColor="rgba(0, 0, 0, 0.5)",this.message=function(t){e.message=t,t.substr(-3)==="..."?(e.message=t.substr(0,t.length-3),e.messageAnimate=[".&nbsp;&nbsp;","..&nbsp;","..."].reverse()):e.messageAnimate=!1,o.span.innerHTML=e.message+(e.messageAnimate[0]||""),y||this.start()},this.stop=function(){y&&(window.clearInterval(y),y=0),a&&a.style&&(a.parentNode.style.opacity=0,window.setTimeout(function(){a.parentNode.style.display="none",w.clearRect(0,0,d,d)},1e3))},this.start=function(){y||(a.parentNode.style.opacity=1,a.parentNode.style.display="block",o.span.style.display=e.message?"block":"none",e.background&&(o.div.style.background=e.backgrond),a.style.left=v/2+"px",a.style.top=m/2+"px",e.delay||s(),y=window.setInterval(s,30),e.message&&this.message(e.message))},e.display===!1?this:(this.start(3e4),this)}}}}(widgets);if(typeof widgets=="undefined")var widgets={};widgets.Thumbnailer=function(e){var t={backdrop:"#000",maxWidth:300,maxHeight:100,center:!0,crop:"Fit",srcs:[]};return function(e){var n=this;e||(e={});for(var r in t)typeof e[r]=="undefined"&&(e[r]=t[r]);return this.images={},this.conf=e,this.maxHeight=e.maxHeight,this.maxWidth=e.maxWidth,this.generate=function(t){var r,i=t.src,s=t.canvas,o=t.title,u=typeof FlashCanvas!="undefined",a=t.crop||e.crop,l=t.center||e.center,c=t.backdrop||e.backdrop,h=t.maxWidth||e.maxWidth,p=t.maxHeight||e.maxHeight,d=t.callback||e.callback;if(typeof s=="undefined")if(this.images[i])s=this.images[i].canvas;else if(s=document.createElement("canvas"),Event&&Event.add){var v={},m;for(m in e)v[m]=e[m];for(m in t)v[m]=t[m];Event.add(s,v)}var g=s.getContext("2d"),t=function(){h==="auto"?(s.height=p,s.width=h=r.width/r.height*p):(s.height=p==="auto"?p=r.height/r.width*h:p,s.width=h),o&&(s.title=o);var e=1;if(a!=="None")var e=h/p<r.width/r.height,t=a==="Fit",e=t&&e||!t&&!e?p/r.height:h/r.width;var n=Math.round(r.width*e)||1,t=Math.round(r.height*e)||1,n=Math.round(l?(h-n)/2:0),t=Math.round(l?(p-t)/2:0);g.save(),g.beginPath(),g.fillStyle=c,g.rect(0,0,h,p),g.fill(),g.clip(),g.translate(n,t),g.scale(e,e),g.drawImage(r,0,0),g.restore(),d&&d(s)},v=String(i);return v==="[object HTMLCanvasElement]"||u&&v==="[object]"?(r=i,t()):this.images[i]?(r=this.images[i],t()):(s.src=i,r=new Image,n.images[i]=r,n.images[i].canvas=s,u?(r.src=i,g.loadImage(r,t)):(r.onload=t,r.src=i)),s},this.regenerate=function(){for(var e in this.images)thumb.generate({src:e,canvas:this.images[e].canvas})},this}}({}),typeof widgets=="undefined"&&(widgets={}),widgets.Uploader=function(e){var t=this,e=e||{};this.action=e.action||"./upload.php?upload=true",this.confirm=e.confirm||"boolean",this.onUpload=e.onUpload,this.onProgress=e.onProgress,this.onLoad=e.onLoad,this.onError=e.onError,this.onAbort=e.onAbort,this.onChange=e.onChange,this.mode=e.mode||"read",this.maxFiles=e.maxFiles||1,this.maxFileSize=e.maxFileSize||2e8,this.directory=e.directory||!1,typeof e.fakeInput=="object"?(this.fakeInput=e.fakeInput,this.fakeInputParent=e.fakeInputParent||this.fakeInput.parentNode||document.body):typeof e.fileInput=="object"&&(this.fileInput=e.fileInput),this.dropArea=e.dropArea||document.body,this.dropAreaMessage=e.dropAreaMessage||"Drop File(s) Anywhere",this.dropAreaStyle=e.dropAreaStyle||"",this.files={},this.formats={};var n=e.formats;if(n&&n.indexOf(",")===-1)this.formats[n]=!0;else for(n=(e.formats||"jpg,jpeg,gif,png").split(",");n.length;)this.formats[n.shift().toLowerCase()]=!0;var e=function(){if(t.fileInput)var e=t.fileInput;else{e=t.fileInput=document.createElement("input"),e.style.cssText="position: absolute; top: 0; z-index: 1000; font-size: 1000px; text-align: right; width: inherit; height: inherit; cursor: pointer; right: 0px; filter: alpha(opacity: 0); opacity: 0;",e.setAttribute("type","file"),t.maxFiles>1?(e.setAttribute("name","files[]"),e.setAttribute("multiple","multiple")):e.setAttribute("name","file"),t.directory&&(e.setAttribute("directory",""),e.setAttribute("mozdirectory",""),e.setAttribute("webkitdirectory",""));var n=t.fakeInput,r=t.fakeInputContainer=document.createElement("div");r.style.cssText="position: relative; overflow: hidden;",r.className="fakeInputContainer";var s=n.width||n.offsetWidth,o=n.height||n.offsetHeight;n.onload=function(){var i=n.height||n.offsetHeight;r.style.width=(n.width||n.offsetWidth)+"px",r.style.height=i+"px",r.appendChild(n),r.appendChild(e),t.fakeInputParent.appendChild(r)},s!==0&&o!==0&&n.onload()}e.onchange=function(t){if(e.files&&e.files.length)i(t.target.files);else{var t=e.value,n=t.replace(/\\/g,"/").replace(/.*\//,"");i([{src:t,name:n}])}}},r={length:0},i=function(e){var n=0,i=function(e,n){typeof n.src!="undefined"&&(n=[n]);for(var i in n){var s=n[i],u=s.name+s.size,a=r[u],a=t.files[a];typeof a=="undefined"&&(a=r[u]=r[s.name],delete r[s.name],a=t.files[a]),a.src=s.src,a.size=s.size,a.type=s.type,a.name=s.name}o()},s=function(e){var n=r[e.name+(e.size||"")];if(e.type&&e.type.indexOf("image")===-1){var s=new FileReader;s.onload=function(){return t.files[n].src=event.target.result,t.files[n].isLoaded=!0,o()},s.readAsText(e)}else try{var u=(window.URL||window.webkitURL).createObjectURL(e);return t.files[n].src=u,t.files[n].isLoaded=!0,o()}catch(a){try{s=new FileReader,s.onload=function(e){return t.files[n].src=e.target.result,t.files[n].isLoaded=!0,o()},s.readAsDataURL(e)}catch(f){e.upload=new t.upload(e,i)}}},o=function(){var u=e[n];if(++n>t.maxFiles||!u){if(t.maxFiles===1){var a={},u=e[0],f=r[u.name+(u.size||"")];return a[f]=t.files[f],t.files[f]?t.onChange(a,t):t.onError("UPLOAD_ERR_FORMAT",t)}for(f in t.files);return t.files[f]?t.onChange(t.files,t):void 0}f=u.name+(u.size||"");if(a=t.files[r[f]]){if(t.mode==="upload"&&a.isUploaded)return o();if(t.mode==="read"&&a.isLoaded)return o()}f=r[f]=r.length++,a=u.name,a=a.substr(a.lastIndexOf(".")+1).toLowerCase();if(!t.formats[a])return o();if((u.fileSize||u.size)===0)return o();t.files[f]=u;if(t.mode==="upload")u.upload=new t.upload(u,i);else{if(t.mode!=="read")return o();s(u)}};o()};this.errors={UPLOAD_ERR_INI_SIZE:"The uploaded file exceeds the upload_max_filesize directive",UPLOAD_ERR_FORM_SIZE:"The uploaded file exceeds the MAX_FILE_SIZE directive",UPLOAD_ERR_PARTIAL:"The uploaded file was only partially uploaded",UPLOAD_ERR_NO_FILE:"No file was uploaded",UPLOAD_ERR_FORMAT:"The uploaded file was an invalid format",UPLOAD_ERR_XHTTP:""},this.upload=function(e,n){this.files=String(e)==="[object Object]"?[e]:e,this.bytes=this.timeLapse=this.timeRemaining=this.transferPercent=this.transferTotal=this.transferSpeed=0,t.onUpload&&t.onUpload(this),window.FormData?o(this,n):u(this,n)};var s=function(e,t){switch(Object.prototype.toString.call(e)){case"[object Array]":for(var n=0,r=e.length;n<r;n++)t(e[n]);break;case"[object Object]":for(n in e)t(e[n]);break;default:t(e)}},o=function(e,n){var r=new FormData;s(e.files,function(e){if(typeof e.data!="undefined")r.append(e.name,e.data);else if(e.src&&e.src.substr(0,11)==="data:image/"){var t=JSON.stringify(e);r.append(e.name,t)}else r.append(e.name+(e.size||""),e)});var i=new XMLHttpRequest;i.upload.onprogress=function(n){if(n.lengthComputable){var r=n.loaded;e.transferPercent=Math.round(r*100/n.total),e.transferTotal=a(r);var i=(r-e.bytes)*2;i!==0&&(e.bytes=r,e.transferSpeed=a(i),e.timeRemaining=f((n.total-e.bytes)/i),e.timeLapse=f(Date.now()-n.timeStamp)),t.onProgress&&t.onProgress(e)}else e.transferSpeed=0,e.transferTotal=0,e.transferPercent=0,e.timeRemaining=0},i.onload=function(r){s(e.files,function(e){typeof e.date=="undefined"&&(e.isUploaded=!0)});var i=r.target.responseText;if(t.confirm==="json")try{i=JSON.parse(i)}catch(o){console.log(r.target.responseText)}t.onLoad&&t.onLoad(e,i),n&&n(e,i)},i.onerror=function(){t.onError&&t.onError("UPLOAD_ERR_XHTTP",e)},i.onabort=function(){t.onAbort&&t.onAbort(e)},i.open("POST",t.action),i.send(r)},u=function(e,n){var r=document.createElement("form");document.body.appendChild(r);var i=document.createElement("iframe");i.setAttribute("id","upload_iframe"),i.setAttribute("name","upload_iframe"),i.setAttribute("width","0"),i.setAttribute("height","0"),i.setAttribute("border","0"),i.setAttribute("style","width: 0; height: 0; border: none;"),r.appendChild(i),window.frames.upload_iframe.name="upload_iframe",i.onload=function(){i.onload="";if(i.contentDocument)var o=i.contentDocument.body;else i.contentWindow?o=i.contentWindow.document.body:i.document&&(o=i.document.body);if(o.innerHTML){s(e.files,function(e){typeof e.date=="undefined"&&(e.isUploaded=!0)}),o=o.innerHTML;if(t.confirm==="json")try{o=JSON.parse(o)}catch(u){console.log(o)}t.onLoad&&t.onLoad(e,o),n&&n(e,o)}setTimeout(function(){r.parentNode.removeChild(r),t.fileInput.parent&&t.fileInput.parent.appendChild(t.fileInput)},250)},s(e.files,function(e){if(typeof e.data!="undefined"){var n=document.createElement("input");n.type="hidden",n.value=e.data,n.name=e.name}else e.src&&e.src.substr(0,11)==="data:image/"?(n=document.createElement("input"),n.type="hidden",n.value=JSON.stringify(e),n.name=e.name):(n=t.fileInput,n.parent=n.parentNode);r.appendChild(n)}),r.setAttribute("target","upload_iframe"),r.setAttribute("action",t.action),r.setAttribute("method","post"),r.setAttribute("enctype","multipart/form-data"),r.setAttribute("encoding","multipart/form-data"),r.submit()},a=function(e){return e>1048576?
Math.round(e*100/1048576)/100+"MB":e>1024?Math.round(e/1024)+"KB":e+"B"},f=function(e){var t=e/3600>>0,n=(e-t*3600)/60>>0,e=e-t*3600-n*60;return t<10&&(t="0"+t),n<10&&(n="0"+n),e<10&&(e="0"+e),t+":"+n+":"+e};return this.dropArea&&function(){var e=document.createElement("form");e.style.cssText="z-index: 10000; background: rgba(0,200,0, 0.5); position: fixed; width: 100%; height: 100%; left: 0; top: 0; display: none; font-weight: bold; font-size: 2.5em; color: #fff; line-height: 6em; text-align: center; text-shadow: 0 0 15px #000;",t.dropAreaStyle&&(e.style.cssText+=t.dropAreaStyle),e.appendChild(document.createTextNode(t.dropAreaMessage)),e.ondragenter=function(e){return e.preventDefault(),e.stopPropagation(),!1},e.ondragover=function(e){return e.preventDefault(),e.stopPropagation(),!1},e.ondrop=function(t){t.preventDefault(),t.stopPropagation(),e.style.display="none",typeof t.dataTransfer!="undefined"&&typeof t.dataTransfer.files!="undefined"&&t.dataTransfer.files.length!==0&&i(t.dataTransfer.files)},e.ondragleave=function(t){t.preventDefault(),t.stopPropagation(),setTimeout(function(){e.style.display="none"},100)};var n=t.dropArea;n===window&&(n=document.body),n.appendChild(e),n.ondragenter=function(t){typeof t.dataTransfer!="undefined"&&typeof t.dataTransfer.files!="undefined"&&setTimeout(function(){e.style.display="block"},10)},n===document.body&&(window.onresize=function(){!window.innerWidth&&document.body&&document.body.offsetWidth&&(window.innerWidth=document.body.offsetWidth,window.innerHeight=document.body.offsetHeight),window.innerWidth&&window.innerHeight&&(e.style.width=window.innerWidth+"px",e.style.height=window.innerHeight+"px")})()}(),(this.fakeInput||this.fileInput)&&e(),this};var PI=Math.PI,RAD_DEG=180/PI,DEG_RAD=1/RAD_DEG;(Random=function(e){return this.seed=typeof e=="number"?e:Math.random()*2147483648>>0,this.n=Number(this.seed),this}).prototype={toInt:function(){return this.n=this.n*16807%2147483647},toDouble:function(){return(this.n=this.n*16807%2147483647)/2147483647},intRange:function(e,t){return e-=.4999,t+=.4999,Math.round(e+(t-e)*((this.n=this.n*16807%2147483647)/2147483647))},doubleRange:function(e,t){return e+(t-e)*((this.n=this.n*16807%2147483647)/2147483647)}},ScreenMetrics=function(){function e(t,n,r,i){for(var s in n)typeof (i=n[s])=="object"?e(t,i,s):(r&&(t["px_"+s]=t["px_"+r]*t[r+"_"+s],t[r+"_"+i]=t[r+"_"+s]*t[s+"_"+i],t[r+"_px"]=1/t["px_"+r],t[i+"_"+r]=1/t[s+"_"+i]*1/t[r+"_"+s],t[s+"_"+r]=1/t[r+"_"+s]),t["px_"+i]=t["px_"+s]*t[s+"_"+i],t[s+"_px"]=1/t["px_"+s],t[i+"_px"]=1/t["px_"+s]*1/t[s+"_"+i],t[i+"_"+s]=1/t[s+"_"+i])}var t=function(e){return n.style.fontSize=e,e/1e4},n=document.createElement("div");n.setAttribute("style","position: absolute; width: 100em; height: 10000em; overflow: hidden;"),document.body?document.body.appendChild(n):console.log("document body not available");for(var r="xx-small,x-small,small,medium,large,x-large,xx-large".split(","),i=0,s={};i<r.length;i++)s[r[i]+"_px"]=t(r[i]);return s["%_px"]=t("100%")/100,s.px_pt=1/t("1pt"),s.pt_pc=1/12,s.px_in=1/t("72pt"),s.in_ft=1/12,s.ft_yd=1/3,s.px_mm=25.4*s.px_in,s.mm_cm=.1,s.cm_m=.01,s.px_ex=1/t("1ex"),s.ex_em=1/s.px_ex/t("1em"),document.body&&document.body.removeChild(n),e(s,{pt:"pc",mm:{cm:"m"},"in":{ft:"yd"},ex:"em"}),s};var djb2=function(e){for(var t=5381,n=0,r=e.length;n<r;n++)var i=e[n].charCodeAt(),t=(t<<5)+t+i;return t};